$circle_size: 100px;
$cube_size: 80px;
$border_size: 7px;

&.hidden{
	>.home-button{
		visibility: hidden;
	}

	>.home-button-prompt{
		visibility: hidden;
	}

	>.compass{
		visibility: hidden;
	}

	>.book{
		visibility: hidden;
	}

	>.objectSelector{
		visibility: hidden;
	}

	>.dropButton{
		visibility: hidden;
	}

	>.progressBar{
		visibility: hidden !important;
	}

	>.reminder{
		@extend .hidden;
	}
}

&:not(.hidden) {
	>.home-button{
		@include animation( bounce-in-left 1000ms linear both );
		@include animation-delay(0s);
	}

	>.home-button-prompt{
		visibility: visible;
	}

	>.compass{
		@include animation( bounce-in-right 1000ms linear both );
		@include animation-delay(.05s);
	}

	>.book{
		@include animation( bounce-in-right 1000ms linear both );
		@include animation-delay(.10s);
	}

	>.objectSelector{
		visibility: visible;
	}

	>.dropButton{
		visibility: visible;
	}
}

>.home-button{

	position: absolute;
	top: 30px;
	left: 30px;
	@include roundButton( $circle_size, $border_size );

	.icon{
		width: 5em;
		height: 5em;
		background-size: 100% 100%;
		background-image: image-url('house-logo.png');
	}
}

>.home-button-prompt{

	@extend %bordered-ui;
	@extend %arrow-left;
	position: absolute;
	top: 20px;
	left: 160px;
	padding: 3em 4em;
	opacity: 0;
	visibility: hidden;
	@include transition( opacity 200ms ease-out, visibility 200ms );
	@include animation( home-button-prompt-out 200ms ease-out both );

	&.shown{
		opacity: 1;
		visibility: visible;
		@include animation( home-button-prompt-in 1000ms linear both );
	}

	>h3{
		font-size: 1.8em;
		white-space: nowrap;
	}

	>.button-group{
		margin-top: 2em;

		>.primary-button{
			display: inline-block;

			&:first-child{
				margin-right: .65em;
			}
		}
	}
}

>.compass{

	@include absoluteTopLeft;

	>.roundButton{
		@include roundButton( $circle_size, $border_size );
	}

	&.grabbing{
		.outline{
			@include scale(1);
			opacity: 1;
		}
	}

	&.design{
		.cube{
			.design{
				opacity: 1;
			}
		}
	}

	&.browse{
		.cube{
			.design{
				opacity: 0;
			}
		}
	}

	&.hover-design{
		.cube{
			.design{
				opacity: 1 !important;
			}
		}
	}

	&.hover-browse{
		.cube{
			.design{
				opacity: 0 !important;
			}
		}
	}

	.cube{
		position: absolute;
		width: $cube_size;
		height: $cube_size;
		left: ($circle_size - $border_size * 2 - $cube_size) / 2;
		top: ($circle_size - $border_size * 2 - $cube_size) / 2;
		@include border-radius(50%);
		overflow: hidden;

		>div{
			@include absoluteTopLeft;

			>div{
				@include absoluteTopLeft;

				&.design{
					opacity: 0;
					@include single-transition( opacity, .5s );
				}
			}
		}
	}
}

>.book{
	$book_size: 80px;

	@include absoluteTopLeft;

	>.roundButton{
		@include roundButton( $circle_size, $border_size );
	}

	.icon{
		position: absolute;
		width: $book_size;
		height: $book_size;
		left: ($circle_size - $border_size * 2 - $book_size) / 2;
		top: ($circle_size - $border_size * 2 - $book_size) / 2;
	}
}

>.reminder{
	$circle_size: 100px;
	$border_size: 5px;
	@include absoluteTopLeft;

	&.hidden{
		visibility: hidden;

		>.dialogue{
			visibility: hidden;
		}
	}

	&:not(.hidden){
		@include animation( bounce-in-right 1000ms linear both );
		@include animation-delay(.15s);
	}

	&.active{

		>.character{
			>.roundButton{
				>.outline{
					@include scale(1);
					opacity: 1;
				}
			}
		}

		>.dialogue{
			visibility: inherit;
			@include animation( reminder-popup 1000ms linear both );
		}
	}

	&.inactive{

		>.dialogue{
			visibility: inherit;
			@include animation( fade-out .25s ease-in-out both, reminder-drop .25s ease-in-out );
		}
	}

	>.character{
		>.roundButton{
			@include roundButton( $circle_size, $border_size );

			canvas{
				display: block;
				width: 90px;
				height: 90px;
			}
		}
	}

	>.dialogue{
		position: absolute;
		display: table;
		bottom: 13em;
		@extend %bordered-ui;
		@extend %arrow-bottom-right;
		right: 0;
		width: 45em;
		height: 10em;
		padding: 2em 0;
		text-align: center;
		visibility: hidden;

		@media screen and (max-width: 1300px) {
			font-size: .85em;
			bottom: 14.5em;
		}

		>.wrapper{
			display: table-cell;
			vertical-align: middle;

			>.hints{
				display: inline-block;
				vertical-align: middle;
				width: 30em;
				text-align: left;

				>li{
					color: $darkgray-ui;
					font-size: 1.7em;
				    font-family: $font_marine_light;
				    letter-spacing: 0.12em;
				    line-height: 1.4;
					display: none;
					-webkit-font-smoothing: antialiased;

					&.shown{
						display: block;
						@include animation( fade-in .25s ease-out );
					}
				}
			}

			>button{
				display: inline-block;
				vertical-align: middle;
				@include arrow-button( 3.6em, $lightgray-ui, transparent, #fff, $blue );
				border-color: transparent;
				margin: 0 (2em/3.6);

				&:first-child{
					margin-left: 0;
				}

				&:last-child{
					margin-right: 0;
				}
			}
		}
	}
}

>.objectSelector{
	position: absolute;
	margin-left: -28px;
	margin-top: -28px;
	@include retina-ui("circle-dot");
	overflow: visible;

	&.hidden{
		display: none;
	}

	>.fill{
		position: relative;
		left: -2px;
		top: -2px;
	}
}

>.dropButton{
	@include absoluteTopLeft;
	width: 20em;
	height: 0;
	@include single-transition(opacity, .5s, $easeOutCubic);

	&.hidden{
		display: none;
	}

	&:not(.hidden){
		display: block;
		@include chromeOSPointerCursor;
		
		>.circle{
			@include animation(pulse 1.5s infinite);
		}
	}

	&.fadeIn{
		opacity: 1;
	}

	&.fadeOut{
		opacity: 0;
	}

	>.circle{
		position: absolute;
		left: 3em;
		top: -7em;
		width: 14em;
		height: 14em;
		background-color: rgba(255, 255, 255, .2);
		@include border-radius(50%);
	}

	>button{
		margin: -1.15em auto;
		color: #fff;
		border-color: #fff;

		&:hover{
			border-color: transparent;
		}
	}
}

>.progressBar{
	position: absolute;
	width: 100%;
	height: 0;
	text-align: center;

	&.hidden{
		visibility: hidden;
	}

	&:not(.hidden){
		visibility: visible;
		@include animation( bounce-in-bottom 1000ms linear both );
		@include animation-delay(.30s);
	}

	>.inner{
		position: relative;
		display: inline-block;
		padding: 0 8em;
		height: 6.8em;
		background-color: rgba(#fff, .22);
		@include box-sizing(border-box);
		@include border-radius(4em);

		>button{
			position: absolute;
			margin: .25em;
			@include arrow-button( 4.5em, rgba(#fff, .5), transparent, #fff, $blue );
			border-color: transparent;

			&.prev{
				left: 0;
			}

			&.next{
				right: 0;
			}
		}

		>.tips-wrapper{
			height: 100%;

			>.tips{
				position: relative;
				top: 50%;
				height: 0;
				white-space: nowrap;

				>li{
					position: relative;
					display: inline-block;
					vertical-align: top;

					&.nearby{
						>.dot{
							opacity: 1;

							>.inner{
								background-color: $yellow-ui;
							}

							>.outer{
								background-color: $yellow-ui;
								@include animation( pulse 1.25s infinite cubic-bezier( 0.66, 0, 0, 1) );
							}
						}
					}

					>.dot{
						position: relative;
						width: 0;
						height: 0;
						opacity: .4;

						>.inner{
							position: absolute;
							left: -8px;
							top: -8px;
							width: 16px;
							height: 16px;
							background-color: #fff;
							@include border-radius(50%);
						}

						>.outer{
							position: absolute;
							left: -11px;
							top: -11px;
							width: 22px;
							height: 22px;
							background-color: rgba(255, 255, 255, .25);
							@include border-radius(50%);
							@include scale(1);
							@include transition(transform .25s, opacity .25s);
						}
					}

					>.dialog{
						position: absolute;
						display: table;
						top: -15.5em;
						left: -5em;
						width: 10em;
						height: 10em;
						opacity: 0;
						visibility: hidden;
						@include translateY(20px);
						@include transition( opacity .25s $easeInOutCubic, transform .25s $easeInOutCubic, visibility .3s );
						@extend %bordered-ui;
						@extend %arrow-bottom;

						>.content{
							display: table-cell;
							vertical-align: middle;
							color: $darkgray-ui;
							opacity: .85;
							@include single-transition(opacity, .25s);

							&:hover{
								opacity: 1;
							}

							>.icon{
								position: relative;
								display: block;
								width: 100%;
								height: 50px;
								text-align: center;
								font-size: 50px;
								color: inherit;
							}
						}

						&:hover{
							visibility: visible;
							opacity: 1;
							@include translateY(0px);
						}
					}

					&:not(.unlocked) {
						>.dialog{
							.content{
								color: $darkgray-ui;
							}

							.icon:before{
								display: none;
							}

							.icon:after{
								@include absoluteTopLeft;
								width: 100%;
								height: 100%;
								background: #fff;
								@extend .icon;
								@extend .icon-lock:before;
							}
						}
					}

					&.unlocked{
						.content{
							color: $blue;
						}
						
						>.dot{
							opacity: 1;
						}
						
						&:hover{
							>.dot{
								>.outer{
									@include scale(1.4);
								}
							}
						}
					}

					&.hover{
						>.dot{
							>.outer{
								opacity: 1;
								@include scale(1);
							}
						}

						>.dialog{
							visibility: visible;
							opacity: 1;
							@include translateY(0px);
						}
					}

				}
			}
		}
	}
}