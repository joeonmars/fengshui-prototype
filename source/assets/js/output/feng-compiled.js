/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
'use strict';var e,aa=aa||{},f=this;function ba(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?d=d[g]?d[g]:d[g]={}:d[g]=b}function ca(){}function m(a){a.F=function(){return a.Pr?a.Pr:a.Pr=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return void 0!==a}function fa(a){return"array"==da(a)}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function r(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a){return a[ka]||(a[ka]=++la)}
var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function s(a,b,c){s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return s.apply(null,arguments)}function oa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var pa=Date.now||function(){return+new Date};
function t(a,b){function c(){}c.prototype=b.prototype;a.i=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Sy=function(a,c,h){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}}function qa(a,b){return 0==a.lastIndexOf(b,0)}function ra(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function sa(a,b){for(var c=a.split("%s"),d="",g=Array.prototype.slice.call(arguments,1);g.length&&1<c.length;)d+=c.shift()+g.shift();return d+c.join("%s")}
function ta(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ua(a){return decodeURIComponent(a.replace(/\+/g," "))}function va(a){if(!wa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(xa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ya,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(za,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));return a}var xa=/&/g,ya=/</g,za=/>/g,Ca=/"/g,Da=/'/g,wa=/[&<>"']/;
function Ea(a,b){a.length>b&&(a=a.substring(0,b-3)+"...");return a}function Fa(a,b){return a<b?-1:a>b?1:0}Math.random();function Ga(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ha(a){var b=q(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,g){return b+g.toUpperCase()})}var Ia,Ja,Ka,La,Ma,Na,Oa,Pa;
function Qa(){return f.navigator?f.navigator.userAgent:null}function Ra(){return f.navigator}Ma=La=Ka=Ja=Ia=!1;var Sa;if(Sa=Qa()){var Ua=Ra();Ia=qa(Sa,"Opera");Ja=!Ia&&(-1!=Sa.indexOf("MSIE")||-1!=Sa.indexOf("Trident"));La=(Ka=!Ia&&-1!=Sa.indexOf("WebKit"))&&-1!=Sa.indexOf("Mobile");Ma=!Ia&&!Ka&&!Ja&&"Gecko"==Ua.product}var Va=Ia,u=Ja,Wa=Ma,w=Ka,Xa=La,Ya,Za=Ra();Ya=Za&&Za.platform||"";Na=-1!=Ya.indexOf("Mac");Oa=-1!=Ya.indexOf("Win");Pa=-1!=Ya.indexOf("Linux");
var $a=!!Ra()&&-1!=(Ra().appVersion||"").indexOf("X11");function ab(){var a=f.document;return a?a.documentMode:void 0}var bb;a:{var cb="",db;if(Va&&f.opera)var eb=f.opera.version,cb="function"==typeof eb?eb():eb;else if(Wa?db=/rv\:([^\);]+)(\)|;)/:u?db=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:w&&(db=/WebKit\/(\S+)/),db)var fb=db.exec(Qa()),cb=fb?fb[1]:"";if(u){var ib=ab();if(ib>parseFloat(cb)){bb=String(ib);break a}}bb=cb}var jb={};
function y(a){var b;if(!(b=jb[a])){b=0;for(var c=ta(String(bb)).split("."),d=ta(String(a)).split("."),g=Math.max(c.length,d.length),h=0;0==b&&h<g;h++){var k=c[h]||"",l=d[h]||"",n=/(\d*)(\D*)/g,p=/(\d*)(\D*)/g;do{var v=n.exec(k)||["","",""],x=p.exec(l)||["","",""];if(0==v[0].length&&0==x[0].length)break;b=Fa(0==v[1].length?0:parseInt(v[1],10),0==x[1].length?0:parseInt(x[1],10))||Fa(0==v[2].length,0==x[2].length)||Fa(v[2],x[2])}while(0==b)}b=jb[a]=0<=b}return b}function kb(a){return u&&lb>=a}
var mb=f.document,lb=mb&&u?ab()||("CSS1Compat"==mb.compatMode?parseInt(bb,10):5):void 0,nb,ob=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function pb(a){if(qb){qb=!1;var b=f.location;if(b){var c=b.href;if(c&&(c=(c=pb(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw qb=!0,Error();}}return a.match(ob)}var qb=w;function z(a,b,c){for(var d in a)b.call(c,a[d],d,a)}
function rb(a,b,c){var d={},g;for(g in a)d[g]=b.call(c,a[g],g,a);return d}function sb(a){var b=0,c;for(c in a)b++;return b}function tb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ub(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function xb(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function yb(a,b){var c=xb(a,b,void 0);return c&&a[c]}function zb(){var a=Ab,b;for(b in a)return!1;return!0}function Bb(a,b,c){a[b]=c}var Cb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Db(a,b){for(var c,d,g=1;g<arguments.length;g++){d=arguments[g];for(c in d)a[c]=d[c];for(var h=0;h<Cb.length;h++)c=Cb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Eb(){return!0}function Fb(a){var b;b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}}
var B=Array.prototype,Gb=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},C=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=q(a)?a.split(""):a,h=0;h<d;h++)h in g&&b.call(c,g[h],h,a)};function Hb(a,b,c){for(var d=q(a)?a.split(""):a,g=a.length-1;0<=g;--g)g in d&&b.call(c,d[g],g,a)}
var D=B.filter?function(a,b,c){return B.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=[],h=0,k=q(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(g[h++]=n)}return g},E=B.map?function(a,b,c){return B.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=Array(d),h=q(a)?a.split(""):a,k=0;k<d;k++)k in h&&(g[k]=b.call(c,h[k],k,a));return g},Ib=B.reduce?function(a,b,c,d){d&&(b=s(b,d));return B.reduce.call(a,b,c)}:function(a,b,c,d){var g=c;C(a,function(c,k){g=b.call(d,g,c,
k,a)});return g},Jb=B.some?function(a,b,c){return B.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=q(a)?a.split(""):a,h=0;h<d;h++)if(h in g&&b.call(c,g[h],h,a))return!0;return!1},Kb=B.every?function(a,b,c){return B.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=q(a)?a.split(""):a,h=0;h<d;h++)if(h in g&&!b.call(c,g[h],h,a))return!1;return!0};function Lb(a,b){var c=0;C(a,function(a,g,h){b.call(void 0,a,g,h)&&++c},void 0);return c}
function F(a,b,c){b=Mb(a,b,c);return 0>b?null:q(a)?a.charAt(b):a[b]}function Mb(a,b,c){for(var d=a.length,g=q(a)?a.split(""):a,h=0;h<d;h++)if(h in g&&b.call(c,g[h],h,a))return h;return-1}function Nb(a,b){return 0<=Gb(a,b)}function Ob(a){if(!fa(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Pb(a,b){Nb(a,b)||a.push(b)}function Qb(a,b){var c=Gb(a,b),d;(d=0<=c)&&B.splice.call(a,c,1);return d}function Rb(a){return B.concat.apply(B,arguments)}
function Sb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Tb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],g;if(fa(d)||(g=ga(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(g)for(var h=a.length,k=d.length,l=0;l<k;l++)a[h+l]=d[l];else a.push(d)}}function Ub(a,b,c,d){B.splice.apply(a,Vb(arguments,1))}function Vb(a,b,c){return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)}
function Wb(a,b){if(!ga(a)||!ga(b)||a.length!=b.length)return!1;for(var c=a.length,d=Xb,g=0;g<c;g++)if(!d(a[g],b[g]))return!1;return!0}function Xb(a,b){return a===b}function Yb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Zb(a){return Math.floor(Math.random()*a)}function $b(a,b){return a+Math.random()*(b-a)}function ac(a,b,c){return Math.min(Math.max(a,b),c)}function bc(a,b){var c=a%b;return 0>c*b?c+b:c}function cc(a,b,c){return a+c*(b-a)}
function dc(a){return Ib(arguments,function(a,c){return a+c},0)}function ec(a){return dc.apply(null,arguments)/arguments.length}function fc(a){var b=arguments.length;if(2>b)return 0;var c=ec.apply(null,arguments);return dc.apply(null,E(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function gc(a){return Math.sqrt(fc.apply(null,arguments))}var hc="StopIteration"in f?f.StopIteration:Error("StopIteration");function ic(){}ic.prototype.rl=function(){throw hc;};ic.prototype.Hd=function(){return this};
function jc(a){if(a instanceof ic)return a;if("function"==typeof a.Hd)return a.Hd(!1);if(ga(a)){var b=0,c=new ic;c.rl=function(){for(;;){if(b>=a.length)throw hc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}function kc(a,b){if(ga(a))try{C(a,b,void 0)}catch(c){if(c!==hc)throw c;}else{a=jc(a);try{for(;;)b.call(void 0,a.rl(),void 0,a)}catch(d){if(d!==hc)throw d;}}}function lc(a){if(ga(a))return Sb(a);a=jc(a);var b=[];kc(a,function(a){b.push(a)});return b}
function mc(a,b){this.Aa={};this.ja=[];this.fj=this.oa=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Pn(a)}e=mc.prototype;e.rb=function(){return this.oa};e.Rb=function(){nc(this);for(var a=[],b=0;b<this.ja.length;b++)a.push(this.Aa[this.ja[b]]);return a};e.qe=function(){nc(this);return this.ja.concat()};e.gf=function(a){return oc(this.Aa,a)};
e.Wn=function(a){for(var b=0;b<this.ja.length;b++){var c=this.ja[b];if(oc(this.Aa,c)&&this.Aa[c]==a)return!0}return!1};e.equals=function(a,b){if(this===a)return!0;if(this.oa!=a.rb())return!1;var c=b||pc;nc(this);for(var d,g=0;d=this.ja[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function pc(a,b){return a===b}e.qf=function(){return 0==this.oa};e.clear=function(){this.Aa={};this.fj=this.oa=this.ja.length=0};
e.remove=function(a){return oc(this.Aa,a)?(delete this.Aa[a],this.oa--,this.fj++,this.ja.length>2*this.oa&&nc(this),!0):!1};function nc(a){if(a.oa!=a.ja.length){for(var b=0,c=0;b<a.ja.length;){var d=a.ja[b];oc(a.Aa,d)&&(a.ja[c++]=d);b++}a.ja.length=c}if(a.oa!=a.ja.length){for(var g={},c=b=0;b<a.ja.length;)d=a.ja[b],oc(g,d)||(a.ja[c++]=d,g[d]=1),b++;a.ja.length=c}}e.get=function(a,b){return oc(this.Aa,a)?this.Aa[a]:b};
e.set=function(a,b){oc(this.Aa,a)||(this.oa++,this.ja.push(a),this.fj++);this.Aa[a]=b};e.Pn=function(a){var b;a instanceof mc?(b=a.qe(),a=a.Rb()):(b=ub(a),a=tb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};e.clone=function(){return new mc(this)};e.Hd=function(a){nc(this);var b=0,c=this.ja,d=this.Aa,g=this.fj,h=this,k=new ic;k.rl=function(){for(;;){if(g!=h.fj)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw hc;var k=c[b++];return a?k:d[k]}};return k};
function oc(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function qc(a){return"function"==typeof a.rb?a.rb():ga(a)||q(a)?a.length:sb(a)}function rc(a){if("function"==typeof a.Rb)return a.Rb();if(q(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return tb(a)}function sc(a){if("function"==typeof a.qe)return a.qe();if("function"!=typeof a.Rb){if(ga(a)||q(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ub(a)}}
function tc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ga(a)||q(a))C(a,b,c);else for(var d=sc(a),g=rc(a),h=g.length,k=0;k<h;k++)b.call(c,g[k],d&&d[k],a)}function uc(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ga(a)||q(a))return Kb(a,b,void 0);for(var c=sc(a),d=rc(a),g=d.length,h=0;h<g;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0}
function vc(a,b){var c;if(a instanceof vc)this.gc=ea(b)?b:a.gc,wc(this,a.Qg),c=a.Sl,xc(this),this.Sl=c,c=a.vi,xc(this),this.vi=c,yc(this,a.Gl),c=a.Dl,xc(this),this.Dl=c,zc(this,a.Wc.clone()),c=a.Yk,xc(this),this.Yk=c;else if(a&&(c=pb(String(a)))){this.gc=!!b;wc(this,c[1]||"",!0);var d=c[2]||"";xc(this);this.Sl=d?decodeURIComponent(d):"";d=c[3]||"";xc(this);this.vi=d?decodeURIComponent(d):"";yc(this,c[4]);d=c[5]||"";xc(this);this.Dl=d?decodeURIComponent(d):"";zc(this,c[6]||"",!0);c=c[7]||"";xc(this);
this.Yk=c?decodeURIComponent(c):""}else this.gc=!!b,this.Wc=new Ac(null,0,this.gc)}e=vc.prototype;e.Qg="";e.Sl="";e.vi="";e.Gl=null;e.Dl="";e.Yk="";e.Uv=!1;e.gc=!1;
e.toString=function(){var a=[],b=this.Qg;b&&a.push(Bc(b,Cc),":");if(b=this.vi){a.push("//");var c=this.Sl;c&&a.push(Bc(c,Cc),"@");a.push(encodeURIComponent(String(b)));b=this.Gl;null!=b&&a.push(":",String(b))}if(b=this.Dl)this.vi&&"/"!=b.charAt(0)&&a.push("/"),a.push(Bc(b,"/"==b.charAt(0)?Dc:Ec));(b=this.Wc.toString())&&a.push("?",b);(b=this.Yk)&&a.push("#",Bc(b,Fc));return a.join("")};e.clone=function(){return new vc(this)};
function wc(a,b,c){xc(a);a.Qg=c?b?decodeURIComponent(b):"":b;a.Qg&&(a.Qg=a.Qg.replace(/:$/,""))}function yc(a,b){xc(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Gl=b}else a.Gl=null}e.Kr=function(){return""!==this.Wc.toString()};function zc(a,b,c){xc(a);b instanceof Ac?(a.Wc=b,a.Wc.Uo(a.gc)):(c||(b=Bc(b,Gc)),a.Wc=new Ac(b,0,a.gc))}function Hc(){return(new vc(window.location.href)).Wc}e.Zk=function(){return this.Wc.toString()};
function xc(a){if(a.Uv)throw Error("Tried to modify a read-only Uri");}e.Uo=function(a){this.gc=a;this.Wc&&this.Wc.Uo(a);return this};function Bc(a,b){return q(a)?encodeURI(a).replace(b,Ic):null}function Ic(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Cc=/[#\/\?@]/g,Ec=/[\#\?:]/g,Dc=/[\#\?]/g,Gc=/[\#\?@]/g,Fc=/#/g;function Ac(a,b,c){this.Qb=a||null;this.gc=!!c}
function Jc(a){if(!a.za&&(a.za=new mc,a.oa=0,a.Qb))for(var b=a.Qb.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),g=null,h=null;0<=d?(g=b[c].substring(0,d),h=b[c].substring(d+1)):g=b[c];g=ua(g);g=Kc(a,g);a.add(g,h?ua(h):"")}}e=Ac.prototype;e.za=null;e.oa=null;e.rb=function(){Jc(this);return this.oa};e.add=function(a,b){Jc(this);this.Qb=null;a=Kc(this,a);var c=this.za.get(a);c||this.za.set(a,c=[]);c.push(b);this.oa++;return this};
e.remove=function(a){Jc(this);a=Kc(this,a);return this.za.gf(a)?(this.Qb=null,this.oa-=this.za.get(a).length,this.za.remove(a)):!1};e.clear=function(){this.za=this.Qb=null;this.oa=0};e.qf=function(){Jc(this);return 0==this.oa};e.gf=function(a){Jc(this);a=Kc(this,a);return this.za.gf(a)};e.Wn=function(a){var b=this.Rb();return Nb(b,a)};e.qe=function(){Jc(this);for(var a=this.za.Rb(),b=this.za.qe(),c=[],d=0;d<b.length;d++)for(var g=a[d],h=0;h<g.length;h++)c.push(b[d]);return c};
e.Rb=function(a){Jc(this);var b=[];if(q(a))this.gf(a)&&(b=Rb(b,this.za.get(Kc(this,a))));else{a=this.za.Rb();for(var c=0;c<a.length;c++)b=Rb(b,a[c])}return b};e.set=function(a,b){Jc(this);this.Qb=null;a=Kc(this,a);this.gf(a)&&(this.oa-=this.za.get(a).length);this.za.set(a,[b]);this.oa++;return this};e.get=function(a,b){var c=a?this.Rb(a):[];return 0<c.length?String(c[0]):b};e.setValues=function(a,b){this.remove(a);0<b.length&&(this.Qb=null,this.za.set(Kc(this,a),Sb(b)),this.oa+=b.length)};
e.toString=function(){if(this.Qb)return this.Qb;if(!this.za)return"";for(var a=[],b=this.za.qe(),c=0;c<b.length;c++)for(var d=b[c],g=encodeURIComponent(String(d)),d=this.Rb(d),h=0;h<d.length;h++){var k=g;""!==d[h]&&(k+="="+encodeURIComponent(String(d[h])));a.push(k)}return this.Qb=a.join("&")};e.clone=function(){var a=new Ac;a.Qb=this.Qb;this.za&&(a.za=this.za.clone(),a.oa=this.oa);return a};function Kc(a,b){var c=String(b);a.gc&&(c=c.toLowerCase());return c}
e.Uo=function(a){a&&!this.gc&&(Jc(this),this.Qb=null,tc(this.za,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.setValues(d,a))},this));this.gc=a};var Lc={},Mc={};function Oc(a){a=a.className;return q(a)&&a.match(/\S+/g)||[]}function Pc(a,b){for(var c=Oc(a),d=Vb(arguments,1),g=c.length+d.length,h=c,k=0;k<d.length;k++)Nb(h,d[k])||h.push(d[k]);a.className=c.join(" ");return c.length==g}function Qc(a,b){var c=Oc(a),c=Rc(c,Vb(arguments,1));a.className=c.join(" ")}
function Rc(a,b){return D(a,function(a){return!Nb(b,a)})}function Sc(a,b){this.width=a;this.height=b}e=Sc.prototype;e.clone=function(){return new Sc(this.width,this.height)};e.area=function(){return this.width*this.height};e.pi=function(){return this.width/this.height};e.qf=function(){return!this.area()};e.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};e.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
e.scale=function(a,b){var c=r(b)?b:a;this.width*=a;this.height*=c;return this};var Tc=!u||kb(9),Uc=!Wa&&!u||u&&kb(9)||Wa&&y("1.9.1");u&&y("9");function H(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0}H.prototype.clone=function(){return new H(this.x,this.y)};H.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};H.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
H.prototype.scale=function(a,b){var c=r(b)?b:a;this.x*=a;this.y*=c;return this};function Vc(a){return a?new Wc(Xc(a)):nb||(nb=new Wc)}function Yc(a){return q(a)?document.getElementById(a):a}function Zc(a){var b=a||document;return b.querySelectorAll&&b.querySelector?b.querySelectorAll(".tip-module"):$c("tip-module",a)}function I(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):$c(a,b)[0])||null}
function $c(a,b){var c,d,g,h;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var k=c.getElementsByClassName(a);return k}k=c.getElementsByTagName("*");if(a){h={};for(d=g=0;c=k[d];d++){var l=c.className;"function"==typeof l.split&&Nb(l.split(/\s+/),a)&&(h[g++]=c)}h.length=g;return h}return k}
function ad(a,b){z(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in bd?a.setAttribute(bd[d],b):qa(d,"aria-")||qa(d,"data-")?a.setAttribute(d,b):a[d]=b})}var bd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function cd(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Sc(a.clientWidth,a.clientHeight)}function dd(a){return a.parentWindow||a.defaultView}
function ed(a,b,c){var d=arguments,g=document,h=d[0],k=d[1];if(!Tc&&k&&(k.name||k.type)){h=["<",h];k.name&&h.push(' name="',va(k.name),'"');if(k.type){h.push(' type="',va(k.type),'"');var l={};Db(l,k);delete l.type;k=l}h.push(">");h=h.join("")}h=g.createElement(h);k&&(q(k)?h.className=k:fa(k)?Pc.apply(null,[h].concat(k)):ad(h,k));2<d.length&&fd(g,h,d);return h}
function fd(a,b,c){function d(c){c&&b.appendChild(q(c)?a.createTextNode(c):c)}for(var g=2;g<c.length;g++){var h=c[g];!ga(h)||ia(h)&&0<h.nodeType?d(h):C(gd(h)?Sb(h):h,d)}}function hd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function id(a){return Uc&&void 0!=a.children?a.children:D(a.childNodes,function(a){return 1==a.nodeType})}
function jd(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function kd(a){return a.contentDocument||a.contentWindow.document}
function gd(a){if(a&&"number"==typeof a.length){if(ia(a))return"function"==typeof a.item||"string"==typeof a.item;if(ha(a))return"function"==typeof a.item}return!1}function Wc(a){this.Qa=a||f.document||document}e=Wc.prototype;e.Ir=function(a){return q(a)?this.Qa.getElementById(a):a};e.jo=function(a){return cd(a||dd(this.Qa)||window)};e.createElement=function(a){return this.Qa.createElement(a)};e.createTextNode=function(a){return this.Qa.createTextNode(String(a))};
function ld(a){var b=a.Qa;a=w||"CSS1Compat"!=b.compatMode?b.body||b.documentElement:b.documentElement;b=dd(b);return u&&y("10")&&b.pageYOffset!=a.scrollTop?new H(a.scrollLeft,a.scrollTop):new H(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}e.appendChild=function(a,b){a.appendChild(b)};e.contains=jd;function md(a){return ia(a)?"zSoyz":String(a)}var nd={};u&&y(8);
function od(a,b){var c=new Wc(void 0)||Vc(),d=md(a(b||nd,void 0,void 0));var g=c.Qa,c=g.createElement("div");u?(c.innerHTML="<br>"+d,c.removeChild(c.firstChild)):c.innerHTML=d;if(1==c.childNodes.length)d=c.removeChild(c.firstChild);else for(d=g.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d}function pd(a,b){function c(){}c.prototype=a;var d=new c,g;for(g in b)d[g]=b[g];return d}function qd(a){var b=[],c;for(c in a)b.push(c);return b}var J={u:{}};J.u.debug={};
J.u.debug.Fy=function(){return'<div id="debugger"><div class="header"><h4>Debugger</h4><div class="button display"></div></div><ul></ul></div>'};J.u.debug.eh=function(a){return'<li class="debugView" id="'+a.id+'"><div class="header"><h5>'+a.title+'</h5><div class="button display"></div></div><div class="body">'+a.body+"</div></li>"};J.u.debug.jt=function(){return"\t"+J.u.debug.eh({id:"debug-camera",title:"Camera Controls",body:'<div class="viewPanel"><div><select></select><button type="button" class="button use"></button><div class="button visible"></div></div><ul><li><label>fov</label><input name="fov" type="number"></li><li><label>position x</label><input name="position-x" type="number"></li><li><label>position y</label><input name="position-y" type="number"></li><li><label>position z</label><input name="position-z" type="number"></li><li><label>rotation x</label><input name="rotation-x" type="number"></li><li><label>rotation y</label><input name="rotation-y" type="number"></li><li><label>rotation z</label><input name="rotation-z" type="number"></li><li><input class="degrees" type="checkbox">in degrees</li><li><input class="helpers" type="checkbox" checked>show helpers</li></ul></div>'})};
J.u.debug.zt=function(){return"\t"+J.u.debug.eh({id:"debug-manipulate",title:"Manipulate",body:'<div class="viewPanel"></div>'})};J.u.debug.Bt=function(){return"\t"+J.u.debug.eh({id:"debug-pathfinding",title:"Pathfinding",body:'<div class="canvasContainer"></div>'})};
J.u.debug.it=function(a){var b;b='<div class="tipsPanel"><button class="unlock-all">Unlock All</button><ul class="tips">';a=a.Dd;for(var c=a.length,d=0;d<c;d++){var g=a[d];b+='<li data-tip-id="'+g.id+'" data-view-id="'+g.view+'" data-section-id="'+g.ey+'"><div class="icon icon-'+g.icon+'"></div><div class="caption"><p>'+g.id+"</p><p>"+g.view+"</p><p>"+g.ey+"</p></div></li>"}return b="\t"+J.u.debug.eh({id:"debug-achievements",title:"Achievements",body:b+"</ul></div>"})};
J.u.debug.At=function(){return"\t"+J.u.debug.eh({id:"debug-pathtrack",title:"Path Track",body:'<div class="editPanel"><div class="scene"><label>Scene</label><select></select></div><button type="button" class="button output"></button><input type="file" class="button import"><textarea rows="10"></textarea></div><div class="pointPanel"><label>Control Point</label><button type="button" class="button add"></button><button type="button" class="button remove"></button><ul><li><label>x</label><input name="x" type="number"></li><li><label>y</label><input name="y" type="number"></li><li><label>z</label><input name="z" type="number"></li><li><label>tipid</label><input name="tipid" type="text"></li></ul></div><div class="playbackPanel"><label>Playback</label><div class="controls"><button type="button" class="button play"></button><button type="button" class="button camera fly"></button><input type="range" min="0" max="100" value="0"></div></div>'})};
var rd="closure_listenable_"+(1E6*Math.random()|0);function sd(a){try{return!(!a||!a[rd])}catch(b){return!1}}var xd=0;function yd(a,b,c,d,g){this.listener=a;this.Il=null;this.src=b;this.type=c;this.Sk=!!d;this.of=g;this.key=++xd;this.Og=this.Rk=!1}function zd(a){a.Og=!0;a.listener=null;a.Il=null;a.src=null;a.of=null}function Ad(a){this.src=a;this.sb={};this.dj=0}
Ad.prototype.add=function(a,b,c,d,g){var h=this.sb[a];h||(h=this.sb[a]=[],this.dj++);var k=Bd(h,b,d,g);-1<k?(a=h[k],c||(a.Rk=!1)):(a=new yd(b,this.src,a,!!d,g),a.Rk=c,h.push(a));return a};Ad.prototype.remove=function(a,b,c,d){if(!(a in this.sb))return!1;var g=this.sb[a];b=Bd(g,b,c,d);return-1<b?(zd(g[b]),B.splice.call(g,b,1),0==g.length&&(delete this.sb[a],this.dj--),!0):!1};
function Cd(a,b){var c=b.type;if(!(c in a.sb))return!1;var d=Qb(a.sb[c],b);d&&(zd(b),0==a.sb[c].length&&(delete a.sb[c],a.dj--));return d}Ad.prototype.removeAll=function(a){var b=0,c;for(c in this.sb)if(!a||c==a){for(var d=this.sb[c],g=0;g<d.length;g++)++b,zd(d[g]);delete this.sb[c];this.dj--}return b};Ad.prototype.yi=function(a,b,c,d){a=this.sb[a];var g=-1;a&&(g=Bd(a,b,c,d));return-1<g?a[g]:null};
function Bd(a,b,c,d){for(var g=0;g<a.length;++g){var h=a[g];if(!h.Og&&h.listener==b&&h.Sk==!!c&&h.of==d)return g}return-1}var Dd=!u||kb(9),Ed=!u||kb(9),Fd=u&&!y("9");!w||y("528");Wa&&y("1.9b")||u&&y("8")||Va&&y("9.5")||w&&y("528");Wa&&!y("8")||u&&y("9");function Gd(){0!=Hd&&(Id[ja(this)]=this)}var Hd=0,Id={};Gd.prototype.Bc=!1;Gd.prototype.dispose=function(){if(!this.Bc&&(this.Bc=!0,this.S(),0!=Hd)){var a=ja(this);delete Id[a]}};function Jd(a,b){a.Mi||(a.Mi=[]);a.Mi.push(s(b,void 0))}
Gd.prototype.S=function(){if(this.Mi)for(;this.Mi.length;)this.Mi.shift()()};function Kd(a){a&&"function"==typeof a.dispose&&a.dispose()}function Ld(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.zd=!1;this.Xi=!0}Ld.prototype.S=function(){};Ld.prototype.dispose=function(){};Ld.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Xi=!1};function Md(a){a.preventDefault()}function Nd(a){Nd[" "](a);return a}Nd[" "]=ca;
function Od(a,b){Ld.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.ec=this.state=null;a&&this.init(a,b)}t(Od,Ld);var Pd=[1,4,2];
Od.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Wa){var g;a:{try{Nd(d.nodeName);g=!0;break a}catch(h){}g=!1}g||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=w||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=w||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ec=a;a.defaultPrevented&&this.preventDefault()};function Qd(a){return Dd?0==a.ec.button:"click"==a.type?!0:!!(a.ec.button&Pd[0])}
Od.prototype.preventDefault=function(){Od.i.preventDefault.call(this);var a=this.ec;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Fd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};Od.prototype.Hv=function(){return this.ec};Od.prototype.S=function(){};var Rd="closure_lm_"+(1E6*Math.random()|0),Sd={},Td=0;function K(a,b,c,d,g){if(fa(b)){for(var h=0;h<b.length;h++)K(a,b[h],c,d,g);return null}c=Ud(c);return sd(a)?a.j(b,c,d,g):Vd(a,b,c,!1,d,g)}
function Vd(a,b,c,d,g,h){if(!b)throw Error("Invalid event type");var k=!!g,l=Wd(a);l||(a[Rd]=l=new Ad(a));c=l.add(b,c,d,g,h);if(c.Il)return c;d=Xd();c.Il=d;d.src=a;d.listener=c;a.addEventListener?a.addEventListener(b,d,k):a.attachEvent(b in Sd?Sd[b]:Sd[b]="on"+b,d);Td++;return c}function Xd(){var a=Yd,b=Ed?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}
function Zd(a,b,c,d,g){if(fa(b)){for(var h=0;h<b.length;h++)Zd(a,b[h],c,d,g);return null}c=Ud(c);return sd(a)?a.Ra(b,c,d,g):Vd(a,b,c,!0,d,g)}function $d(a,b,c,d,g){if(fa(b))for(var h=0;h<b.length;h++)$d(a,b[h],c,d,g);else c=Ud(c),sd(a)?a.Ia(b,c,d,g):a&&(a=Wd(a))&&(b=a.yi(b,c,!!d,g))&&ae(b)}
function ae(a){if(r(a)||!a||a.Og)return!1;var b=a.src;if(sd(b))return Cd(b.qd,a);var c=a.type,d=a.Il;b.removeEventListener?b.removeEventListener(c,d,a.Sk):b.detachEvent&&b.detachEvent(c in Sd?Sd[c]:Sd[c]="on"+c,d);Td--;(c=Wd(b))?(Cd(c,a),0==c.dj&&(c.src=null,b[Rd]=null)):zd(a);return!0}function be(a,b,c,d){var g=1;if(a=Wd(a))if(b=a.sb[b])for(b=Sb(b),a=0;a<b.length;a++){var h=b[a];h&&h.Sk==c&&!h.Og&&(g&=!1!==ce(h,d))}return Boolean(g)}
function ce(a,b){var c=a.listener,d=a.of||a.src;a.Rk&&ae(a);return c.call(d,b)}
function Yd(a,b){if(a.Og)return!0;if(!Ed){var c;if(!(c=b))a:{c=["window","event"];for(var d=f,g;g=c.shift();)if(null!=d[g])d=d[g];else{c=null;break a}c=d}g=c;c=new Od(g,this);d=!0;if(!(0>g.keyCode||void 0!=g.returnValue)){a:{var h=!1;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==g.returnValue)g.returnValue=!0}g=[];for(h=c.currentTarget;h;h=h.parentNode)g.push(h);for(var h=a.type,l=g.length-1;!c.zd&&0<=l;l--)c.currentTarget=g[l],d&=be(g[l],h,!0,c);for(l=0;!c.zd&&l<g.length;l++)c.currentTarget=
g[l],d&=be(g[l],h,!1,c)}return d}return ce(a,new Od(b,this))}function Wd(a){a=a[Rd];return a instanceof Ad?a:null}var de="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ud(a){return ha(a)?a:a[de]||(a[de]=function(b){return a.handleEvent(b)})}function L(a){Gd.call(this);this.Tc=a;this.ja={}}t(L,Gd);var ee=[];e=L.prototype;e.j=function(a,b,c,d){fa(b)||(ee[0]=b,b=ee);for(var g=0;g<b.length;g++){var h=K(a,b[g],c||this.handleEvent,d||!1,this.Tc||this);if(!h)break;this.ja[h.key]=h}return this};
e.Ra=function(a,b,c,d){return fe(this,a,b,c,d)};function fe(a,b,c,d,g,h){if(fa(c))for(var k=0;k<c.length;k++)fe(a,b,c[k],d,g,h);else{b=Zd(b,c,d||a.handleEvent,g,h||a.Tc||a);if(!b)return a;a.ja[b.key]=b}return a}e.Ia=function(a,b,c,d,g){if(fa(b))for(var h=0;h<b.length;h++)this.Ia(a,b[h],c,d,g);else c=c||this.handleEvent,g=g||this.Tc||this,c=Ud(c),d=!!d,b=sd(a)?a.yi(b,c,d,g):a?(a=Wd(a))?a.yi(b,c,d,g):null:null,b&&(ae(b),delete this.ja[b.key]);return this};
e.removeAll=function(){z(this.ja,ae);this.ja={}};e.S=function(){L.i.S.call(this);this.removeAll()};e.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};
var M=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!q(a))return[a];if(q(c)&&(c=Yc(c),!c))return[];c=c||document;var g=c.ownerDocument||c.documentElement;Nc=c.contentType&&"application/xml"==c.contentType||Va&&(c.doctype||"[object XMLDocument]"==g.toString())||!!g&&(u?g.xml:c.xmlVersion||g.xmlVersion);return(g=d(a)(c))&&g.sl?g:b(g)}function b(a){if(a&&a.sl)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;vb++;if(u&&Nc){var c=vb+
"";a[0].setAttribute("_zipIdx",c);for(var d=1,g;g=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(g),g.setAttribute("_zipIdx",c)}else if(u&&a.rv)try{for(d=1;g=a[d];d++)gb(g)&&b.push(g)}catch(h){}else for(a[0]&&(a[0]._zipIdx=vb),d=1;g=a[d];d++)a[d]._zipIdx!=vb&&b.push(g),g._zipIdx=vb;return b}function c(a,b){if(!b)return 1;var c=Wk(a);return b[c]?0:b[c]=1}function d(a,b){if(Ih){var c=Jh[a];if(c&&!b)return c}if(c=Kh[a])return c;var c=a.charAt(0),h=-1==a.indexOf(" ");0<=a.indexOf("#")&&h&&(b=!0);if(!Ih||
b||-1!=">~+".indexOf(c)||u&&-1!=a.indexOf(":")||Lh&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf("|=")){var k=a.split(/\s*,\s*/);return Kh[a]=2>k.length?g(a):function(a){for(var b=0,c=[],d;d=k[b++];)c=c.concat(g(d)(a));return c}}var l=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return Jh[a]=function(b){try{if(9!=b.nodeType&&!h)throw"";var c=b.querySelectorAll(l);u?c.rv=!0:c.sl=!0;return c}catch(g){return d(a,!0)(b)}}}function g(a){var b=wb(ta(a));if(1==b.length){var c=h(b[0]);
return function(a){if(a=c(a,[]))a.sl=!0;return a}}return function(a){a=td(a);for(var c,d,g=b.length,k,l,n=0;n<g;n++){l=[];c=b[n];d=a.length-1;0<d&&(k={},l.sl=!0);d=h(c);for(var Hh=0;c=a[Hh];Hh++)d(c,l,k);if(!l.length)break;a=l}return l}}function h(a){var b=Mh[a.Mg];if(b)return b;var c=a.Or,c=c?c.Al:"",d=p(a,{me:1}),g="*"==a.tag,h=document.getElementsByClassName;if(c)h={me:1},g&&(h.tag=1),d=p(a,h),"+"==c?b=n(d):"~"==c?b=l(d):">"==c&&(b=k(d));else if(a.id)d=!a.Zr&&g?Eb:p(a,{me:1,id:1}),b=function(b,
c){var g=Vc(b).Ir(a.id),h;if((h=g&&d(g))&&!(h=9==b.nodeType)){for(h=g.parentNode;h&&h!=b;)h=h.parentNode;h=!!h}if(h)return td(g,c)};else if(h&&/\{\s*\[native code\]\s*\}/.test(String(h))&&a.od.length&&!Lh)var d=p(a,{me:1,od:1,id:1}),v=a.od.join(" "),b=function(a,b){for(var c=td(0,b),g,h=0,k=a.getElementsByClassName(v);g=k[h++];)d(g,a)&&c.push(g);return c};else g||a.Zr?(d=p(a,{me:1,tag:1,id:1}),b=function(b,c){for(var g=td(0,c),h,k=0,l=b.getElementsByTagName(a.io());h=l[k++];)d(h,b)&&g.push(h);return g}):
b=function(b,c){for(var d=td(0,c),g,h=0,k=b.getElementsByTagName(a.io());g=k[h++];)d.push(g);return d};return Mh[a.Mg]=b}function k(a){a=a||Eb;return function(b,d,g){for(var h=0,k=b[Nh];b=k[h++];)ud(b)&&(!g||c(b,g))&&a(b,h)&&d.push(b);return d}}function l(a){return function(b,d,g){for(b=b[vd];b;){if(ud(b)){if(g&&!c(b,g))break;a(b)&&d.push(b)}b=b[vd]}return d}}function n(a){return function(b,d,g){for(;b=b[vd];)if(!ye||gb(b)){g&&!c(b,g)||!a(b)||d.push(b);break}return d}}function p(a,b){if(!a)return Eb;
b=b||{};var c=null;b.me||(c=Aa(c,gb));b.tag||"*"!=a.tag&&(c=Aa(c,function(b){return b&&b.tagName==a.io()}));b.od||C(a.od,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Aa(c,function(a){return d.test(a.className)});c.count=b});b.Ff||C(a.Ff,function(a){var b=a.name;Cf[b]&&(c=Aa(c,Cf[b](b,a.value)))});b.Qk||C(a.Qk,function(a){var b,d=a.Rn;a.type&&Oh[a.type]?b=Oh[a.type](d,a.wo):d.length&&(b=Xk(d));b&&(c=Aa(c,b))});b.id||a.id&&(c=Aa(c,function(b){return!!b&&b.id==a.id}));c||"default"in b||(c=
Eb);return c}function v(a){return A(a)%2}function x(a){return!(A(a)%2)}function A(a){var b=a.parentNode,c=0,d=b[Nh],g=a._i||-1,h=b._l||-1;if(!d)return-1;d=d.length;if(h==d&&0<=g&&0<=h)return g;b._l=d;g=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[vd])ud(b)&&(b._i=++c,a===b&&(g=c));return g}function Ta(a){for(;a=a[vd];)if(ud(a))return!1;return!0}function wd(a){for(;a=a[Yk];)if(ud(a))return!1;return!0}function hb(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||
"":(Nc?a.getAttribute(b):a.getAttribute(b,2))||"":""}function gb(a){return 1==a.nodeType}function Aa(a,b){return a?b?function(){return a.apply(window,arguments)&&b.apply(window,arguments)}:a:b}function wb(a){function b(){0<=p&&(G.id=c(p,S).replace(/\\/g,""),p=-1);if(0<=v){var a=v==S?null:c(v,S);0>">~+".indexOf(a)?G.tag=a:G.Al=a;v=-1}0<=n&&(G.od.push(c(n+1,S).replace(/\\/g,"")),n=-1)}function c(b,d){return ta(a.slice(b,d))}a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var d=[],g=-1,h=-1,k=-1,l=
-1,n=-1,p=-1,v=-1,x="",A="",Ta,S=0,Aa=a.length,G=null,Ba=null;x=A,A=a.charAt(S),S<Aa;S++)"\\"!=x&&(G||(Ta=S,G={Mg:null,Ff:[],Qk:[],od:[],tag:null,Al:null,id:null,io:function(){return Nc?this.Wx:this.tag}},v=S),0<=g?"]"==A?(Ba.Rn?Ba.wo=c(k||g+1,S):Ba.Rn=c(g+1,S),!(g=Ba.wo)||'"'!=g.charAt(0)&&"'"!=g.charAt(0)||(Ba.wo=g.slice(1,-1)),G.Qk.push(Ba),Ba=null,g=k=-1):"="==A&&(k=0<="|~^$*".indexOf(x)?x:"",Ba.type=k+A,Ba.Rn=c(g+1,S-k.length),k=S+1):0<=h?")"==A&&(0<=l&&(Ba.value=c(h+1,S)),l=h=-1):"#"==A?(b(),
p=S+1):"."==A?(b(),n=S):":"==A?(b(),l=S):"["==A?(b(),g=S,Ba={}):"("==A?(0<=l&&(Ba={name:c(l+1,S),value:null},G.Ff.push(Ba)),h=S):" "==A&&x!=A&&(b(),0<=l&&G.Ff.push({name:c(l+1,S)}),G.Zr=G.Ff.length||G.Qk.length||G.od.length,G.cz=G.Mg=c(Ta,S),G.Wx=G.tag=G.Al?null:G.tag||"*",G.tag&&(G.tag=G.tag.toUpperCase()),d.length&&d[d.length-1].Al&&(G.Or=d.pop(),G.Mg=G.Or.Mg+" "+G.Mg),d.push(G),G=null));return d}function td(a,b){var c=b||[];a&&c.push(a);return c}var Lh=w&&"BackCompat"==document.compatMode,Nh=document.firstChild.children?
"children":"childNodes",Nc=!1,Oh={"*=":function(a,b){return function(c){return 0<=hb(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==hb(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+hb(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+hb(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+hb(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return hb(c,
a)==b}}},ye="undefined"==typeof document.firstChild.nextElementSibling,vd=ye?"nextSibling":"nextElementSibling",Yk=ye?"previousSibling":"previousElementSibling",ud=ye?gb:Eb,Cf={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return wd},"last-child":function(){return Ta},"only-child":function(){return function(a){return wd(a)&&Ta(a)?!0:!1}},empty:function(){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;
if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=wb(b)[0],d={me:1};"*"!=c.tag&&(d.tag=1);c.od.length||(d.od=1);var g=p(c,d);return function(a){return!g(a)}},"nth-child":function(a,b){if("odd"==b)return v;if("even"==b)return x;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,g=c[1]?parseInt(c[1],10):0,h=0,k=-1;0<d?0>g?g=g%d&&d+
g%d:0<g&&(g>=d&&(h=g-g%d),g%=d):0>d&&(d*=-1,0<g&&(k=g,g%=d));if(0<d)return function(a){a=A(a);return a>=h&&(0>k||a<=k)&&a%d==g};b=g}var l=parseInt(b,10);return function(a){return A(a)==l}}},Xk=u?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return Nc?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},Mh={},Kh={},Jh={},Ih=!!document.querySelectorAll&&(!w||y("526")),vb=0,Wk=u?function(a){return Nc?a.getAttribute("_uid")||
a.setAttribute("_uid",++vb)||vb:a.uniqueID}:function(a){return a._uid||(a._uid=++vb)};a.Ff=Cf;return a}();ba("goog.dom.query",M);ba("goog.dom.query.pseudos",M.Ff);function N(){Gd.call(this);this.qd=new Ad(this);this.kv=this}t(N,Gd);N.prototype[rd]=!0;e=N.prototype;e.Sa=null;e.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};e.removeEventListener=function(a,b,c,d){$d(this,a,b,c,d)};
e.dispatchEvent=function(a){var b,c=this.Sa;if(c)for(b=[];c;c=c.Sa)b.push(c);var c=this.kv,d=a.type||a;if(q(a))a=new Ld(a,c);else if(a instanceof Ld)a.target=a.target||c;else{var g=a;a=new Ld(d,c);Db(a,g)}var g=!0,h;if(b)for(var k=b.length-1;!a.zd&&0<=k;k--)h=a.currentTarget=b[k],g=ge(h,d,!0,a)&&g;a.zd||(h=a.currentTarget=c,g=ge(h,d,!0,a)&&g,a.zd||(g=ge(h,d,!1,a)&&g));if(b)for(k=0;!a.zd&&k<b.length;k++)h=a.currentTarget=b[k],g=ge(h,d,!1,a)&&g;return g};
e.S=function(){N.i.S.call(this);he(this);this.Sa=null};e.j=function(a,b,c,d){return this.qd.add(String(a),b,!1,c,d)};e.Ra=function(a,b,c,d){return this.qd.add(String(a),b,!0,c,d)};e.Ia=function(a,b,c,d){return this.qd.remove(String(a),b,c,d)};function he(a){a.qd&&a.qd.removeAll(void 0)}
function ge(a,b,c,d){b=a.qd.sb[String(b)];if(!b)return!0;b=Sb(b);for(var g=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.Og&&k.Sk==c){var l=k.listener,n=k.of||k.src;k.Rk&&Cd(a.qd,k);g=!1!==l.call(n,d)&&g}}return g&&!1!=d.Xi}e.yi=function(a,b,c,d){return this.qd.yi(String(a),b,c,d)};J.ea={};J.ea.debug={};
function ie(a,b){N.call(this);this.Zx=M("#debugger > ul")[0];var c=ed("div"),d=od(a,b);c.appendChild(d);if(void 0!=c.firstElementChild)c=c.firstElementChild;else for(c=c.firstChild;c&&1!=c.nodeType;)c=c.nextSibling;this.domElement=c;this.Zx.appendChild(this.domElement);this.mh=I("body",this.domElement);this.oc=M(".button.display",this.domElement)[0];this.k=new L(this);this.k.j(this.oc,"click",this.Y,!1,this);je(J.V,J.C.I.sp,this.Jo,this);je(J.V,J.C.I.am,this.Io,this)}t(ie,N);e=ie.prototype;
e.show=function(){Qc(this.oc,"invisible");O(this.mh,!0)};e.J=function(){Pc(this.oc,"invisible");O(this.mh,!1)};e.Jo=function(){};e.Io=function(){};e.Y=function(a){switch(a.currentTarget){case this.oc:Nb(Oc(this.oc),"invisible")?this.show():this.J()}};function ke(){ie.call(this,J.u.debug.zt);I("viewPanel",this.domElement);this.J()}t(ke,ie);function le(a){Ld.call(this,"navigate");this.Ed=a}t(le,Ld);
function me(a,b){N.call(this);this.qa=a||window;this.Ql=b||null;K(this.qa,"popstate",this.Ni,!1,this);K(this.qa,"hashchange",this.Ni,!1,this)}t(me,N);e=me.prototype;e.Pb=!1;e.ej=!0;e.Bl="/";e.Bd=function(a){a!=this.Pb&&(this.Pb=a)&&this.dispatchEvent(new le(this.fc()))};e.fc=function(){if(this.ej){var a=this.qa.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)}return this.Ql?this.Ql.gz(this.Bl,this.qa.location):this.qa.location.pathname.substr(this.Bl.length)};
e.Tg=function(a,b){a!=this.fc()&&(this.qa.history.pushState(null,b||this.qa.document.title||"",ne(this,a)),this.dispatchEvent(new le(a)))};e.Pg=function(a,b){this.qa.history.replaceState(null,b||this.qa.document.title||"",ne(this,a));this.dispatchEvent(new le(a))};e.S=function(){$d(this.qa,"popstate",this.Ni,!1,this);this.ej&&$d(this.qa,"hashchange",this.Ni,!1,this)};function ne(a,b){return a.ej?"#"+b:a.Ql?a.Ql.Ty(b,a.Bl,a.qa.location):a.Bl+b+a.qa.location.search}e.Ni=function(){this.Pb&&this.dispatchEvent(new le(this.fc()))};
function oe(a,b){N.call(this);this.td=a||1;this.Xg=b||f;this.Sn=s(this.py,this);this.vo=pa()}t(oe,N);e=oe.prototype;e.enabled=!1;e.ba=null;e.setInterval=function(a){this.td=a;this.ba&&this.enabled?(this.stop(),this.start()):this.ba&&this.stop()};
e.py=function(){if(this.enabled){var a=pa()-this.vo;0<a&&a<0.8*this.td?this.ba=this.Xg.setTimeout(this.Sn,this.td-a):(this.ba&&(this.Xg.clearTimeout(this.ba),this.ba=null),this.dispatchEvent(pe),this.enabled&&(this.ba=this.Xg.setTimeout(this.Sn,this.td),this.vo=pa()))}};e.start=function(){this.enabled=!0;this.ba||(this.ba=this.Xg.setTimeout(this.Sn,this.td),this.vo=pa())};e.stop=function(){this.enabled=!1;this.ba&&(this.Xg.clearTimeout(this.ba),this.ba=null)};
e.S=function(){oe.i.S.call(this);this.stop();delete this.Xg};var pe="tick";function qe(a,b,c){if(ha(a))c&&(a=s(a,c));else if(a&&"function"==typeof a.handleEvent)a=s(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:f.setTimeout(a,b||0)}function re(a){var b=se;return function(){var c=this||f,c=c[te]||(c[te]={}),d=b(ja(a),arguments);return c.hasOwnProperty(d)?c[d]:c[d]=a.apply(this,arguments)}}var te="closure_memoize_cache_";
function se(a,b){for(var c=[a],d=b.length-1;0<=d;--d)c.push(typeof b[d],b[d]);return c.join("\x0B")}
function ue(a,b,c,d){N.call(this);if(a&&!b)throw Error("Can't use invisible history without providing a blank page.");var g;c?g=c:(g="history_state"+ve,document.write(sa(we,g,g)),g=Yc(g));this.Ei=g;c=c?(c=Xc(c))?dd(c):window:window;this.qa=c;this.bl=b;u&&!b&&(this.bl="https"==window.location.protocol?"https:///":'javascript:""');this.ba=new oe(xe);Jd(this,oa(Kd,this.ba));this.Rf=!a;this.Za=new L(this);if(a||ze)d?a=d:(a="history_iframe"+ve,b=this.bl?'src="'+va(this.bl)+'"':"",document.write(sa(Ae,
a,b)),a=Yc(a)),this.cl=a,this.ft=!0;ze&&(this.Za.j(this.qa,"load",this.Hw),this.Zs=this.Zn=!1);this.Rf?Be(this,this.fc(),!0):Ce(this,this.Ei.value);ve++}t(ue,N);ue.prototype.Pb=!1;ue.prototype.Fg=!1;ue.prototype.Cg=null;var De=re(function(){return u?8<=document.documentMode:"onhashchange"in f}),ze=u&&!kb(8);e=ue.prototype;e.Eg=null;e.S=function(){ue.i.S.call(this);this.Za.dispose();this.Bd(!1)};
e.Bd=function(a){if(a!=this.Pb)if(ze&&!this.Zn)this.Zs=a;else if(a)if(Va?this.Za.j(this.qa.document,Ee,this.Vx):Wa&&this.Za.j(this.qa,"pageshow",this.Gx),De()&&this.Rf)this.Za.j(this.qa,"hashchange",this.Vw),this.Pb=!0,this.dispatchEvent(new le(this.fc()));else{if(!u||this.Zn)this.Za.j(this.ba,pe,s(this.zr,this,!0)),this.Pb=!0,ze||(this.Cg=this.fc(),this.dispatchEvent(new le(this.fc()))),this.ba.start()}else this.Pb=!1,this.Za.removeAll(),this.ba.stop()};
e.Hw=function(){this.Zn=!0;this.Ei.value&&Ce(this,this.Ei.value,!0);this.Bd(this.Zs)};e.Gx=function(a){a.ec.persisted&&(this.Bd(!1),this.Bd(!0))};e.Vw=function(){var a=Fe(this.qa);a!=this.Cg&&Ge(this,a)};e.fc=function(){return null!=this.Eg?this.Eg:this.Rf?Fe(this.qa):He(this)||""};e.Tg=function(a,b){Ie(this,a,!1,b)};e.Pg=function(a,b){Ie(this,a,!0,b)};function Fe(a){a=a.location.href;var b=a.indexOf("#");return 0>b?"":a.substring(b+1)}
function Ie(a,b,c,d){a.fc()!=b&&(a.Rf?(Be(a,b,c),De()||u&&Ce(a,b,c,d),a.Pb&&a.zr()):(Ce(a,b,c),a.Eg=a.Cg=a.Ei.value=b,a.dispatchEvent(new le(b))))}function Be(a,b,c){a=a.qa.location;var d=a.href.split("#")[0],g=-1!=a.href.indexOf("#");if(ze||g||b)d+="#"+b;d!=a.href&&(c?a.replace(d):a.href=d)}
function Ce(a,b,c,d){if(a.ft||b!=He(a))if(a.ft=!1,b=encodeURIComponent(String(b)),u){var g=kd(a.cl);g.open("text/html",c?"replace":void 0);g.write(sa(Je,va(d||a.qa.document.title),b));g.close()}else if(b=a.bl+"#"+b,a=a.cl.contentWindow)c?a.location.replace(b):a.location.href=b}
function He(a){if(u)return a=kd(a.cl),a.body?ua(a.body.innerHTML):null;var b=a.cl.contentWindow;if(b){var c;try{c=ua(Fe(b))}catch(d){return a.Fg||(!0!=a.Fg&&a.ba.setInterval(Ke),a.Fg=!0),null}a.Fg&&(!1!=a.Fg&&a.ba.setInterval(xe),a.Fg=!1);return c||null}return null}e.zr=function(){if(this.Rf){var a=Fe(this.qa);a!=this.Cg&&Ge(this,a)}if(!this.Rf||ze)if(a=He(this)||"",null==this.Eg||a==this.Eg)this.Eg=null,a!=this.Cg&&Ge(this,a)};
function Ge(a,b){a.Cg=a.Ei.value=b;a.Rf?(ze&&Ce(a,b),Be(a,b)):Ce(a,b);a.dispatchEvent(new le(a.fc()))}e.Vx=function(){this.ba.stop();this.ba.start()};var Ee=["mousedown","keydown","mousemove"],Je="<title>%s</title><body>%s</body>",Ae='<iframe id="%s" style="display:none" %s></iframe>',we='<input type="text" name="%s" id="%s" style="display:none">',ve=0,xe=150,Ke=1E4;J.controllers={};
function Le(){N.call(this);if(this.hv=Me===Ne){var a=this.Yd=new me;!1!=a.ej&&($d(a.qa,"hashchange",a.Ni,!1,a),a.ej=!1)}else{var a=ed("input"),b=ed("iframe");this.Yd=new ue(!1,null,a,b)}this.Ck=null;K(this.Yd,"navigate",this.hx,!1,this)}t(Le,N);m(Le);Le.prototype.init=function(){this.Yd.Bd(!0)};
function Oe(a,b){var c=fa(a)?a:a.split("/"),d=b.replace("#/","").split("/"),g;if(c.length!==d.length)g=null;else{g={};var h,k=c.length,l=/{(.*?)}/;for(h=0;h<k;h++){var n=c[h],p=d[h];if(l.test(p))p=p.replace(/{|}/g,""),g[p]=n;else if(n!=p){g=null;break}}}return g}Le.prototype.Tg=function(a,b){a=fa(a)?a.join("/"):a;a=a.replace("#","");this.Yd.Tg(a,b)};Le.prototype.Pg=function(a,b){a=fa(a)?a.join("/"):a;a=a.replace("#","");this.Yd.Pg(a,b)};
function Pe(a){a=(a.Ck||a.Yd.fc()).split("/");0<a.length?""===a[0]&&a.shift():a=null;return a}Le.prototype.hx=function(a){a=a.Ed;qa(a,"#/")?a.replace("#/",""):qa(a,"/")&&a.replace("/","");if(this.Ck===a)return!1;a=(this.Ck=a)||this.Yd.fc();var b=Pe(this);console.log("handle token: "+a);this.dispatchEvent({type:J.d.e.G,hz:a,bj:b})};
var Ne="history_api",Qe=window,Me=Qe.history&&Qe.history.pushState?Ne:"hash",Re={mj:"#/home",tp:"#/studio",kp:"#/house",gp:"#/book",Gt:"#/{sectionId}",Py:"#/{sectionId}/{viewId}",rp:"#/book/{tipId}",$l:"#/{sectionId}/{viewId}/{objectId}",My:"#/testtip/{sectionId}/{viewId}/{tipId}"};J.d={};
J.d.e={dm:"load",Tf:"load_complete",Ee:"progress",Gb:"complete",rt:"error",Fc:"update",G:"change",zy:"cancel",He:"start",ip:"end",qp:"play",Ky:"stop",fm:"pause",hj:"add",gm:"remove",Fe:"show",fh:"hide",OPEN:"open",Fd:"close",Ny:"toggle",cb:"animate_in",Da:"animate_out",Sf:"animated_in",ij:"animated_out",Hb:"unlock",Dy:"drag",Ey:"drag_end",pp:"mute",vp:"unmute",jj:"click_compass",Wl:"click_gateway",lp:Xa?"touchstart":"mousedown",mp:Xa?"touchmove":"mousemove",op:Xa?["touchend","touchcancel"]:"mouseup",
np:Xa?"touchstart":"mouseover"};J.tf={};J.tf.Ry={};
function Se(a,b,c,d){N.call(this);this.id=a;this.Vb=b;this.$=c;this.Rr=d.mandatory;this.rf=d["final"];this.Gf=d.reminder;this.pv=d.character;this.name=d.name;this.icon=d.icon;this.prompt=d.prompt;this.Ok=d.advice;this.Hl=d.problem;this.hint=d.hint;this.xa=d.details||{};this.jy=J.ra.assetsPath+"images/share/"+this.id+".jpg";this.by=Re.rp.replace("{tipId}",this.id);this.pa=!0===(!0===JSON.parse(J.aj.get("tip-"+this.id+"-unlocked"))?!0:!1)?!0:d.unlocked;this.rn=this.mk=null}t(Se,N);
function Te(a){return a.mk?Ue(Ve.F(),a.mk,a.Vb,a.$):null}function We(a){return a.rn?Ue(Ve.F(),a.rn,a.Vb,a.$):null}Se.prototype.Fa=function(){(this.pa=this.mk?Te(this).pa:!0)&&this.dispatchEvent({type:J.d.e.Hb,B:this});return this.pa};function Ve(){this.Nb={}}m(Ve);Ve.prototype.init=function(a){C(a,function(a){var c=a.view,d=a.section,g=a.id,h=a.require,k=a.provide;this.Nb[d]=this.Nb[d]||{};this.Nb[d][c]=this.Nb[d][c]||[];a=new Se(g,c,d,a);a.rn=k;a.mk=h;this.Nb[d][c].push(a)},this)};
function Ue(a,b,c,d){a=Xe(a,c,d);return F(a,function(a){return a.id===b})}function Xe(a,b,c,d,g){a=a.Nb[c][b];return a=D(a,function(a){return d&&g?a.Rr&&a.rf:d&&!g?a.Rr:!d&&g?a.rf:!0})}function Ye(a,b){var c=[];z(a.Nb[b],function(a){Tb(c,a)});return c}function Ze(a){var b=[];z(a.Nb,function(a){z(a,function(a){C(a,function(a){b.push(a)})})});return b}function $e(){var a=Ve.F(),a=Ze(a),b,c=a.length;for(b=0;b<c;b++)if(!a[b].pa)return!1;return!0}
function af(a){this.wp=Ve.F();this.Va=Ze(this.wp);ie.call(this,J.u.debug.it,{Dd:a});this.fv=M(".unlock-all",this.domElement)[0];this.k.j(this.fv,"click",this.Cw,!1,this);this.be=M(".tips li",this.domElement);C(this.be,function(a){this.k.j(a,"click",this.Bw,!1,this)},this);C(this.Va,function(a){this.k.j(a,J.d.e.Hb,this.Ef,!1,this)},this)}t(af,ie);
af.prototype.Ef=function(a){a=M(".tips li[data-tip-id="+a.currentTarget.id+"][data-view-id="+a.currentTarget.Vb+"][data-section-id="+a.currentTarget.$+"]",this.domElement)[0];P(a,"unlocked")};
af.prototype.Bw=function(a){C(this.be,function(a){Q(a,"clicked");Q(a,"required")});var b=a.currentTarget.getAttribute("data-tip-id"),c=a.currentTarget.getAttribute("data-view-id"),d=a.currentTarget.getAttribute("data-section-id"),b=Te(Ue(this.wp,b,c,d));P(a.currentTarget,"clicked");b&&(a=M('.tips li[data-tip-id="'+b.id+'"]')[0],P(a,"required"))};af.prototype.Cw=function(){C(this.Va,function(a){a.Fa()},this)};
function bf(){ie.call(this,J.u.debug.At);this.Jc=J.Wa.gh.F();this.ac=M("select",this.domElement)[0];this.km=M(".button.add",this.domElement)[0];this.tn=M(".button.remove",this.domElement)[0];this.ln=M(".button.output",this.domElement)[0];this.lr=M("textarea",this.domElement)[0];this.jg=M(".button.play",this.domElement)[0];this.ph=M(".button.camera",this.domElement)[0];this.sn=M('input[type="range"]',this.domElement)[0];this.gu=M(".button.import",this.domElement)[0];this.Jk=M('input[name="x"]',this.domElement)[0];
this.Kk=M('input[name="y"]',this.domElement)[0];this.Lk=M('input[name="z"]',this.domElement)[0];this.Ak=M('input[name="tipid"]',this.domElement)[0];this.da=this.X=null;this.k.j(this.ac,J.d.e.G,this.hy,!1,this);this.k.j(this.km,"click",this.Y,!1,this);this.k.j(this.tn,"click",this.Y,!1,this);this.k.j(this.ln,"click",this.Y,!1,this);this.k.j(this.jg,"click",this.Y,!1,this);this.k.j(this.ph,"click",this.Y,!1,this);this.k.j(this.sn,J.d.e.G,this.yx,!1,this);this.k.j(this.gu,J.d.e.G,this.Qw,!1,this);this.k.j(this.Jk,
J.d.e.G,this.xl,!1,this);this.k.j(this.Kk,J.d.e.G,this.xl,!1,this);this.k.j(this.Lk,J.d.e.G,this.xl,!1,this);this.k.j(this.Ak,J.d.e.G,this.xl,!1,this);this.k.j(this.Jc,J.d.e.G,this.nx,!1,this);this.k.Ra(this.Jc,J.d.e.Tf,this.Ax,!1,this);this.show()}t(bf,ie);e=bf.prototype;e.hy=function(){this.Jc.dispatchEvent({type:J.d.e.G,Us:this.ac.value})};e.Ax=function(a){C(a.cy,function(a){a=ed("option",{value:a.name},a.name);this.ac.add(a)},this)};
e.Y=function(a){bf.i.Y.call(this,a);switch(a.currentTarget){case this.km:this.Jc.dispatchEvent({type:J.d.e.hj});break;case this.tn:this.Jc.dispatchEvent({type:J.d.e.gm});break;case this.ln:var b={wa:[]};C(this.X.wa,function(a){b.wa.push({x:a.x,y:a.y,z:a.z,tipid:a.et||""})});this.lr.value=JSON.stringify(b,null,"\t");break;case this.jg:Nb(Oc(this.jg),"paused")?(Qc(this.jg,"paused"),this.Jc.dispatchEvent({type:J.d.e.fm})):(Pc(this.jg,"paused"),this.Jc.dispatchEvent({type:J.d.e.qp}));break;case this.ph:Nb(Oc(this.ph),
"fly")?(Qc(this.ph,"fly"),this.Jc.dispatchEvent({type:J.d.e.G,Xk:!0})):(Pc(this.ph,"fly"),this.Jc.dispatchEvent({type:J.d.e.G,Xk:!1}))}};e.xl=function(){var a=this.Ak.value;this.da.set(parseFloat(this.Jk.value),parseFloat(this.Kk.value),parseFloat(this.Lk.value));this.da.et=a;cf(this.X)};e.yx=function(){this.Jc.dispatchEvent({type:J.d.e.Ee,progress:this.sn.value/100})};
e.nx=function(a){if(ea(a.ug)){var b=null==a.ug;this.km.disabled=b;this.tn.disabled=b;this.ln.disabled=b;if(this.da=a.ug)this.Jk.value=this.da.x,this.Kk.value=this.da.y,this.Lk.value=this.da.z,this.Ak.value=this.da.et||"";b=this.da?!1:!0;this.Jk.disabled=b;this.Kk.disabled=b;this.Lk.disabled=b;this.Ak.disabled=b}ea(a.Cl)&&(this.X=a.Cl);r(a.progress)&&(this.sn.value=Math.round(100*a.progress));!0===a.complete&&Qc(this.jg,"paused")};
e.Qw=function(a){a=a.target.files[0];var b=new FileReader;b.onload=s(function(a){a=JSON.parse(a.target.result).controlPoints;a=E(a,function(a){var b=new THREE.Vector3(a.x,a.y,a.z);b.tipid=a.tipid;return b});this.X.create(a)},this);b.readAsText(a)};
function df(){ie.call(this,J.u.debug.jt);this.Yp=M('input[name="fov"]',this.domElement)[0];this.Sq=M('input[name="position-x"]',this.domElement)[0];this.Tq=M('input[name="position-y"]',this.domElement)[0];this.Uq=M('input[name="position-z"]',this.domElement)[0];this.vn=M('input[name="rotation-x"]',this.domElement)[0];this.wn=M('input[name="rotation-y"]',this.domElement)[0];this.xn=M('input[name="rotation-z"]',this.domElement)[0];this.Pp=M(".degrees",this.domElement)[0];this.iq=M(".helpers",this.domElement)[0];
this.ac=M("select",this.domElement)[0];this.lr=M("textarea",this.domElement)[0];this.Hk=M(".visible.button",this.domElement)[0];this.vr=M(".use.button",this.domElement)[0];this.Tm=!1;this.Gq=this.ib=this.Ja=this.W=null;this.k.j(this.ac,J.d.e.G,this.Vo,!1,this);this.k.j(this.Hk,"click",this.Y,!1,this);this.k.j(this.vr,"click",this.Y,!1,this);var a=M('input[type="number"]',this.domElement);C(a,function(a){this.k.j(a,"focus",this.Tw,!1,this);this.k.j(a,"blur",this.kw,!1,this);this.k.j(a,"change",this.Zw,
!1,this)},this);this.k.j(this.iq,"change",this.Ww,!1,this);this.yj=new L(this);this.show()}t(df,ie);e=df.prototype;e.show=function(){df.i.show.call(this);ef(this)};e.J=function(){df.i.J.call(this);ff(this)};e.Vo=function(){this.ib=this.Gq.tc[this.ac.value];this.W=this.ib.pe();gf(this);return this.W};function gf(a){hf(a.Ja,a.W.name).visible?Qc(a.Hk,"invisible"):Pc(a.Hk,"invisible")}
e.Jo=function(a){df.i.Jo.call(this,a);this.Ja=a.Cb;this.Gq=a.Q;z(a.Cb.ri,function(a){this.ds({camera:a})},this);this.yj.j(this.Ja,J.d.e.hj,this.ds,!1,this);this.yj.j(this.Ja,J.d.e.gm,this.zs,!1,this);this.yj.j(this.Ja,J.d.e.G,this.xw,!1,this)};e.Io=function(a){df.i.Io.call(this,a);this.Ja=a.Cb;z(a.Cb.ri,function(a){this.zs({camera:a})},this);this.yj.removeAll()};e.ds=function(a){a=a.camera.name;0<M('option[value="'+a+'"]',this.ac).length||(a=ed("option",{value:a},a),this.ac.add(a),this.Vo())};
e.zs=function(a){a=M('option[value="'+a.camera.name+'"]',this.ac);0>=a.length||this.ac.remove(a[0])};e.xw=function(a){this.ac.value=a.camera.name;this.Vo()};e.Y=function(a){df.i.Y.call(this,a);switch(a.currentTarget){case this.vr:this.Ja.Eb(this.ac.value);break;case this.Hk:a=hf(this.Ja,this.W.name),a.visible=!a.visible,this.iq.checked||(a.visible=!1),gf(this)}};e.Tw=function(){this.Tm=!0};e.kw=function(){this.Tm=!1};
e.Ww=function(a){var b=a.currentTarget.checked;C(this.Ja.Tn,function(a){a.visible=a.visible?b:!1});gf(this)};
e.Zw=function(){this.ib.setFov(parseFloat(this.Yp.value));this.ib.setPosition(parseFloat(this.Sq.value),parseFloat(this.Tq.value),parseFloat(this.Uq.value));var a,b,c;this.Pp.checked?(a=THREE.Math.degToRad(parseFloat(this.vn.value)),b=THREE.Math.degToRad(parseFloat(this.wn.value)),c=THREE.Math.degToRad(parseFloat(this.xn.value))):(a=parseFloat(this.vn.value),b=parseFloat(this.wn.value),c=parseFloat(this.xn.value));this.ib.hb(a,b,c)};
e.Db=function(){if(this.W&&!this.Tm){var a=this.ib.getPosition(),b=jf(this.ib);this.Yp.value=this.W.fov.toFixed(2);this.Sq.value=a.x.toFixed(2);this.Tq.value=a.y.toFixed(2);this.Uq.value=a.z.toFixed(2);var c=(a=this.Pp.checked)?180*b.y/Math.PI:b.y,d=a?180*b.z/Math.PI:b.z;this.vn.value=(a?180*b.x/Math.PI:b.x).toFixed(2);this.wn.value=c.toFixed(2);this.xn.value=d.toFixed(2)}};function kf(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}e=kf.prototype;
e.clone=function(){return new kf(this.top,this.right,this.bottom,this.left)};e.contains=function(a){return this&&a?a instanceof kf?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};e.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
e.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};e.scale=function(a,b){var c=r(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};J.controllers.$g={};
function lf(){N.call(this);this.Bq={};this.ga=new THREE.Scene;this.W=new THREE.OrthographicCamera(0,0,0,0,-1E3,1E3);this.W.rotation.x=-Math.PI/2;this.Pt=new THREE.Box3;this.fe=1;this.L=new THREE.CanvasRenderer;this.L.setClearColor(16711680)}t(lf,N);m(lf);function mf(a,b){var c=a.Bq[b];c||(c=nf(a,b,void 0));return c}
function nf(a,b,c){var d,g,h=a.ga.children.length;for(g=h-1;0<=g;g--)d=a.ga.children[g],a.ga.remove(d);h=c.length;for(g=0;g<h;g++)if(d=c[g],!0===d.data.A||qa(d.name,"floor")){var k=d.nr;k||(k=new THREE.Mesh(d.m.geometry),d.nr=k);k.material=!0===d.data.A?of:pf;k.material.overdraw=8;k.position.copy(d.m.position);k.rotation.copy(d.m.rotation);a.ga.add(k)}d=a.Pt.setFromObject(a.ga);c=d.size();var k=c.x,l=c.z;a.W.left=k/-2;a.W.right=k/2;a.W.top=l/2;a.W.bottom=l/-2;a.W.position.copy(d.center());a.W.updateProjectionMatrix();
a.L.setSize(k*a.fe,l*a.fe);a.L.render(a.ga,a.W);c=d.min.x;g=d.min.z;h=d.max.x;d=d.max.z;for(var k=15*Math.floor(k/15),l=15*Math.floor(l/15),n=k/15,p=l/15,v=[],x=0,A=0,Ta=a.L.domElement.getContext("2d"),wd=window.devicePixelRatio||1,x=0;x<p;++x){for(var hb=[],A=0;A<n;++A){var gb=(15*A+7.5)*wd,Aa=(15*x+7.5)*wd,wb=0;255===Ta.getImageData(gb,Aa,1,1).data[0]&&wb++;255===Ta.getImageData(gb+15,Aa,1,1).data[0]&&wb++;255===Ta.getImageData(gb,Aa+15,1,1).data[0]&&wb++;255===Ta.getImageData(gb+15,Aa+15,1,1).data[0]&&
wb++;hb.push(2<=wb?1:0)}v.push(hb)}c={matrix:v,Di:k,Ai:l,Bi:c,Vy:h,Ci:g,Wy:d,Mf:15,uf:n,vf:p};return a.Bq[b]=c}function qf(a,b){var c=b.Ci,d=b.Mf,g=b.uf,h=b.vf,g=ac(Math.round((a.x-b.Bi)/d),0,g-1),c=ac(Math.round((a.z-c)/d),0,h-1);return[g,c]}
function rf(a,b,c){var d=a.matrix,g=a.Di,h=a.Ai,k=a.Bi,l=a.Ci,n=a.Mf,p=a.uf,v=a.vf;b=qf(b,a);a=qf(c,a);b[0]=Math.min(b[0],p-1);b[1]=Math.min(b[1],v-1);a[0]=Math.min(a[0],p-1);a[1]=Math.min(a[1],v-1);return{matrix:d,Bi:k,Ci:l,Di:g,Ai:h,vf:v,uf:p,Mf:n,my:b,Bv:a}}
function sf(a,b){var c=b.matrix;if(0===b.matrix[a[1]][a[0]])return a;for(var d=Number.MAX_VALUE,g=null,h=0,k=0,l=b.vf,n=b.uf,h=0;h<l;++h)for(k=0;k<n;++k)if(0===c[h][k]){var p=k-a[0],v=h-a[1],p=Math.sqrt(p*p+v*v);p<d&&(d=p,g=[k,h])}return g}
lf.prototype.findPath=function(a,b,c){var d=mf(this,a),g=rf(d,b,c);c=g.matrix;var h=g.Bi,k=g.Ci;a=g.Di;var l=g.Ai,n=g.uf,p=g.vf,v=g.Mf,x=g.my,g=g.Bv;if(g=sf(g,d))console.log("found closest walkable tile: ",g);else return console.log("could not find closest walkable tile around: ",g),null;if(Wb(x,g))return console.log("start tile is the same as end tile: ",x),null;d=new PF.Grid(n,p,c);d=(new PF.AStarFinder({allowDiagonal:!0,heuristic:PF.Heuristic.chebyshev})).findPath(x[0],x[1],g[0],g[1],d);x=E(d,
function(a){return new THREE.Vector3(a[0]*v+v/2+h,0,a[1]*v+v/2+k)});x[0]=b.clone().setY(0);this.dispatchEvent({type:J.d.e.Fc,matrix:c,Di:a,Ai:l,uf:n,vf:p,Mf:v,path:d,ky:this.L.domElement});if(2>x.length)return null;b=new THREE.SplineCurve3(x);c=Math.max(3,Math.floor(b.getLength()/100));return x=b.getSpacedPoints(c)};
function tf(){ie.call(this,J.u.debug.Bt);this.vm=I("canvasContainer",this.domElement);this.Am=1;this.Pe={};this.setColors({wy:"#CCFF99",mv:"#FF6666",stroke:"rgba(0, 0, 0, 0.1)",start:"#00FF00",end:"#33CCFF",path:"rgba(255, 255, 0, 0.6)"});var a=lf.F();K(a,J.d.e.Fc,this.qx,!1,this);this.J()}t(tf,ie);tf.prototype.setColors=function(a){z(a,function(a,c){this.Pe[c]=a},this)};
tf.prototype.update=function(a,b,c,d,g,h,k,l){b=ed("canvas",{width:b*this.Am,height:c*this.Am});c=b.getContext("2d");var n=0,p=0;h*=this.Am;for(n=0;n<g;++n)for(p=0;p<d;++p){var v=p*h,x=n*h,A=0===a[n][p]?this.Pe.wy:this.Pe.mv;c.beginPath();c.rect(v,x,h,h);c.fillStyle=A;c.fill();c.lineWidth=1;c.strokeStyle=this.Pe.stroke;c.stroke()}d=k.length;for(a=0;a<d;++a)v=k[a][0]*h,x=k[a][1]*h,A=this.Pe.path,0===a?A=this.Pe.start:a===d-1&&(A=this.Pe.end),c.beginPath(),c.rect(v,x,h,h),c.fillStyle=A,c.fill();for(k=
this.vm;a=k.firstChild;)k.removeChild(a);this.vm.appendChild(b);this.vm.appendChild(l)};tf.prototype.qx=function(a){this.update(a.matrix,a.Di,a.Ai,a.uf,a.vf,a.Mf,a.path,a.ky)};function uf(){N.call(this);this.domElement=Yc("debugger");this.mh=M("ul",this.domElement)[0];this.oc=M(".button.display",this.domElement)[0];this.k=new L(this);this.k.j(this.oc,"click",this.Y,!1,this);vf&&new df;wf&&new ke;xf&&new tf;yf&&new bf;zf(J.C.I.em,this.init,this);this.J()}t(uf,N);m(uf);
uf.prototype.init=function(a){a=a["fengshui-data"].tips;Af&&new af(a)};uf.prototype.show=function(){Qc(this.oc,"invisible");O(this.mh,!0)};uf.prototype.J=function(){Pc(this.oc,"invisible");O(this.mh,!1)};uf.prototype.Y=function(a){switch(a.currentTarget){case this.oc:Nb(Oc(this.oc),"invisible")?this.show():this.J()}};var vf=!0,wf=!0,xf=!0,Af=!0,yf=!1;function Bf(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}e=Bf.prototype;
e.clone=function(){return new Bf(this.left,this.top,this.width,this.height)};e.contains=function(a){return a instanceof Bf?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Df(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}
e.distance=function(a){return Math.sqrt(Df(this,a))};e.qb=function(){return new H(this.left+this.width/2,this.top+this.height/2)};e.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};e.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
e.scale=function(a,b){var c=r(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function Ef(){return w?"Webkit":Wa?"Moz":u?"ms":Va?"O":null}function Ff(a,b){if(b&&a in b)return a;var c=Ef();return c?(c=c.toLowerCase(),c+=Ha(a),!ea(b)||c in b?c:null):null}function R(a,b,c){q(b)?Gf(a,c,b):z(b,oa(Gf,a))}function Gf(a,b,c){var d;a:if(d=Ga(c),void 0===a.style[d]&&(c=Ef()+Ha(c),void 0!==a.style[c])){d=c;break a}d&&(a.style[d]=b)}
function Hf(a,b){var c=Xc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function If(a,b){return Hf(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Jf(a,b,c){var d,g=Wa&&(Na||$a)&&y("1.9");b instanceof H?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Kf(d,g);a.style.top=Kf(b,g)}
function Lf(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}u&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Mf(a){if(u&&!kb(8))return a.offsetParent;var b=Xc(a),c=If(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=If(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Nf(a){var b,c=Xc(a),d=If(a,"position"),g=Wa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new H(0,0),k;b=c?Xc(c):document;(k=!u)||(k=kb(9))||(k="CSS1Compat"==Vc(b).Qa.compatMode);k=k?b.documentElement:b.body;if(a==k)return h;if(a.getBoundingClientRect)b=Lf(a),a=ld(Vc(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!g)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;
else{g=a;do{h.x+=g.offsetLeft;h.y+=g.offsetTop;g!=a&&(h.x+=g.clientLeft||0,h.y+=g.clientTop||0);if(w&&"fixed"==If(g,"position")){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}g=g.offsetParent}while(g&&g!=a);if(Va||w&&"absolute"==d)h.y-=c.body.offsetTop;for(g=a;(g=Mf(g))&&g!=c.body&&g!=k;)h.x-=g.scrollLeft,Va&&"TR"==g.tagName||(h.y-=g.scrollTop)}return h}
function Of(a,b,c){if(b instanceof Sc)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=Kf(b,!0);a.style.height=Kf(c,!0)}function Kf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Pf(a){var b=Qf;if("none"!=If(a,"display"))return b(a);var c=a.style,d=c.display,g=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=g;return a}
function Qf(a){var b=a.offsetWidth,c=a.offsetHeight,d=w&&!b&&!c;return ea(b)&&!d||!a.getBoundingClientRect?new Sc(b,c):(a=Lf(a),new Sc(a.right-a.left,a.bottom-a.top))}function Rf(){var a=document.body.style;"opacity"in a?a.opacity=0.1:"MozOpacity"in a?a.MozOpacity=0.1:"filter"in a&&(a.filter=0.1===""?"":"alpha(opacity=10)")}function O(a,b){a.style.display=b?"":"none"}function Sf(a){return"rtl"==If(a,"direction")}var Tf={thin:2,medium:4,thick:6};
function Uf(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null,d;if(c in Tf)d=Tf[c];else if(/^\d+px?$/.test(c))d=parseInt(c,10);else{d=a.style.left;var g=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;c=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=g;d=c}return d}
function Vf(a){if(u&&!kb(9)){var b=Uf(a,"borderLeft"),c=Uf(a,"borderRight"),d=Uf(a,"borderTop");a=Uf(a,"borderBottom");return new kf(d,c,a,b)}b=Hf(a,"borderLeftWidth");c=Hf(a,"borderRightWidth");d=Hf(a,"borderTopWidth");a=Hf(a,"borderBottomWidth");return new kf(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Wf=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;J.v={};J.v.Utils={};
J.v.Utils.Ev=function(){window.console={};for(var a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp trace warn".split(" "),b=0;b<a.length;b++)console[a[b]]=function(){}};J.v.Utils.Xs=function(a,b,c){a=a.split(/\./);2>a.length?c[a[0]]=b:(c[a[0]]||(c[a[0]]={}),c=c[a.shift()],J.v.Utils.Xs(a.join("."),b,c))};J.v.Utils.Ws=function(a,b){R(b||document.body,"cursor",a)};J.v.Utils.Zk=function(a){return Hc().get(a)};
J.v.Utils.Kr=function(a,b){var c=Hc();return q(b)?c.get(a)===b:c.Kr(a)};J.v.Utils.Un=function(a){var b=J.ka,c=b.width&&b.height?b:null;c||(c=Pf(b));var d=Pf(a),b=Math.round((c.width-d.width)/2),c=Math.round((c.height-d.height)/2);Jf(a,b,c)};J.v.Utils.je=function(a,b){var c={};C(a,function(a){c[a.getAttribute(b)]=a});return c};
J.v.Utils.Fl=function(a){var b,c,d=-1!=a.indexOf("twitter"),g=-1!=a.indexOf("google");-1!=a.indexOf("facebook")?(b=640,c=275):d?(b=575,c=275):g&&(b=640,c=470);d=cd(window);c={width:b,height:c,left:(window.screenLeft||window.screenX)+(d.width-b)/2,top:(window.screenTop||window.screenY)+(d.height-c)/2,toolbar:!1,scrollbars:!0,statusbar:!1,menubar:!1,resizable:!0};d=window;b="undefined"!=typeof a.href?a.href:String(a);a=c.target||a.target;var g=[],h;for(h in c)switch(h){case "width":case "height":case "top":case "left":g.push(h+
"="+c[h]);break;case "target":case "noreferrer":break;default:g.push(h+"="+(c[h]?1:0))}h=g.join(",");if(c.noreferrer){if(h=d.open("",a,h))u&&-1!=b.indexOf(";")&&(b="'"+b.replace(/'/g,"%27")+"'"),h.opener=null,b=va(b),h.document.write('<META HTTP-EQUIV="refresh" content="0; url='+b+'">'),h.document.close()}else d.open(b,a,h)};var Xf=J.v.Utils,Yf;try{var Zf=document.createElement("canvas");Yf=!!window.WebGLRenderingContext&&Zf.getContext("webgl")}catch($f){Yf=!1}Xf.ny=Yf;
function T(){this.wj={global:{"fengshui-data":"json/fengshui.json","loader-small-black":"images/loader-small-black.gif","scene-studio":"images/scene-studio.jpg","scene-house":"images/scene-house.jpg","circular-fill":"images/circular-fill.png",book:"images/book.png","cube-browse":"images/cube-browse.png","cube-design":"images/cube-design.png",leaf:{"green-1":"images/texture/leaf/ji.png","green-2":"images/texture/leaf/yin.png","yellow-1":"images/texture/leaf/sha.png","yellow-2":"images/texture/leaf/yang.png"}},
home:{},studio:{global:{character:{"ollie-data":"json/character/ollie.json",ollie:"images/character/ollie.png","ollie-open":"images/character/ollie-open.png"}},livingroom:{"scene-data":"json/scene/studio-livingroom.json","floor-texture":"images/texture/studio/livingroom/floor.jpg","wall-texture":"images/texture/studio/livingroom/wall.jpg","wall-outer-texture":"images/texture/studio/livingroom/wall-outer.jpg","ceiling-texture":"images/texture/studio/livingroom/ceiling.jpg","ceiling-lamp-1-texture":"images/texture/studio/livingroom/ceiling-lamp-1.jpg",
"ceiling-lamp-2-texture":"images/texture/studio/livingroom/ceiling-lamp-2.jpg","studio-door-texture":"images/texture/studio/livingroom/studio-door.jpg","studio-door-handle-texture":"images/texture/studio/livingroom/studio-door-handle.jpg","studio-door-frame-texture":"images/texture/studio/livingroom/studio-door-frame.jpg","cactus-texture":"images/texture/studio/livingroom/cactus.jpg","bathroom-door-texture":"images/texture/studio/livingroom/bathroom-door.jpg","bed-texture":"images/texture/studio/livingroom/bed.jpg",
"shoestorage-texture":"images/texture/studio/livingroom/shoestorage.jpg","sofabed-cabinet-texture":"images/texture/studio/livingroom/sofabed-cabinet.jpg","kitchen-cabinets-texture":"images/texture/studio/livingroom/kitchen-cabinets.jpg","kitchen-storage-texture":"images/texture/studio/livingroom/kitchen-storage.jpg","microwave-texture":"images/texture/studio/livingroom/microwave.jpg","fruitplate-texture":"images/texture/studio/livingroom/fruitplate.jpg","glamour-photo-texture":"images/texture/studio/livingroom/glamour-photo.jpg",
"dining-table-texture":"images/texture/studio/livingroom/dining-table.jpg","dining-chair-texture":"images/texture/studio/livingroom/dining-chair.jpg","window-books-texture":"images/texture/studio/livingroom/window-books.jpg","clock-texture":"images/texture/studio/livingroom/clock.jpg","seasoning-texture":"images/texture/studio/livingroom/seasoning.jpg","bed-shelf-texture":"images/texture/studio/livingroom/bed-shelf.jpg","kitchen-ware-texture":"images/texture/studio/livingroom/kitchen-ware.jpg","linen-cabinet-texture":"images/texture/studio/livingroom/linen-cabinet.jpg",
"tv-texture":"images/texture/studio/livingroom/tv.jpg","tv-table-texture":"images/texture/studio/livingroom/tv-table.jpg","sofa-texture":"images/texture/studio/livingroom/sofa.jpg","sofabed-texture":"images/texture/studio/livingroom/sofabed.jpg","book-shelf-texture":"images/texture/studio/livingroom/book-shelf.jpg","nightstand-texture":"images/texture/studio/livingroom/nightstand.jpg","kitchen-shelf-texture":"images/texture/studio/livingroom/kitchen-shelf.jpg","sewingmachine-texture":"images/texture/studio/livingroom/sewingmachine.jpg",
"sewingmachine-cover-texture":"images/texture/studio/livingroom/sewingmachine-cover.jpg","coffee-pot-texture":"images/texture/studio/livingroom/coffee-pot.jpg","hood-texture":"images/texture/studio/livingroom/hood.jpg","round-lamp-texture":"images/texture/studio/livingroom/round-lamp.jpg","reading-lamp-texture":"images/texture/studio/livingroom/reading-lamp.jpg","boxes-texture":"images/texture/studio/livingroom/boxes.jpg","wardrobe-texture":"images/texture/studio/livingroom/wardrobe.jpg","pictures-texture":"images/texture/studio/livingroom/pictures.jpg",
"refrigerator-texture":"images/texture/studio/livingroom/refrigerator.jpg","refrigerator-stuff-texture":"images/texture/studio/livingroom/refrigerator-stuff.jpg","refrigerator-door-texture":"images/texture/studio/livingroom/refrigerator-door.jpg","carpet-texture":"images/texture/studio/livingroom/carpet.jpg","laptop-texture":"images/texture/studio/livingroom/laptop.jpg","apple-in-refrigerator-texture":"images/texture/studio/livingroom/apple-in-refrigerator.jpg","pineapple-in-refrigerator-texture":"images/texture/studio/livingroom/pineapple-in-refrigerator.jpg",
"orange-in-refrigerator-texture":"images/texture/studio/livingroom/orange-in-refrigerator.jpg","peach-in-refrigerator-texture":"images/texture/studio/livingroom/peach-in-refrigerator.jpg","apple-in-plate-texture":"images/texture/studio/livingroom/apple-in-plate.jpg","pineapple-in-plate-texture":"images/texture/studio/livingroom/pineapple-in-plate.jpg","orange-in-plate-texture":"images/texture/studio/livingroom/orange-in-plate.jpg","peach-in-plate-texture":"images/texture/studio/livingroom/peach-in-plate.jpg",
"window-left-texture":"images/texture/studio/livingroom/window-left.jpg","window-left-switch-texture":"images/texture/studio/livingroom/window-left-switch.jpg","window-right-texture":"images/texture/studio/livingroom/window-right.jpg","window-right-switch-texture":"images/texture/studio/livingroom/window-right-switch.jpg",pictures:{birds:"images/texture/studio/livingroom/pictures/birds.jpg",fish:"images/texture/studio/livingroom/pictures/fish.jpg",leaves:"images/texture/studio/livingroom/pictures/leaves.jpg"},
skybox:{xpos:"images/texture/studio/livingroom/skybox/pos-x.png",xneg:"images/texture/studio/livingroom/skybox/neg-x.png",ypos:"images/texture/studio/livingroom/skybox/pos-y.png",yneg:"images/texture/studio/livingroom/skybox/neg-y.png",zpos:"images/texture/studio/livingroom/skybox/pos-z.png",zneg:"images/texture/studio/livingroom/skybox/neg-z.png"}},bathroom:{"scene-data":"json/scene/studio-bathroom.json","floor-texture":"images/texture/studio/bathroom/floor.jpg","ceiling-texture":"images/texture/studio/bathroom/ceiling.jpg",
"wall-texture":"images/texture/studio/bathroom/wall.jpg","wall-outer-texture":"images/texture/studio/bathroom/wall-outer.jpg","bathroom-door-texture":"images/texture/studio/bathroom/bathroom-door.jpg","door-frame-texture":"images/texture/studio/bathroom/door-frame.jpg","ceiling-lamps-texture":"images/texture/studio/bathroom/ceiling-lamps.jpg","bathrobe-texture":"images/texture/studio/bathroom/bathrobe.jpg","bathtub-texture":"images/texture/studio/bathroom/bathtub.jpg","shower-curtain-texture":"images/texture/studio/bathroom/shower-curtain.jpg",
"lotus-texture":"images/texture/studio/bathroom/lotus.jpg","towel-texture":"images/texture/studio/bathroom/towel.jpg","showerhead-texture":"images/texture/studio/bathroom/showerhead.jpg","shower-handle-texture":"images/texture/studio/bathroom/shower-handle.jpg","shelf-texture":"images/texture/studio/bathroom/shelf.jpg","jar-1-texture":"images/texture/studio/bathroom/jar-1.jpg","jar-2-texture":"images/texture/studio/bathroom/jar-2.jpg","jar-3-texture":"images/texture/studio/bathroom/jar-3.jpg","jar-4-texture":"images/texture/studio/bathroom/jar-4.jpg",
"jar-5-texture":"images/texture/studio/bathroom/jar-5.jpg","jar-6-texture":"images/texture/studio/bathroom/jar-6.jpg","jar-7-texture":"images/texture/studio/bathroom/jar-7.jpg","jar-8-texture":"images/texture/studio/bathroom/jar-8.jpg","jar-9-texture":"images/texture/studio/bathroom/jar-9.jpg","jar-10-texture":"images/texture/studio/bathroom/jar-10.jpg","closet-texture":"images/texture/studio/bathroom/closet.jpg","closet-door-texture":"images/texture/studio/bathroom/closet-door.jpg","trashcan-texture":"images/texture/studio/bathroom/trashcan.jpg",
"plug-texture":"images/texture/studio/bathroom/plug.jpg","fragrance-texture":"images/texture/studio/bathroom/fragrance.jpg","carpets-texture":"images/texture/studio/bathroom/carpets.jpg","toilet-texture":"images/texture/studio/bathroom/toilet.jpg","toilet-paper-texture":"images/texture/studio/bathroom/toilet-paper.jpg","washbasin-texture":"images/texture/studio/bathroom/washbasin.jpg","lamps-texture":"images/texture/studio/bathroom/lamps.jpg","flipflop-texture":"images/texture/studio/bathroom/flipflop.jpg",
"bottles-texture":"images/texture/studio/bathroom/bottles.jpg","towel-roll-texture":"images/texture/studio/bathroom/towel-roll.jpg","cosmetic-bag-texture":"images/texture/studio/bathroom/cosmetic-bag.jpg",skybox:{xpos:"images/texture/studio/livingroom/skybox/pos-x.png",xneg:"images/texture/studio/livingroom/skybox/neg-x.png",ypos:"images/texture/studio/livingroom/skybox/pos-y.png",yneg:"images/texture/studio/livingroom/skybox/neg-y.png",zpos:"images/texture/studio/livingroom/skybox/pos-z.png",zneg:"images/texture/studio/livingroom/skybox/neg-z.png"}}},
house:{global:{character:{"joanna-data":"json/character/joanna.json",joanna:"images/character/joanna.png","scott-data":"json/character/scott.json",scott:"images/character/scott.png","nick-data":"json/character/nick.json",nick:"images/character/nick.png","joanna-open":"images/character/joanna-open.png","scott-open":"images/character/scott-open.png","nick-open":"images/character/nick-open.png","family-open":"images/character/family-open.png"}},livingroom:{"scene-data":"json/scene/house-livingroom.json",
"wall-texture":"images/texture/house/livingroom/wall.jpg","wall-outer-texture":"images/texture/house/livingroom/wall-outer.jpg","stairways-texture":"images/texture/house/livingroom/stairways.jpg","stairways-handrail-texture":"images/texture/house/livingroom/stairways-handrail.jpg","stairway-lamps-texture":"images/texture/house/livingroom/stairway-lamps.jpg","ceiling-texture":"images/texture/house/livingroom/ceiling.jpg","ceiling-lamp-1-texture":"images/texture/house/livingroom/ceiling-lamp-1.jpg",
"ceiling-lamp-2-texture":"images/texture/house/livingroom/ceiling-lamp-2.jpg","floor-texture":"images/texture/house/livingroom/floor.jpg","door-frame-texture":"images/texture/house/livingroom/door-frame.jpg","livingroom-door-texture":"images/texture/house/livingroom/livingroom-door.jpg","windows-texture":"images/texture/house/livingroom/windows.jpg","knife-on-cabinet-texture":"images/texture/house/livingroom/knife-on-cabinet.jpg","knife-in-drawer-texture":"images/texture/house/livingroom/knife-in-drawer.jpg",
"kitchen-top-texture":"images/texture/house/livingroom/kitchen-top.jpg","kitchen-bottom-texture":"images/texture/house/livingroom/kitchen-bottom.jpg","kitchen-stuff-texture":"images/texture/house/livingroom/kitchen-stuff.jpg","long-table-texture":"images/texture/house/livingroom/long-table.jpg","round-table-texture":"images/texture/house/livingroom/round-table.jpg","clock-texture":"images/texture/house/livingroom/clock.jpg","bookshelf-texture":"images/texture/house/livingroom/bookshelf.jpg","bookshelf-lamps-texture":"images/texture/house/livingroom/bookshelf-lamps.jpg",
"window-stand-texture":"images/texture/house/livingroom/window-stand.jpg","basin-texture":"images/texture/house/livingroom/basin.jpg","cooktop-texture":"images/texture/house/livingroom/cooktop.jpg","ladder-texture":"images/texture/house/livingroom/ladder.jpg","white-sofa-texture":"images/texture/house/livingroom/white-sofa.jpg","window-blinds-texture":"images/texture/house/livingroom/window-blinds.jpg","tv-stand-texture":"images/texture/house/livingroom/tv-stand.jpg","entrance-stuff-texture":"images/texture/house/livingroom/entrance-stuff.jpg",
"blue-sofa-texture":"images/texture/house/livingroom/blue-sofa.jpg","pads-texture":"images/texture/house/livingroom/pads.jpg","dining-table-texture":"images/texture/house/livingroom/dining-table.jpg","dining-chairs-texture":"images/texture/house/livingroom/dining-chairs.jpg","dining-lamps-texture":"images/texture/house/livingroom/dining-lamps.jpg","divider-texture":"images/texture/house/livingroom/divider.jpg","curtain-left-texture":"images/texture/house/livingroom/curtain-left.jpg","curtain-right-texture":"images/texture/house/livingroom/curtain-right.jpg",
"fruitplate-texture":"images/texture/house/livingroom/fruitplate.jpg","refrigerator-texture":"images/texture/house/livingroom/refrigerator.jpg","living-area-lamp-texture":"images/texture/house/livingroom/living-area-lamp.jpg","living-area-carpet-texture":"images/texture/house/livingroom/living-area-carpet.jpg","cupboard-texture":"images/texture/house/livingroom/cupboard.jpg","heater-texture":"images/texture/house/livingroom/heater.jpg","drawer-texture":"images/texture/house/livingroom/drawer.jpg",
"windowsill-stuff-texture":"images/texture/house/livingroom/windowsill-stuff.jpg","goldfish-texture":"images/texture/house/livingroom/goldfish.jpg","fish-bowl-texture":"images/texture/house/livingroom/fish-bowl.jpg","fish-bowl-stand-texture":"images/texture/house/livingroom/fish-bowl-stand.jpg",skybox:{xpos:"images/texture/house/boysroom/skybox/pos-x.jpg",xneg:"images/texture/house/boysroom/skybox/neg-x.jpg",ypos:"images/texture/house/boysroom/skybox/pos-y.jpg",yneg:"images/texture/house/boysroom/skybox/neg-y.jpg",
zpos:"images/texture/house/boysroom/skybox/pos-z.jpg",zneg:"images/texture/house/boysroom/skybox/neg-z.jpg"}},corridor:{"scene-data":"json/scene/house-corridor.json","ceiling-texture":"images/texture/house/corridor/ceiling.jpg","ceiling-lamp-texture":"images/texture/house/corridor/ceiling-lamp.jpg","ceiling-lamps-texture":"images/texture/house/corridor/ceiling-lamps.jpg","floor-texture":"images/texture/house/corridor/floor.jpg","wall-texture":"images/texture/house/corridor/wall.jpg","wall-outer-texture":"images/texture/house/corridor/wall-outer.jpg",
"picture-wall-texture":"images/texture/house/corridor/picture-wall.jpg","door-frames-texture":"images/texture/house/corridor/door-frames.jpg","display-table-texture":"images/texture/house/corridor/display-table.jpg","cat-bed-texture":"images/texture/house/corridor/cat-bed.jpg","cat-texture":"images/texture/house/corridor/cat.jpg","corridor-window-texture":"images/texture/house/corridor/corridor-window.jpg","corridor-stuff-texture":"images/texture/house/corridor/corridor-stuff.jpg","nick-photo-texture":"images/texture/house/corridor/nick-photo.jpg",
"window-plant-texture":"images/texture/house/corridor/window-plant.jpg","homeoffice-door-texture":"images/texture/house/corridor/homeoffice-door.jpg","bedroom-door-texture":"images/texture/house/corridor/bedroom-door.png","boysroom-door-texture":"images/texture/house/corridor/boysroom-door.jpg","bathroom-door-texture":"images/texture/house/corridor/bathroom-door.png",skybox:{xpos:"images/texture/house/boysroom/skybox/pos-x.jpg",xneg:"images/texture/house/boysroom/skybox/neg-x.jpg",ypos:"images/texture/house/boysroom/skybox/pos-y.jpg",
yneg:"images/texture/house/boysroom/skybox/neg-y.jpg",zpos:"images/texture/house/boysroom/skybox/pos-z.jpg",zneg:"images/texture/house/boysroom/skybox/neg-z.jpg"}},boysroom:{"scene-data":"json/scene/house-boysroom.json","floor-texture":"images/texture/house/boysroom/floor.jpg","ceiling-texture":"images/texture/house/boysroom/ceiling.jpg","wall-texture":"images/texture/house/boysroom/wall.jpg","wall-outer-texture":"images/texture/house/boysroom/wall-outer.jpg","cabinet-texture":"images/texture/house/boysroom/cabinet.jpg",
"bed-texture":"images/texture/house/boysroom/bed.jpg","big-frame-texture":"images/texture/house/boysroom/big-frame.jpg","big-frame-picture-texture":"images/texture/house/boysroom/pictures/shark.jpg","decoration-pictures-texture":"images/texture/house/boysroom/decoration-pictures.jpg","ceiling-lamps-texture":"images/texture/house/boysroom/ceiling-lamps.jpg","stools-texture":"images/texture/house/boysroom/stools.jpg","football-texture":"images/texture/house/boysroom/football.jpg","bear-in-drawer-texture":"images/texture/house/boysroom/bear-in-drawer.jpg",
"bear-on-bed-texture":"images/texture/house/boysroom/bear-on-bed.jpg","moon-texture":"images/texture/house/boysroom/moon.jpg","carpet-texture":"images/texture/house/boysroom/carpet.jpg","shelf-stuff-1-texture":"images/texture/house/boysroom/shelf-stuff-1.jpg","shelf-stuff-2-texture":"images/texture/house/boysroom/shelf-stuff-2.jpg","shelf-stuff-3-texture":"images/texture/house/boysroom/shelf-stuff-3.jpg","shelf-stuff-4-texture":"images/texture/house/boysroom/shelf-stuff-4.jpg","shelf-stuff-5-texture":"images/texture/house/boysroom/shelf-stuff-5.jpg",
"shelf-stuff-6-texture":"images/texture/house/boysroom/shelf-stuff-6.jpg","toytrain-texture":"images/texture/house/boysroom/toytrain.jpg","sketchpad-texture":"images/texture/house/boysroom/sketchpad.jpg","nightstand-lamp-texture":"images/texture/house/boysroom/nightstand-lamp.jpg","yellow-reading-lamp-texture":"images/texture/house/boysroom/yellow-reading-lamp.jpg","blue-reading-lamp-texture":"images/texture/house/boysroom/blue-reading-lamp.jpg","bedding-texture":"images/texture/house/boysroom/bedding.jpg",
"chalkboard-texture":"images/texture/house/boysroom/chalkboard.jpg","slippers-texture":"images/texture/house/boysroom/slippers.jpg","table-books-texture":"images/texture/house/boysroom/table-books.jpg","computer-on-table-texture":"images/texture/house/boysroom/computer-on-table.jpg","computer-on-desk-texture":"images/texture/house/boysroom/computer-on-desk.jpg","table-texture":"images/texture/house/boysroom/table.jpg","table-stuff-texture":"images/texture/house/boysroom/table-stuff.jpg","desk-texture":"images/texture/house/boysroom/desk.jpg",
"swivel-chair-texture":"images/texture/house/boysroom/swivel-chair.jpg","shelf-left-texture":"images/texture/house/boysroom/shelf-left.jpg","shelf-right-texture":"images/texture/house/boysroom/shelf-right.jpg","pencil-vase-texture":"images/texture/house/boysroom/pencil-vase.jpg","nightstand-texture":"images/texture/house/boysroom/nightstand.jpg","drawer-texture":"images/texture/house/boysroom/drawer.jpg","handheld-nightstand-texture":"images/texture/house/boysroom/handheld-nightstand.jpg","window-texture":"images/texture/house/boysroom/window.jpg",
"window-frame-texture":"images/texture/house/boysroom/window-frame.jpg","boysroom-door-texture":"images/texture/house/boysroom/boysroom-door.jpg","door-frame-texture":"images/texture/house/boysroom/door-frame.jpg",pictures:{family:"images/texture/house/boysroom/pictures/1.jpg",hug:"images/texture/house/boysroom/pictures/2.jpg"},skybox:{xpos:"images/texture/house/boysroom/skybox/pos-x.jpg",xneg:"images/texture/house/boysroom/skybox/neg-x.jpg",ypos:"images/texture/house/boysroom/skybox/pos-y.jpg",yneg:"images/texture/house/boysroom/skybox/neg-y.jpg",
zpos:"images/texture/house/boysroom/skybox/pos-z.jpg",zneg:"images/texture/house/boysroom/skybox/neg-z.jpg"}},homeoffice:{"scene-data":"json/scene/house-homeoffice.json","floor-texture":"images/texture/house/homeoffice/floor.jpg","ceiling-texture":"images/texture/house/homeoffice/ceiling.jpg","wall-texture":"images/texture/house/homeoffice/wall.jpg","wall-outer-texture":"images/texture/house/homeoffice/wall-outer.jpg","swivel-chair-texture":"images/texture/house/homeoffice/swivel-chair.jpg","storage-texture":"images/texture/house/homeoffice/storage.jpg",
"setsquare-texture":"images/texture/house/homeoffice/setsquare.jpg","carpet-texture":"images/texture/house/homeoffice/carpet.jpg","door-frame-texture":"images/texture/house/homeoffice/door-frame.jpg","homeoffice-door-texture":"images/texture/house/homeoffice/homeoffice-door.jpg","display-shelf-lamp-texture":"images/texture/house/homeoffice/display-shelf-lamp.jpg","bookshelf-lamps-texture":"images/texture/house/homeoffice/bookshelf-lamps.jpg","picture-frame-1-texture":"images/texture/house/homeoffice/picture-frame-1.jpg",
"picture-frame-2-texture":"images/texture/house/homeoffice/picture-frame-2.jpg","picture-frame-3-texture":"images/texture/house/homeoffice/picture-frame-3.jpg","picture-frame-4-texture":"images/texture/house/homeoffice/picture-frame-4.jpg","block-shelf-1-texture":"images/texture/house/homeoffice/block-shelf-1.jpg","block-shelf-2-texture":"images/texture/house/homeoffice/block-shelf-2.jpg","block-stuff-1-texture":"images/texture/house/homeoffice/block-stuff-1.jpg","block-stuff-2-texture":"images/texture/house/homeoffice/block-stuff-2.jpg",
"books-1-texture":"images/texture/house/homeoffice/books-1.jpg","books-2-texture":"images/texture/house/homeoffice/books-2.jpg","round-lamp-texture":"images/texture/house/homeoffice/round-lamp.jpg","calendar-texture":"images/texture/house/homeoffice/calendar.jpg","magazine-texture":"images/texture/house/homeoffice/magazine.jpg","window-texture":"images/texture/house/homeoffice/window.jpg","armchair-texture":"images/texture/house/homeoffice/armchair.jpg","coffeecup-texture":"images/texture/house/homeoffice/coffeecup.jpg",
"writing-desk-texture":"images/texture/house/homeoffice/writing-desk.jpg","dracaena-fragrans-texture":"images/texture/house/homeoffice/dracaena-fragrans.jpg","handbag-texture":"images/texture/house/homeoffice/handbag.jpg","pen-vase-texture":"images/texture/house/homeoffice/pen-vase.jpg","rubberplant-texture":"images/texture/house/homeoffice/rubberplant.jpg","coffee-table-texture":"images/texture/house/homeoffice/coffee-table.jpg","floor-lamp-texture":"images/texture/house/homeoffice/floor-lamp.jpg",
"ceiling-lamp-texture":"images/texture/house/homeoffice/ceiling-lamp.jpg","cup-texture":"images/texture/house/homeoffice/cup.jpg","reading-lamp-1-texture":"images/texture/house/homeoffice/reading-lamp-1.jpg","reading-lamp-2-texture":"images/texture/house/homeoffice/reading-lamp-2.jpg","sofa-texture":"images/texture/house/homeoffice/sofa.jpg","trash-texture":"images/texture/house/homeoffice/trash.jpg","display-shelf-texture":"images/texture/house/homeoffice/display-shelf.jpg","computer-texture":"images/texture/house/homeoffice/computer.jpg",
"laptop-texture":"images/texture/house/homeoffice/laptop.jpg","curtain-texture":"images/texture/house/homeoffice/curtain.jpg","curtain-rod-texture":"images/texture/house/homeoffice/curtain-rod.jpg","telephone-texture":"images/texture/house/homeoffice/telephone.jpg","bookshelf-texture":"images/texture/house/homeoffice/bookshelf.jpg","bookshelf-stuff-texture":"images/texture/house/homeoffice/bookshelf-stuff.jpg",pictures:{1:"images/texture/house/homeoffice/pictures/1.jpg",2:"images/texture/house/homeoffice/pictures/2.jpg",
3:"images/texture/house/homeoffice/pictures/3.jpg",4:"images/texture/house/homeoffice/pictures/4.jpg",degree:"images/texture/house/homeoffice/pictures/degree.jpg",hug:"images/texture/house/homeoffice/pictures/hug.jpg",family:"images/texture/house/homeoffice/pictures/family.jpg",lecture:"images/texture/house/homeoffice/pictures/lecture.jpg"},skybox:{xpos:"images/texture/house/boysroom/skybox/pos-x.jpg",xneg:"images/texture/house/boysroom/skybox/neg-x.jpg",ypos:"images/texture/house/boysroom/skybox/pos-y.jpg",
yneg:"images/texture/house/boysroom/skybox/neg-y.jpg",zpos:"images/texture/house/boysroom/skybox/pos-z.jpg",zneg:"images/texture/house/boysroom/skybox/neg-z.jpg"}}}}}m(T);function ag(a,b){var c=a.wj;b=b.split(".");C(b,function(a){c=c[a]});return c}function bg(a,b){function c(a,b){z(b,function(b,g){q(b)?h.push(d({id:a+"."+g,src:b})):c(a+"."+g,b)})}function d(a){ra(a.src,".dds")&&(a.type=createjs.LoadQueue.yy);return a}var g=ag(a,b),h=[];q(g)?h.push(d({id:b,src:g})):c(b,g);return h}
function U(a,b){var c=ag(a,b);return q(c)?null:c}function cg(a,b){N.call(this);this.ql=T.F();this.re=!1;this.Re=a;this.Ka=new createjs.LoadQueue(!0,J.ra.assetsPath);createjs.LoadQueue.loadTimeout=1E5;s(this.onLoadStart,this);this.Eu=s(this.Rw,this);this.Au=s(this.zf,this);this.Du=s(this.onError,this);this.xk=new oe(1E3/30);K(this.xk,pe,this.Kx,!1,this);this.Vh=this.Hn=0;this.Pd=b||1E3;this.Xt=this.Pd/(this.Pd/(1E3/30))}t(cg,N);e=cg.prototype;
e.load=function(a){this.re=!1;this.Ka.removeAllEventListeners();this.Ka.addEventListener("fileload",this.Eu);this.Ka.addEventListener("complete",this.Au);this.Ka.addEventListener("error",this.Du);this.Ka.setMaxConnections(5);var b=[];q(a)?b=b.concat(bg(this.ql,a)):fa(a)&&C(a,function(a){b=b.concat(bg(this.ql,a))},this);0<b.length&&this.Ka.loadManifest(b);this.onLoadStart();this.Hn=1;this.xk.start()};e.onLoadStart=function(){console.log("preloader loads start");this.dispatchEvent({type:J.d.e.He})};
e.Rw=function(a){J.v.Utils.Xs(a.item.id,a.result,this.ql.wj);this.dispatchEvent({type:J.d.e.dm,id:a.item.id,result:a.result})};e.zf=function(){this.Ka.loaded&&this.Ka.hasEventListener("complete")&&(console.log("preloader files load complete"),this.Ka.removeAllEventListeners(),this.dispatchEvent({type:J.d.e.Tf}));this.re||1!==this.Vh||(console.log("preloader animation progress complete"),this.xk.stop(),this.re=!0,this.dispatchEvent({type:J.d.e.Gb}))};
e.onError=function(){console.log("load error");this.Ka.reset();this.xk.stop();this.dispatchEvent({type:J.d.e.rt})};e.Kx=function(){var a=this.Xt*this.Hn/this.Pd,a=Math.min(a,this.Ka.progress,1);a!==this.Vh&&(this.Vh=a,this.Hn++,this.dispatchEvent({type:J.d.e.Ee,progress:this.Vh}),1===this.Vh&&this.zf())};function dg(a,b,c){Gd.call(this);this.sf=a;this.td=b||0;this.Tc=c;this.ef=s(this.pd,this)}t(dg,Gd);e=dg.prototype;e.gb=0;e.S=function(){dg.i.S.call(this);this.stop();delete this.sf;delete this.Tc};
e.start=function(a){this.stop();this.gb=qe(this.ef,ea(a)?a:this.td)};e.stop=function(){this.isActive()&&f.clearTimeout(this.gb);this.gb=0};e.kf=function(){this.stop();this.pd()};e.isActive=function(){return 0!=this.gb};e.pd=function(){this.gb=0;this.sf&&this.sf.call(this.Tc)};function eg(a,b,c){Gd.call(this);this.sf=a;this.Tc=c;this.$c=b||window;this.ef=s(this.pd,this)}t(eg,Gd);e=eg.prototype;e.gb=null;e.ep=!1;
e.start=function(){this.stop();this.ep=!1;var a=fg(this),b=gg(this);a&&!b&&this.$c.mozRequestAnimationFrame?(this.gb=K(this.$c,"MozBeforePaint",this.ef),this.$c.mozRequestAnimationFrame(null),this.ep=!0):this.gb=a&&b?a.call(this.$c,this.ef):this.$c.setTimeout(Fb(this.ef),20)};e.stop=function(){if(this.isActive()){var a=fg(this),b=gg(this);a&&!b&&this.$c.mozRequestAnimationFrame?ae(this.gb):a&&b?b.call(this.$c,this.gb):this.$c.clearTimeout(this.gb)}this.gb=null};e.kf=function(){this.stop();this.pd()};
e.isActive=function(){return null!=this.gb};e.pd=function(){this.ep&&this.gb&&ae(this.gb);this.gb=null;this.sf.call(this.Tc,pa())};e.S=function(){this.stop();eg.i.S.call(this)};function fg(a){a=a.$c;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null}
function gg(a){a=a.$c;return a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null}function hg(){}var Ab={},ig=null,jg=null;function ef(a){var b=ja(a);b in Ab||(Ab[b]=a);kg()}function ff(a){a=ja(a);delete Ab[a];zb()&&jg&&jg.stop()}function lg(){var a=window,b=jg&&jg.isActive();Kd(jg);jg=null;ig=a;b&&kg()}
function kg(){jg||(jg=ig?new eg(function(a){mg(a)},ig):new dg(function(){mg(pa())},20));var a=jg;a.isActive()||a.start()}function mg(a){z(Ab,function(b){b.Db(a)});zb()||kg()}J.u.common={};J.u.common.Zl=function(a){return'<div class="disc"><div class="outer"></div><div class="inner"><div class="content">'+a.content+"</div></div></div>"};
J.u.common.Wb=function(a){return a.href?'<a class="primary-button '+a.ia+'" href="'+a.href+'">'+(a.icon?'<span class="icon '+a.icon+'"></span>':"")+a.text+"</a>":'<button class="primary-button '+a.ia+'">'+(a.icon?'<span class="icon '+a.icon+'"></span>':"")+a.text+"</button>"};J.u.common.By=function(){return'<button class="icon icon-close close-button"></button>'};J.u.common.Ly=function(){return'<div class="scrollbar"><button class="handle"></button></div>'};
J.u.common.tt=function(){var a={bw:!0},a=a||{};return'<div class="fengshui-logo"><div class="symbol"><div class="needle"></div><div class="frame"></div></div>'+(!0!=a.bw?'<h1><div class="line1">FENGSHUI</div><div class="line2">REALTIME</div></h1>':"")+"</div>"};J.u.common.hh=function(a){return'<div class="popup '+(a.ia?a.ia:"")+'"><div class="content">'+a.content+"</div></div>"};
J.u.common.It=function(a){return J.u.common.hh({ia:"tutorial from-bottom",content:'<div class="subtitle"><p>WHAT TO DO</p><div class="line"></div></div><ul class="title"><li><h1>Explore<br>the environment</h1></li><li><h1>Discover<br>Feng Shui tips</h1></li><li><h1>Inquire<br>clues from your clients</h1></li></ul><div class="instructions"><button class="prev icon icon-prev" disabled></button><button class="next icon icon-next" disabled></button><ul class="steps"><li><video preload="metadata"><source src="'+a.sg+
'video/tutorial-1.mp4" type="video/mp4"><source src="'+a.sg+'video/tutorial-1.ogv" type="video/ogg"></video></li><li><video preload="metadata"><source src="'+a.sg+'video/tutorial-2.mp4" type="video/mp4"><source src="'+a.sg+'video/tutorial-2.ogv" type="video/ogg"></video></li><li><video preload="metadata"><source src="'+a.sg+'video/tutorial-3.mp4" type="video/mp4"><source src="'+a.sg+'video/tutorial-3.ogv" type="video/ogg"></video></li></ul></div><div class="controls hidden"><div class="loader"><div class="bar"><div class="fill"></div></div><p class="counter">00</p></div>'+
J.u.common.Wb({ia:"skip",icon:"icon-yes",text:"OK"})+"</div>"})};J.u.common.ot=function(){return J.u.common.hh({ia:"credits from-bottom",content:'<h1>Credits and References</h1><div class="scroller"><div class="content"></div><div class="scrollbar"><button class="handle"></button></div></div>'+J.u.common.Wb({ia:"skip",icon:"icon-yes",text:"OK"})})};J.u.common.bm=function(a){return'<div class="helper '+a.ia+'"><div class="content">'+a.content+'</div><button class="icon icon-close close-button"></button></div>'};
J.u.common.wt=function(){return'<div class="helpers">'+J.u.common.bm({ia:"compass",content:'<p class="top">View from <b>top</b>.</p><p class="normal">Back to <b>normal view</b>.</p>'})+J.u.common.bm({ia:"selector",content:"<p><b>Pressing down</b> the mouse button for<br><b>one second</b> to investigate this item.</p>"})+J.u.common.bm({ia:"walk",content:'<p class="mousewheel">You can also <b>scroll</b> the mousewheel<br>to move forward or backward.</p><p class="click">You can also <b>click</b><br>to move around in the scene.</p>'})+
"</div>"};J.u.controls={};J.u.controls.nj=function(a){a=a||{};return'<button class="roundButton '+(a.ia?a.ia:"")+'"><div class="outline"></div><div class="circle"><div class="circle-content">'+(a.content?a.content:"")+"</div></div></button>"};
J.u.controls.xt=function(a){return J.u.controls.nj({ia:"home-button",content:'<div class="icon"></div>'})+'<div class="home-button-prompt"><h3>Are you sure you want to leave?</h3><div class="button-group">'+J.u.common.Wb({ia:"small no",icon:"icon-no",text:"No"})+J.u.common.Wb({ia:"small yes",icon:"icon-yes",text:"Yes",href:a.Ed.mj})+"</div></div>"};
J.u.controls.nt=function(){return'<div class="compass grab">'+J.u.controls.nj({content:'<div class="cube"><div><div class="browse"></div><div class="design"></div></div></div>'})+"</div>"};J.u.controls.bd=function(a){return'<a class="book" href="'+a.Ed.gp+'">'+J.u.controls.nj({content:'<div class="icon"></div>'})+"</a>"};
J.u.controls.Ft=function(a){for(var b='<div class="reminder"><div class="character">'+J.u.controls.nj({content:"<canvas></canvas>"})+'</div><div class="dialogue hint"><div class="wrapper"><button class="prev icon icon-prev"></button><ul class="hints">',c=a.Dd,d=c.length,g=0;g<d;g++)var h=c[g],b=b+('<li data-tip-id="'+h.id+'">'+h.Gf+"</li>");c=qd(a.copy);d=c.length;for(g=0;g<d;g++)h=c[g],b+='<li data-view-id="'+h+'">'+a.copy[h]+"</li>";return b+'</ul><button class="next icon icon-next"></button></div></div></div>'};
J.u.controls.Hy=function(){return'<div class="objectSelector"><div class="fill"></div></div>'};J.u.controls.pt=function(){return'<div class="dropButton"><div class="circle"></div>'+J.u.common.Wb({icon:"icon-yes",text:"Drop"})+"</div>"};
J.u.controls.Ht=function(a){return'<a class="tooltip fadeOut tip locked" data-id="'+a.object.id+'" data-tip-id="'+a.object.B.id+'" href="'+a.Nv+'"><div class="bar"><div class="symbol"><div class="inner"><div class="icon icon-magnifier"></div><div class="icon icon-'+a.object.B.icon+'"></div></div></div><h6>'+a.object.B.name+"</h6></div></a>"};
J.u.controls.vt=function(a){return'<a class="tooltip fadeOut gateway" data-id="'+a.Qc.xi+'"><div class="bar"><div class="symbol"><div class="inner"><div class="icon icon-magnifier"></div><div class="icon '+(!0==a.Qc.hl?"icon-stairs":"icon-door")+'"></div></div></div><h6>To '+a.Qc.Vb+"</h6></div></a>"};
J.u.controls.Ct=function(a){for(var b='<div class="progressBar"><div class="inner"><div class="tips-wrapper">',c=qd(a.Zo),d=c.length,g=0;g<d;g++){for(var h=c[g],b=b+('<ul class="tips" data-view-id="'+h+'">'),k=a.Zo[h],l=k.length,n=0;n<l;n++)var p=k[n],b=b+('<li class="tip" data-tip-id="'+p.id+'" data-view-id="'+h+'"><div class="dot"><div class="outer"></div><div class="inner"></div></div><div class="dialog"><a class="content"><div class="icon icon-'+p.icon+'" data-tip-id="'+p.id+'" data-view-id="'+
p.Vb+'" data-section-id="'+p.$+'"></div></a></div></li>');b+="</ul>"}return b+"</div></div></div>"};J.u.ud={};
J.u.ud.jp=function(a){return'<div class="section episode" id="'+a.id+'"><div class="hud"><div class="overlays"><div class="tutorial-overlay"></div><div class="credits-overlay"></div><div class="opening-overlay">'+J.u.common.hh({ia:"opening from-bottom",content:"<h1></h1><p></p>"+J.u.common.Wb({ia:"ok",icon:"icon-yes",text:"I\u2019d be glad to help!"})+'<div class="character"></div>'})+'</div><div class="ending-overlay">'+J.u.common.hh({ia:"ending from-bottom",content:"<h1></h1><p></p>"+J.u.common.Wb({ia:"stay",
icon:"icon-yes",text:"Stay"})+J.u.common.Wb({ia:"next",icon:"icon-yes",text:"Next Location",href:a.Ed.mj})+'<div class="character"></div>'})+'</div><div class="finale-overlay">'+J.u.common.hh({ia:"finale from-bottom",content:'<h1></h1><p></p><h2>Share With Friends</h2><ul><li><a class="icon icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://fengshuirealtime.com/" target="_blank"></a></li><li><a class="icon icon-twitter" href="https://twitter.com/intent/tweet?original_referer=http://fengshuirealtime.com/" target="_blank"></a></li><li><a class="icon icon-google" href="https://plus.google.com/share?url=http://fengshuirealtime.com/" target="_blank"></a></li></ul>'})+
'</div><div class="loader-overlay"><div class="loader"><canvas class="spinner"></canvas><p class="progress"></p></div></div></div><div class="controls">'+J.u.controls.xt(a)+J.u.controls.nt()+J.u.controls.bd(a)+'<div class="objectSelector"><div class="fill"></div></div>'+J.u.controls.pt()+J.u.controls.Ct(a)+J.u.controls.Ft({Dd:a.Dd,copy:a.copy.dialog.resolved[a.id]})+'</div><div class="tooltips"></div><div class="captions"></div></div><div class="scene-container"></div></div>'};
J.u.ud.st=function(a){return'<div class="episode-selection"><div class="scene studio"><div class="shade"></div><div class="prompt">'+J.u.common.Zl({content:'<div class="location"><p>LOCATION</p><div class="line"></div></div><h1>Ollie\'s Studio</h1><p>Ollie lives in a small, delicate studio in the crowded downtown. How could we improve its feng shui?</p>'+J.u.common.Wb({ia:"studio",href:a.Ed.tp,icon:"icon-yes",text:"Start"})})+'</div></div><div class="scene house"><div class="shade"></div><div class="prompt">'+
J.u.common.Zl({content:'<div class="location"><p>LOCATION</p><div class="line"></div></div><h1>Scott\'s House</h1><p>Scott lives in a two story house, with his wife Joanna and son Nick. How could we improve its feng shui?</p>'+J.u.common.Wb({ia:"house",href:a.Ed.kp,icon:"icon-yes",text:"Start"})})+'</div></div><div class="prompt">'+J.u.common.Zl({content:'<div class="question">'+J.u.common.tt()+'<div><h1>Help your<br>feng shui<br>clients</h1><p>Please make some<br>improvements to their<br>home environments.</p><h2><div class="arrow left"></div><span>CHOOSE ONE</span><div class="arrow right"></div></h2></div></div>'})+
"</div></div>"};
J.u.ud.Gd=function(a){return'<div id="main"><div class="section" id="home"><div class="inner"><section id="main-preloader"><div class="content"><h1>FengShui RealTime</h1><canvas class="house-logo"></canvas><p><span>A real-time experience to practice Feng shui.</span><span>Discovering tips for creating an optimal,</span><span>balanced home environment.</span></p></div></section><section id="main-episode-selection"></section></div></div><ul id="main-options"><li class="info"><div class="icon"></div><div class="slider"><div class="buttons"><button class="instructions">Instructions</button><button class="credits">Credits</button></div></div></li><li class="sound"><div class="icon"></div><div class="slider"><div class="buttons"><button class="on">On</button><button class="off">Off</button></div></div></li><li class="share"><div class="icon"></div><div class="slider"><div class="buttons"><a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://fengshuirealtime.com/" target="_blank"></a><a class="twitter" href="https://twitter.com/intent/tweet?original_referer=http://fengshuirealtime.com/" target="_blank"></a><a class="google" href="https://plus.google.com/share?url=http://fengshuirealtime.com/" target="_blank"></a></div></div></li></ul></div>'+(!1!=
a.debug?'<div id="debugger"><div class="header"><h4>Debugger</h4><div class="button display"></div></div><ul></ul></div>':"")};J.u.ud.Spline=function(){return'<div id="spline"><div id="debugger"><div class="header"><h4>Debugger</h4><div class="button display"></div></div><ul></ul></div><canvas></canvas></div>'};function ng(){Gd.call(this);this.ic=[];this.Ec={}}t(ng,Gd);e=ng.prototype;e.Sr=1;e.Jl=0;
function je(a,b,c,d){var g=a.Ec[b];g||(g=a.Ec[b]=[]);var h=a.Sr;a.ic[h]=b;a.ic[h+1]=c;a.ic[h+2]=d;a.Sr=h+3;g.push(h);return h}function zf(a,b,c){var d=J.V,g=je(d,a,function(a){b.apply(c,arguments);this.Rl(g)},d)}function og(a,b,c){var d=J.V;if(a=d.Ec[a]){var g=d.ic;(a=F(a,function(a){return g[a+1]==b&&g[a+2]==c}))&&d.Rl(a)}}
e.Rl=function(a){if(0!=this.Jl)return this.Ri||(this.Ri=[]),this.Ri.push(a),!1;var b=this.ic[a];if(b){var c=this.Ec[b];c&&Qb(c,a);delete this.ic[a];delete this.ic[a+1];delete this.ic[a+2]}return!!b};e.Ba=function(a,b){var c=this.Ec[a];if(c){this.Jl++;for(var d=Vb(arguments,1),g=0,h=c.length;g<h;g++){var k=c[g];this.ic[k+1].apply(this.ic[k+2],d)}this.Jl--;if(this.Ri&&0==this.Jl)for(;c=this.Ri.pop();)this.Rl(c)}};
e.clear=function(a){if(a){var b=this.Ec[a];b&&(C(b,this.Rl,this),delete this.Ec[a])}else this.ic.length=0,this.Ec={}};e.rb=function(a){if(a){var b=this.Ec[a];return b?b.length:0}a=0;for(b in this.Ec)a+=this.rb(b);return a};e.S=function(){ng.i.S.call(this);delete this.ic;delete this.Ec;delete this.Ri};J.C=function(){ng.call(this);this.qk=[];je(this,J.C.I.Ge,this.Lg,this);je(this,J.C.I.De,this.Gg,this)};t(J.C,ng);m(J.C);J.C.prototype.Lg=function(a){Pb(this.qk,a)};
J.C.prototype.Gg=function(a){Qb(this.qk,a)};J.C.I={sp:"show_view3d",am:"hide_view3d",hp:"buffer_start",Vl:"buffer_complete",Gy:"navigate",Jy:"sound_on",Iy:"sound_off",em:"main_load_complete",Ge:"show_widget",De:"hide_widget",oj:"trigger_compass",im:"trigger_selector",pj:"trigger_walk",qj:"untrigger_compass",rj:"untrigger_selector",Oy:"untrigger_walk",Xl:"complete_compass",Yl:"complete_selector",Ay:"complete_walk"};
function pg(a){N.call(this);this.cc=null;this.f=a;this.ga=null;this.ri=[];this.Tn=[];this.k=new L(this)}t(pg,N);pg.prototype.init=function(a){this.ga=a;qg(this,V);qg(this,rg);qg(this,sg);qg(this,tg);qg(this,ug);qg(this,vg);qg(this,wg);this.Eb(V)};
function qg(a,b){var c,d,g;if(!a.pe(b)){c=c||40;var h=xg(a.f).pi();c=new THREE.PerspectiveCamera(c,h,d||5,g||2E5);c.name=b;a.ga.add(c);a.ri.push(c);J.debug&&(d=new THREE.CameraHelper(c),d.name=b+"-helper",a.ga.add(d),a.Tn.push(d));a.dispatchEvent({type:J.d.e.hj,camera:c})}}pg.prototype.pe=function(a){return F(this.ri,function(b){return b.name===a})};function hf(a,b){return F(a.Tn,function(a){return a.name===b+"-helper"})}
pg.prototype.Eb=function(a){this.cc=q(a)?this.pe(a):a;this.dispatchEvent({type:J.d.e.G,camera:this.cc});return this.cc};pg.prototype.N=function(a){C(this.ri,function(b){b.aspect=a;b.updateProjectionMatrix()},this)};J.v.K={};function yg(a,b,c,d,g){d.updateMatrixWorld();var h=d.position.clone();h.applyMatrix4(d.matrixWorld);a=new THREE.Vector3(a/g.width*2-1,2*-(b/g.height)+1,0.5);a.unproject(d);d=J.v.K.Kl;d.set(h,a.sub(h).normalize());return d.intersectObjects(c,void 0)}
J.v.K.Tv=function(a,b,c,d){a=a.concat();Qb(a,b);c&&a.push(c);d=d.intersectObjects(a);return 0<d.length?c?d[0].object===c&&c.kc.m===b:d[0].object===b:!1};
J.v.K.Dc=function(a,b){var c;c=c||new THREE.Vector3(0,1,0);var d=new THREE.Matrix4;d.lookAt(a,b,c);var g=d.elements,h=g[0];c=g[1];var d=g[2],k=g[4],l=g[5],n=g[6],p=g[8],v=g[9],g=g[10],x=h+l+g,A;0<x?(h=2*Math.sqrt(x+1),A=0.25*h,l=(n-v)/h,g=(p-d)/h,x=(c-k)/h):h>l&&h>g?(h=2*Math.sqrt(1+h-l-g),l=0.25*h,g=(c+k)/h,x=(p+d)/h,A=(n-v)/h):l>g?(h=2*Math.sqrt(1+l-h-g),g=0.25*h,l=(c+k)/h,x=(n+v)/h,A=(p-d)/h):(h=2*Math.sqrt(1+g-h-l),x=0.25*h,l=(p+d)/h,g=(n+v)/h,A=(c-k)/h);c=new THREE.Quaternion(l,g,x,A);c.normalize();
return c};J.v.K.eo=function(a,b,c){a=a.clone().project(b);return{x:(a.x+1)/2*c.width,y:(-a.y+1)/2*c.height}};J.v.K.Jv=function(a,b){function c(a,b){var c=2*Math.PI,k=(b-a)%c;k!=k%(c/2)&&(k=0>k?k+c:k-c);return a+k}a instanceof THREE.Euler&&b instanceof THREE.Euler?(b.x=c(a.x,b.x),b.y=c(a.y,b.y),b.z=c(a.z,b.z)):b=c(a,b);return b};J.v.K.nf=function(a,b,c,d){d=d||a.clone();a=(new THREE.Quaternion).setFromEuler(a);b=(new THREE.Quaternion).setFromEuler(b);c=a.slerp(b,c);return d.setFromQuaternion(c)};
J.v.K.Lv=function(a,b){var c=new THREE.Vector3;c.copy(b);return a.localToWorld(c)};J.v.K.ho=function(a,b){var c=new THREE.Vector3;c.copy(b);return a.worldToLocal(c)};J.v.K.Mv=function(a,b){var c=(new THREE.Quaternion).setFromEuler(b),c=(new THREE.Quaternion).setFromEuler(a.rotation).multiply(c);return(new THREE.Euler).setFromQuaternion(c)};J.v.K.Jr=function(a,b){var c=(new THREE.Quaternion).setFromEuler(b),d=(new THREE.Quaternion).setFromEuler(a.rotation),c=c.multiply(d);return(new THREE.Euler).setFromQuaternion(c)};
J.v.K.fz=new THREE.Projector;J.v.K.Kl=new THREE.Raycaster;J.v.K.Yr=new THREE.ObjectLoader;J.tf.ih={};
J.tf.ih.kj={studio:{livingroom:{"studio-door":{O:"gateway",Zc:"livingroom",Rc:"studio-door",castShadow:!0,Yg:!0,se:!0,Qr:!0,Vc:"entry-open",Mc:"entry-close",origin:{position:new THREE.Vector3(-240,0,30),rotation:new THREE.Euler(0,-Math.PI/2,0)},texture:"studio.livingroom.studio-door-texture"},"glamour-photo":{O:"pictures",ie:"changepicture",ca:"studio.livingroom.glamourphoto",texture:"studio.livingroom.glamour-photo-texture",camera:{position:new THREE.Vector3(59,80,62),rotation:new THREE.Euler(0.13,
-3.1,0,"YXZ"),fov:40}},"studio-door-handle":{texture:"studio.livingroom.studio-door-handle-texture"},"studio-door-frame":{castShadow:!0,texture:"studio.livingroom.studio-door-frame-texture"},"bathroom-door":{O:"gateway",Zc:"bathroom",Rc:"bathroom-door",castShadow:!0,Vc:"door-open",Mc:"door-close",origin:{position:new THREE.Vector3(-176,0,20),rotation:new THREE.Euler(0,-Math.PI/2,0)},texture:"studio.livingroom.bathroom-door-texture"},wall:{A:!0,texture:"studio.livingroom.wall-texture"},"wall-outer":{castShadow:!0,
texture:"studio.livingroom.wall-outer-texture"},ceiling:{castShadow:!0,texture:"studio.livingroom.ceiling-texture"},"ceiling-lamp-1":{texture:"studio.livingroom.ceiling-lamp-1-texture"},"ceiling-lamp-2":{texture:"studio.livingroom.ceiling-lamp-2-texture"},floor:{texture:"studio.livingroom.floor-texture"},plant:{O:"replaceable",ca:"studio.livingroom.cactus",camera:{position:new THREE.Vector3(60,64,-58.5),rotation:new THREE.Euler(-0.3,-1.5,0,"YXZ"),fov:25},ie:"changeobject",objects:["lucky-bamboo",
"rubberplant"]},cactus:{texture:"studio.livingroom.cactus-texture"},bed:{A:!0,texture:"studio.livingroom.bed-texture"},"kitchen-cabinets":{A:!0,texture:"studio.livingroom.kitchen-cabinets-texture"},"kitchen-ware":{texture:"studio.livingroom.kitchen-ware-texture"},"linen-cabinet":{A:!0,texture:"studio.livingroom.linen-cabinet-texture"},mirror:{O:"mirror"},sofabed:{A:!0,texture:"studio.livingroom.sofabed-texture"},"sofabed-cabinet":{A:!0,texture:"studio.livingroom.sofabed-cabinet-texture"},"kitchen-storage":{A:!0,
texture:"studio.livingroom.kitchen-storage-texture"},"coffee-pot":{texture:"studio.livingroom.coffee-pot-texture"},"round-lamp":{O:"lamp",ca:"studio.livingroom.readinglamp",texture:"studio.livingroom.round-lamp-texture",ie:"changecolor"},"reading-lamp":{texture:"studio.livingroom.reading-lamp-texture"},hood:{texture:"studio.livingroom.hood-texture"},microwave:{texture:"studio.livingroom.microwave-texture"},fruitplate:{O:"fruitplate",receiveShadow:!0,camera:{position:new THREE.Vector3(-84,80,-87),
rotation:new THREE.Euler(-0.59,2.02,0,"YXZ"),fov:40},texture:"studio.livingroom.fruitplate-texture",ca:"studio.livingroom.fruitplate",ie:"dropfruits"},"dining-table":{A:!0,texture:"studio.livingroom.dining-table-texture"},"dining-chair":{O:"movable",castShadow:!0,texture:"studio.livingroom.dining-chair-texture",position:new THREE.Vector3(-47.69,0,-54.87),rotation:new THREE.Euler(0,0,0),Ad:140,ca:"studio.livingroom.diningchair"},"window-books":{texture:"studio.livingroom.window-books-texture"},clock:{O:"tip",
texture:"studio.livingroom.clock-texture",ca:"studio.livingroom.clock"},seasoning:{texture:"studio.livingroom.seasoning-texture"},"bed-shelf":{texture:"studio.livingroom.bed-shelf-texture"},"tv-table":{A:!0,texture:"studio.livingroom.tv-table-texture"},tv:{texture:"studio.livingroom.tv-texture"},sofa:{A:!0,texture:"studio.livingroom.sofa-texture"},"book-shelf":{A:!0,castShadow:!0,texture:"studio.livingroom.book-shelf-texture"},"kitchen-shelf":{texture:"studio.livingroom.kitchen-shelf-texture"},nightstand:{A:!0,
texture:"studio.livingroom.nightstand-texture"},sewingmachine:{O:"sewingmachine",camera:{position:new THREE.Vector3(-95,54,10),rotation:new THREE.Euler(-0.1,-0.8,0,"YXZ"),fov:13},texture:"studio.livingroom.sewingmachine-texture",ca:"studio.livingroom.sewingmachine"},"sewingmachine-cover":{texture:"studio.livingroom.sewingmachine-cover-texture"},pictures:{texture:"studio.livingroom.pictures-texture"},boxes:{texture:"studio.livingroom.boxes-texture"},shoestorage:{A:!0,texture:"studio.livingroom.shoestorage-texture"},
carpet:{texture:"studio.livingroom.carpet-texture"},crystal:{O:"tip",ca:"studio.livingroom.crystal",ko:!0},laptop:{texture:"studio.livingroom.laptop-texture"},wardrobe:{A:!0,texture:"studio.livingroom.wardrobe-texture"},"window-left":{O:"windows",ca:"studio.livingroom.windows",texture:"studio.livingroom.window-left-texture",camera:{position:new THREE.Vector3(51.37,80.49,-57.52),rotation:new THREE.Euler(-0.12,-1.52,0,"YXZ"),fov:58}},"window-right":{O:"windows",ca:"studio.livingroom.windows",texture:"studio.livingroom.window-right-texture",
camera:{position:new THREE.Vector3(-11.9,80,76.44),rotation:new THREE.Euler(-0.06,-1.67,0,"YXZ"),fov:36}},"window-left-switch":{texture:"studio.livingroom.window-left-switch-texture"},"window-right-switch":{texture:"studio.livingroom.window-right-switch-texture"},refrigerator:{A:!0,receiveShadow:!0,texture:"studio.livingroom.refrigerator-texture"},"refrigerator-stuff":{texture:"studio.livingroom.refrigerator-stuff-texture"},"refrigerator-door":{O:"refrigerator",receiveShadow:!0,texture:"studio.livingroom.refrigerator-door-texture",
camera:{position:new THREE.Vector3(-110,80,-120),rotation:new THREE.Euler(-0.64,-1.57,0,"YXZ"),fov:40},ca:"studio.livingroom.refrigerator"},apple:{O:"fruit",texture:"studio.livingroom.apple-in-refrigerator-texture"},pineapple:{O:"fruit",texture:"studio.livingroom.pineapple-in-refrigerator-texture"},orange:{O:"fruit",texture:"studio.livingroom.orange-in-refrigerator-texture"},peach:{O:"fruit",texture:"studio.livingroom.peach-in-refrigerator-texture"}},bathroom:{floor:{texture:"studio.bathroom.floor-texture",
receiveShadow:!0},wall:{castShadow:!0,texture:"studio.bathroom.wall-texture"},"wall-outer":{castShadow:!0,texture:"studio.bathroom.wall-outer-texture"},"door-frame":{castShadow:!0,texture:"studio.bathroom.door-frame-texture"},ceiling:{texture:"studio.bathroom.ceiling-texture"},"ceiling-lamps":{texture:"studio.bathroom.ceiling-lamps-texture"},lotus:{O:"tip",texture:"studio.bathroom.lotus-texture",ca:"studio.bathroom.lotus"},towel:{texture:"studio.bathroom.towel-texture"},showerhead:{O:"showerhead",
texture:"studio.bathroom.showerhead-texture",ca:"studio.bathroom.showerhead",camera:{position:new THREE.Vector3(11,84,77),rotation:new THREE.Euler(0.16,-1.59,0,"YXZ"),fov:46}},waterdrop:{ko:!0},"shower-handle":{texture:"studio.bathroom.shower-handle-texture"},shelf:{A:!0,texture:"studio.bathroom.shelf-texture"},"jar-1":{texture:"studio.bathroom.jar-1-texture"},"jar-2":{texture:"studio.bathroom.jar-2-texture"},"jar-3":{texture:"studio.bathroom.jar-3-texture"},"jar-4":{texture:"studio.bathroom.jar-4-texture"},
"jar-5":{texture:"studio.bathroom.jar-5-texture"},"jar-6":{texture:"studio.bathroom.jar-6-texture"},"jar-7":{texture:"studio.bathroom.jar-7-texture"},"jar-8":{texture:"studio.bathroom.jar-8-texture"},"jar-9":{texture:"studio.bathroom.jar-9-texture"},"jar-10":{texture:"studio.bathroom.jar-10-texture"},bottles:{texture:"studio.bathroom.bottles-texture"},"towel-roll":{texture:"studio.bathroom.towel-roll-texture"},"cosmetic-bag":{texture:"studio.bathroom.cosmetic-bag-texture"},closet:{O:"closet",receiveShadow:!0,
camera:{position:new THREE.Vector3(27,73,-52),rotation:new THREE.Euler(0.07,1.57,0,"YXZ"),fov:45},ca:"studio.bathroom.closet",texture:"studio.bathroom.closet-texture"},"closet-door":{texture:"studio.bathroom.closet-door-texture"},trashcan:{A:!0,texture:"studio.bathroom.trashcan-texture"},plug:{texture:"studio.bathroom.plug-texture"},fragrance:{texture:"studio.bathroom.fragrance-texture"},"toilet-paper":{texture:"studio.bathroom.toilet-paper-texture"},toilet:{A:!0,texture:"studio.bathroom.toilet-texture"},
bathrobe:{texture:"studio.bathroom.bathrobe-texture"},bathtub:{texture:"studio.bathroom.bathtub-texture"},"shower-curtain":{A:!0,texture:"studio.bathroom.shower-curtain-texture"},carpets:{texture:"studio.bathroom.carpets-texture"},washbasin:{A:!0,texture:"studio.bathroom.washbasin-texture"},flipflop:{texture:"studio.bathroom.flipflop-texture"},lamps:{A:!0,texture:"studio.bathroom.lamps-texture"},"bathroom-door":{O:"gateway",Zc:"livingroom",Rc:"bathroom-door",castShadow:!0,se:!0,Vc:"door-open",Mc:"door-close",
origin:{position:new THREE.Vector3(12,0,-60),rotation:new THREE.Euler(0,Math.PI,0)},texture:"studio.bathroom.bathroom-door-texture"}}},house:{livingroom:{"livingroom-door":{O:"gateway",Zc:"livingroom",Rc:"livingroom-door",castShadow:!0,Yg:!0,se:!0,Vc:"entry-open",Mc:"entry-close",origin:{position:new THREE.Vector3(110,0,0),rotation:new THREE.Euler(0,Math.PI/2,0)},texture:"house.livingroom.livingroom-door-texture"},"stairways-door":{O:"gateway",Zc:"corridor",Rc:"stairways-door",hl:!0,Vc:null,Mc:null,
origin:{position:new THREE.Vector3(-125,0,50),rotation:new THREE.Euler(0,-Math.PI/2,0)}},stairways:{A:!0,texture:"house.livingroom.stairways-texture"},"stairways-handrail":{texture:"house.livingroom.stairways-handrail-texture"},"door-frame":{texture:"house.livingroom.door-frame-texture"},floor:{receiveShadow:!0,texture:"house.livingroom.floor-texture"},wall:{castShadow:!0,texture:"house.livingroom.wall-texture"},"wall-outer":{castShadow:!0,texture:"house.livingroom.wall-outer-texture"},ceiling:{castShadow:!0,
texture:"house.livingroom.ceiling-texture"},"ceiling-lamp-1":{texture:"house.livingroom.ceiling-lamp-1-texture"},"ceiling-lamp-2":{texture:"house.livingroom.ceiling-lamp-2-texture"},"mirror-holder":{O:"tip",camera:{position:new THREE.Vector3(-9,75,-118),rotation:new THREE.Euler(-0.4,0,0,"YXZ"),fov:40},ca:"house.livingroom.mirror"},mirror:{O:"mirror"},drawer:{O:"drawer",texture:"house.livingroom.drawer-texture",camera:{position:new THREE.Vector3(-8,97,-203),rotation:new THREE.Euler(-1.5,0,0,"YXZ"),
fov:25},ca:"house.livingroom.drawer"},knife:{O:"knife",castShadow:!0,texture:"house.livingroom.knife-on-cabinet-texture",position:new THREE.Vector3(-6.87,-2.21,10.82),rotation:new THREE.Euler(0,0,0),Ad:100,parent:"drawer",ca:"house.livingroom.knife"},"kitchen-top":{texture:"house.livingroom.kitchen-top-texture"},"kitchen-bottom":{A:!0,texture:"house.livingroom.kitchen-bottom-texture"},"kitchen-stuff":{texture:"house.livingroom.kitchen-stuff-texture"},windows:{castShadow:!0,texture:"house.livingroom.windows-texture"},
"windowsill-stuff":{texture:"house.livingroom.windowsill-stuff-texture"},basin:{texture:"house.livingroom.basin-texture"},ladder:{texture:"house.livingroom.ladder-texture"},cooktop:{texture:"house.livingroom.cooktop-texture"},"long-table":{A:!0,texture:"house.livingroom.long-table-texture"},clock:{texture:"house.livingroom.clock-texture"},bookshelf:{O:"tip",A:!0,texture:"house.livingroom.bookshelf-texture",camera:{position:new THREE.Vector3(-22,80,0),rotation:new THREE.Euler(0.05,1.58,0,"YXZ"),fov:30},
ca:"house.livingroom.books"},"bookshelf-lamps":{texture:"house.livingroom.bookshelf-lamps-texture"},"round-table":{A:!0,texture:"house.livingroom.round-table-texture"},"window-stand":{A:!0,texture:"house.livingroom.window-stand-texture"},"entrance-stuff":{texture:"house.livingroom.entrance-stuff-texture"},"blue-sofa":{A:!0,texture:"house.livingroom.blue-sofa-texture"},pads:{texture:"house.livingroom.pads-texture"},"dining-table":{A:!0,texture:"house.livingroom.dining-table-texture"},"dining-chairs":{A:!0,
texture:"house.livingroom.dining-chairs-texture"},"dining-lamps":{texture:"house.livingroom.dining-lamps-texture"},divider:{A:!0,texture:"house.livingroom.divider-texture"},"curtain-left":{A:!0,texture:"house.livingroom.curtain-left-texture"},"curtain-right":{A:!0,texture:"house.livingroom.curtain-right-texture"},fruitplate:{texture:"house.livingroom.fruitplate-texture"},refrigerator:{A:!0,texture:"house.livingroom.refrigerator-texture"},"white-sofa":{A:!0,texture:"house.livingroom.white-sofa-texture"},
goldfish:{texture:"house.livingroom.goldfish-texture"},"fish-bowl":{O:"glassbowl",ca:"house.livingroom.glassbowl",texture:"house.livingroom.fish-bowl-texture",camera:{position:new THREE.Vector3(-11,77,56),rotation:new THREE.Euler(-1.06,3.14,0,"YXZ"),fov:22}},"fish-bowl-stand":{A:!0,texture:"house.livingroom.fish-bowl-stand-texture"},"tv-stand":{A:!0,texture:"house.livingroom.tv-stand-texture"},"glass-containers":{ko:!0},"window-blinds":{castShadow:!0,texture:"house.livingroom.window-blinds-texture"},
cupboard:{A:!0,texture:"house.livingroom.cupboard-texture"},"living-area-lamp":{A:!0,texture:"house.livingroom.living-area-lamp-texture"},"living-area-carpet":{texture:"house.livingroom.living-area-carpet-texture"},"stairway-lamps":{texture:"house.livingroom.stairway-lamps-texture"},heater:{texture:"house.livingroom.heater-texture"}},corridor:{floor:{receiveShadow:!0,texture:"house.corridor.floor-texture"},"floor-2":{A:!0,texture:"house.livingroom.floor-texture"},"wall-2":{texture:"house.livingroom.wall-texture"},
"tv-stand":{texture:"house.livingroom.tv-stand-texture"},clock:{texture:"house.livingroom.clock-texture"},stairways:{texture:"house.livingroom.stairways-texture"},"stairways-handrail":{texture:"house.livingroom.stairways-handrail-texture"},"stairways-door":{O:"gateway",Zc:"livingroom",Rc:"stairways-door",se:!0,hl:!0,Vc:null,Mc:null,origin:{position:new THREE.Vector3(50,0,225),rotation:new THREE.Euler(0,0,0)}},"round-table":{texture:"house.livingroom.round-table-texture"},"white-sofa":{texture:"house.livingroom.white-sofa-texture"},
"ceiling-lamp":{texture:"house.corridor.ceiling-lamp-texture"},"ceiling-lamps":{texture:"house.corridor.ceiling-lamps-texture"},"stairway-lamps":{texture:"house.livingroom.stairway-lamps-texture"},"nick-photo":{texture:"house.corridor.nick-photo-texture"},"boysroom-door":{O:"gateway",Zc:"boysroom",Rc:"boysroom-door",castShadow:!0,Vc:"door-open",Mc:"door-close",origin:{position:new THREE.Vector3(60,0,-170),rotation:new THREE.Euler(0,0,0)},texture:"house.corridor.boysroom-door-texture"},"homeoffice-door":{O:"gateway",
Zc:"homeoffice",Rc:"homeoffice-door",castShadow:!0,Vc:"door-open",Mc:"door-close",origin:{position:new THREE.Vector3(20,0,-50),rotation:new THREE.Euler(0,0,0)},texture:"house.corridor.homeoffice-door-texture"},"bathroom-door":{texture:"house.corridor.bathroom-door-texture"},"bedroom-door":{texture:"house.corridor.bedroom-door-texture"},"picture-wall":{texture:"house.corridor.picture-wall-texture"},"display-table":{A:!0,texture:"house.corridor.display-table-texture"},cat:{texture:"house.corridor.cat-texture"},
"cat-bed":{O:"cat",A:!0,texture:"house.corridor.cat-bed-texture",ca:"house.corridor.cat"},wall:{castShadow:!0,texture:"house.corridor.wall-texture"},"wall-outer":{castShadow:!0,texture:"house.corridor.wall-outer-texture"},"door-frames":{texture:"house.corridor.door-frames-texture"},ceiling:{castShadow:!0,texture:"house.corridor.ceiling-texture"},"corridor-window":{castShadow:!0,texture:"house.corridor.corridor-window-texture"},"corridor-stuff":{texture:"house.corridor.corridor-stuff-texture"},"window-plant":{texture:"house.corridor.window-plant-texture"}},
boysroom:{floor:{texture:"house.boysroom.floor-texture"},wall:{castShadow:!0,texture:"house.boysroom.wall-texture"},"wall-outer":{castShadow:!0,texture:"house.boysroom.wall-outer-texture"},ceiling:{castShadow:!0,texture:"house.boysroom.ceiling-texture"},cabinet:{A:!0,texture:"house.boysroom.cabinet-texture"},bed:{A:!0,receiveShadow:!0,texture:"house.boysroom.bed-texture"},"big-frame":{texture:"house.boysroom.big-frame-texture"},"big-frame-picture":{O:"pictures",ie:"changepicture",ca:"house.boysroom.poster",
texture:"house.boysroom.big-frame-picture-texture",camera:{position:new THREE.Vector3(21.1,80,-26.46),rotation:new THREE.Euler(-0.03,1.55,0,"YXZ"),fov:40}},"decoration-pictures":{texture:"house.boysroom.decoration-pictures-texture"},carpet:{texture:"house.boysroom.carpet-texture"},stools:{texture:"house.boysroom.stools-texture"},football:{A:!0,texture:"house.boysroom.football-texture"},moon:{texture:"house.boysroom.moon-texture"},"shelf-stuff-1":{texture:"house.boysroom.shelf-stuff-1-texture"},"shelf-stuff-2":{texture:"house.boysroom.shelf-stuff-2-texture"},
"shelf-stuff-3":{texture:"house.boysroom.shelf-stuff-3-texture"},"shelf-stuff-4":{texture:"house.boysroom.shelf-stuff-4-texture"},"shelf-stuff-5":{texture:"house.boysroom.shelf-stuff-5-texture"},"shelf-stuff-6":{texture:"house.boysroom.shelf-stuff-6-texture"},toytrain:{texture:"house.boysroom.toytrain-texture"},computer:{O:"computer",A:!0,texture:"house.boysroom.computer-on-table-texture",position:new THREE.Vector3(63.04,37.75,-97.24),rotation:new THREE.Euler(0,3.14,0),Ad:100,parent:"desk",ca:"house.boysroom.computer"},
screen:{},desk:{A:!0,texture:"house.boysroom.desk-texture"},table:{A:!0,texture:"house.boysroom.table-texture"},"table-stuff":{texture:"house.boysroom.table-stuff-texture"},"swivel-chair":{A:!0,texture:"house.boysroom.swivel-chair-texture"},nightstand:{A:!0,texture:"house.boysroom.nightstand-texture"},"pencil-vase":{texture:"house.boysroom.pencil-vase-texture"},"boysroom-door":{O:"gateway",Zc:"corridor",Rc:"boysroom-door",castShadow:!0,se:!0,Vc:"door-open",Mc:"door-close",origin:{position:new THREE.Vector3(78,
0,33),rotation:new THREE.Euler(0,Math.PI/2,0)},texture:"house.boysroom.boysroom-door-texture"},sketchpad:{texture:"house.boysroom.sketchpad-texture"},"ceiling-lamps":{texture:"house.boysroom.ceiling-lamps-texture"},"nightstand-lamp":{texture:"house.boysroom.nightstand-lamp-texture"},"yellow-reading-lamp":{texture:"house.boysroom.yellow-reading-lamp-texture"},"blue-reading-lamp":{texture:"house.boysroom.blue-reading-lamp-texture"},bedding:{receiveShadow:!0,texture:"house.boysroom.bedding-texture"},
chalkboard:{texture:"house.boysroom.chalkboard-texture"},slippers:{texture:"house.boysroom.slippers-texture"},"table-books":{texture:"house.boysroom.table-books-texture"},"shelf-left":{A:!0,texture:"house.boysroom.shelf-left-texture"},"shelf-right":{A:!0,texture:"house.boysroom.shelf-right-texture"},drawer:{texture:"house.boysroom.drawer-texture"},bear:{O:"bear",castShadow:!0,texture:"house.boysroom.bear-in-drawer-texture",position:new THREE.Vector3(-50.04,33.7,-27.77),rotation:new THREE.Euler(0,
-1.57,0),Ad:100,parent:"bed",ca:"house.boysroom.bear"},handheld:{O:"movable",texture:"house.boysroom.handheld-nightstand-texture",ca:"house.boysroom.handheld",position:new THREE.Vector3(-43.73,69.26,-100.78),rotation:new THREE.Euler(0,1.57,0),Ad:100,parent:"shelf-left"},window:{texture:"house.boysroom.window-texture"},"window-frame":{texture:"house.boysroom.window-frame-texture"},"door-frame":{texture:"house.boysroom.door-frame-texture"}},homeoffice:{floor:{texture:"house.homeoffice.floor-texture",
receiveShadow:!0},ceiling:{texture:"house.homeoffice.ceiling-texture"},wall:{castShadow:!0,texture:"house.homeoffice.wall-texture"},"wall-outer":{castShadow:!0,texture:"house.homeoffice.wall-outer-texture"},"homeoffice-door":{O:"gateway",Zc:"corridor",Rc:"homeoffice-door",castShadow:!0,se:!0,Vc:"door-open",Mc:"door-close",origin:{position:new THREE.Vector3(68,0,-53),rotation:new THREE.Euler(0,Math.PI/2,0)},texture:"house.homeoffice.homeoffice-door-texture"},"swivel-chair":{O:"movable",A:!0,castShadow:!0,
texture:"house.homeoffice.swivel-chair-texture",position:new THREE.Vector3(-40,0,9),rotation:new THREE.Euler(0,0,0),Ad:200,ca:"house.homeoffice.deskchair"},storage:{A:!0,texture:"house.homeoffice.storage-texture"},setsquare:{O:"movable",A:!0,castShadow:!0,texture:"house.homeoffice.setsquare-texture",ca:"house.homeoffice.setsquare",position:new THREE.Vector3(-36.95,107.05,137.1),rotation:new THREE.Euler(0,1.57,0.18),Ad:140,parent:"block-shelf-1"},carpet:{texture:"house.homeoffice.carpet-texture"},
"door-frame":{texture:"house.homeoffice.door-frame-texture"},"display-shelf-lamp":{texture:"house.homeoffice.display-shelf-lamp-texture"},"bookshelf-lamps":{texture:"house.homeoffice.bookshelf-lamps-texture"},"picture-frame-1":{texture:"house.homeoffice.picture-frame-1-texture"},"picture-frame-2":{texture:"house.homeoffice.picture-frame-2-texture"},"picture-frame-3":{texture:"house.homeoffice.picture-frame-3-texture"},"picture-frame-4":{texture:"house.homeoffice.picture-frame-4-texture"},"picture-1":{texture:"house.homeoffice.pictures.1"},
"picture-2":{texture:"house.homeoffice.pictures.2"},"picture-3":{texture:"house.homeoffice.pictures.3"},"picture-4":{texture:"house.homeoffice.pictures.4"},"block-shelf-1":{texture:"house.homeoffice.block-shelf-1-texture"},"block-shelf-2":{texture:"house.homeoffice.block-shelf-2-texture"},"block-stuff-1":{texture:"house.homeoffice.block-stuff-1-texture"},"block-stuff-2":{texture:"house.homeoffice.block-stuff-2-texture"},"books-1":{texture:"house.homeoffice.books-1-texture"},"books-2":{texture:"house.homeoffice.books-2-texture"},
"round-lamp":{A:!0,texture:"house.homeoffice.round-lamp-texture"},calendar:{texture:"house.homeoffice.calendar-texture"},magazine:{texture:"house.homeoffice.magazine-texture"},window:{texture:"house.homeoffice.window-texture"},armchair:{texture:"house.homeoffice.armchair-texture"},"writing-desk":{A:!0,texture:"house.homeoffice.writing-desk-texture"},"dracaena-fragrans":{A:!0,texture:"house.homeoffice.dracaena-fragrans-texture"},handbag:{texture:"house.homeoffice.handbag-texture"},"pen-vase":{texture:"house.homeoffice.pen-vase-texture"},
rubberplant:{O:"tip",texture:"house.homeoffice.rubberplant-texture",ca:"house.homeoffice.officeplant"},"coffee-table":{A:!0,texture:"house.homeoffice.coffee-table-texture"},coffeecup:{texture:"house.homeoffice.coffeecup-texture"},"floor-lamp":{A:!0,texture:"house.homeoffice.floor-lamp-texture"},"ceiling-lamp":{texture:"house.homeoffice.ceiling-lamp-texture"},cup:{texture:"house.homeoffice.cup-texture"},"reading-lamp-1":{texture:"house.homeoffice.reading-lamp-1-texture"},"reading-lamp-2":{texture:"house.homeoffice.reading-lamp-2-texture"},
sofa:{A:!0,texture:"house.homeoffice.sofa-texture"},trash:{texture:"house.homeoffice.trash-texture"},"display-shelf":{O:"pictures",A:!0,ie:"changepicture",ca:"house.homeoffice.photodisplay",texture:"house.homeoffice.display-shelf-texture",camera:{position:new THREE.Vector3(23,80,-60),rotation:new THREE.Euler(0.01,0.07,0,"YXZ"),fov:40}},computer:{texture:"house.homeoffice.computer-texture"},screen:{O:"wallpaper",ca:"house.homeoffice.desktopwallpaper"},laptop:{texture:"house.homeoffice.laptop-texture"},
curtain:{texture:"house.homeoffice.curtain-texture"},"curtain-rod":{texture:"house.homeoffice.curtain-rod-texture"},telephone:{texture:"house.homeoffice.telephone-texture"},bookshelf:{A:!0,texture:"house.homeoffice.bookshelf-texture"},"bookshelf-stuff":{texture:"house.homeoffice.bookshelf-stuff-texture"}}}};J.tf.ih.getData=function(a){var b=J.tf.ih.kj;C(a.split("."),function(a){b=b[a]});return b||{}};J.ea.vy={};
function zg(a,b,c){N.call(this);this.m=a;this.m.userData=b;this.m.kc=this;this.name=a.name;this.id=a.name+"-"+a.uuid;this.data=b;this.f=c;this.Ke=new THREE.Box3;this.Ep=new THREE.Sphere;new THREE.Vector3;this.nr=null;this.Xh=new THREE.Mesh(new THREE.BoxGeometry(1,1,1));this.Xh.kc=this;this.Gi=this.Gp=this.m.visible;this.il=!1;this.hu=this.data.ko;this.Vi()}t(zg,N);e=zg.prototype;e.Vi=function(){this.f.ma[this.name]=this};
e.init=function(){this.m.castShadow=this.data.castShadow||!1;this.m.receiveShadow=this.data.receiveShadow||!1;if(this.hu){var a=THREE.FresnelShader,b=THREE.UniformsUtils.clone(a.uniforms);b.tCube.value=Ag(this.f,this.qb(),J.Wi.Ll/2);this.m.material=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:b,shading:THREE.FlatShading})}else this.m.material&&(this.m.material.shading=THREE.FlatShading,this.m.material.fog=this.data.fog||!1)};
e.Ya=function(){if(this.il)return!1;this.il=!0;var a=T.F(),b=this.f.$,c=this.f.id;this.m.traverse(function(d){var g=J.tf.ih.getData(b+"."+c+"."+d.name);if(d instanceof THREE.Object3D&&(g=g.texture,q(g)&&!d.material.map)){var g=U(a,g),h;g.src&&(h=new THREE.Texture(g),h.needsUpdate=!0);d.material.shading=THREE.FlatShading;d.material.fog=!1;d.material.map=h;d.material.needsUpdate=!0}});return!0};
e.Ob=function(){if(this.il)this.il=!1;else return!1;this.m.traverse(function(a){a instanceof THREE.Mesh&&a.material.map&&(a.material.map.dispose(),a.material.map=null,a.material.needsUpdate=!0)});return!0};function Bg(a){var b=a.getBoundingBox();b.size(a.Xh.scale);b.center(a.Xh.position);a.Xh.updateMatrixWorld();return a.Xh}e.getBoundingBox=function(){this.Ke.setFromObject(this.m);return this.Ke};e.getBoundingSphere=function(){this.getBoundingBox().getBoundingSphere(this.Ep);return this.Ep};
e.qb=function(){return this.getBoundingBox().center()};function Cg(a,b){b=b||a.f.scene;b.add(a.m)}e.Ng=function(){this.m.parent&&this.m.parent.remove(this.m)};function Dg(a){if(a.Gp&&!a.Gi){a.Gi=!0;a.m.visible=!0;for(var b=a.m.parent,c=a.f.scene;b&&b!==c;)b.kc?Dg(b.kc):b.visible=!0,b=b.parent;a.m.traverse(function(a){a.kc?Dg(a.kc):a.visible=!0})}}function Eg(a){a.Gi&&(a.Gi=!1,a.m.visible=!1)}var of=new THREE.MeshBasicMaterial({color:16711680}),pf=new THREE.MeshBasicMaterial({color:65280});
function Fg(a,b,c){zg.call(this,a,b,c);this.m.Zy=this;this.Wv=b.camera?!0:!1;this.$i=b.camera||{};this.Zb=new L(this);this.ff=1E3;this.Nq=new dg(this.ow,0,this)}t(Fg,zg);e=Fg.prototype;e.Vi=function(){Fg.i.Vi.call(this);this.f.qo[this.name]=this};e.t=function(){};e.n=function(){};e.Ma=function(){this.dispatchEvent(J.d.e.He)};e.Ca=function(){this.Zb.removeAll();this.dispatchEvent(J.d.e.ip)};e.ab=function(){console.log("on camera in: "+this.name);this.Nq.start(this.ff)};
e.tb=function(){console.log("on camera out: "+this.name);this.Nq.stop()};e.ow=function(){this.dispatchEvent(J.d.e.Sf)};function W(a,b,c){Fg.call(this,a,b,c);var d=b.ca.split(".");a=d[2];c=d[1];d=d[0];this.B=Ue(Ve.F(),a,c,d);Zd(this.B,J.d.e.Hb,this.Ef,!1,this);this.ie=b.ie||null}t(W,Fg);W.prototype.Vi=function(){W.i.Vi.call(this);this.f.Ae[this.name]=this};W.prototype.Fa=function(){this.B.Fa()};W.prototype.Ef=function(){this.dispatchEvent(J.d.e.Hb);console.log("UNLOCK: ",this)};
function Gg(a,b,c){W.call(this,a,b,c);this.le=null;this.Ad=this.data.Ad;this.$k=this.sd=!1;this.Qq=new dg(this.Si,1E3,this)}t(Gg,W);e=Gg.prototype;e.init=function(){Gg.i.init.call(this);var a=this.f.ma[this.data.parent];this.le=a?a.m:this.f.scene};e.getBoundingBox=function(){if(this.sd){this.m.geometry.computeBoundingBox();var a=this.m.geometry.boundingBox.size(),b=this.data.position.clone();b.y+=a.y/2;this.Ke.setFromCenterAndSize(b,a);return this.Ke}return Gg.i.getBoundingBox.call(this)};e.Hr=function(){return this};
e.Si=function(){var a=Hg(this.f.ob,this.name),b=a.position,c=a.rotation,d=this.m.position,g=this.m.rotation,h={R:0},k=new THREE.Vector3,l=new THREE.Euler;TweenMax.to(h,2,{R:1,ease:Sine.easeIn,onUpdate:function(){k=k.copy(d).lerp(b,h.R);this.m.position.copy(k);l=J.v.K.nf(g,c,h.R,l);this.m.rotation.copy(l)},onUpdateScope:this,onComplete:this.ux,onCompleteScope:this})};
e.Uk=function(){var a=this.f.ob;a.removeItem(this);this.le.add(this.m);var a=Hg(a,this.name),b=a.rotation,c=J.v.K.ho(this.le,a.position),d=J.v.K.Jr(this.le,b),g=this.data.position.clone().setY(this.data.position.y+10),h=this.data.rotation,k={R:0},l=new THREE.Vector3,n=new THREE.Euler;TweenMax.to(k,1,{R:1,immediateRender:!0,ease:Sine.easeInOut,onUpdate:function(){l=l.copy(c).lerp(g,k.R);this.m.position.copy(l);n=J.v.K.nf(d,h,k.R,n);this.m.rotation.copy(n)},onUpdateScope:this});TweenMax.to(this.m.position,
1,{y:this.data.position.y,delay:1.5,ease:Bounce.easeOut,onComplete:this.Lw,onCompleteScope:this})};e.Ma=function(){Gg.i.Ma.call(this);this.Qq.start()};e.Ca=function(){Gg.i.Ca.call(this);this.Qq.stop()};e.ux=function(){this.sd=!0;this.Ca();Ig(this.f.ob,this)};e.Lw=function(){this.$k=!0;this.Fa()};e.ab=function(){this.$k?this.ff=1E3:this.sd?this.sd&&!this.$k&&(this.ff=3E3,this.Uk()):this.ff=1E3;Gg.i.ab.call(this)};J.ea.vy.entities={};function Jg(a,b,c){zg.call(this,a,b,c);this.bg=null}t(Jg,zg);
Jg.prototype.Ya=function(){if(Jg.i.Ya.call(this)){var a=U(T.F(),this.f.$+"."+this.f.id+"."+this.name+"-in-plate-texture");this.bg=new THREE.Texture(a);this.bg.needsUpdate=!0;"refrigerator"!==this.m.parent.name&&(this.m.material.map=this.bg)}};Jg.prototype.Ob=function(){Jg.i.Ob.call(this)&&(this.bg.dispose(),this.bg=null)};
function Kg(a,b,c){N.call(this);this.target=a;this.handle=b||a;this.nl=c||new Bf(NaN,NaN,NaN,NaN);this.Qa=Xc(a);this.Za=new L(this);Jd(this,oa(Kd,this.Za));K(this.handle,["touchstart","mousedown"],this.$s,!1,this)}t(Kg,N);var Lg=u||Wa&&y("1.9.3");e=Kg.prototype;e.clientX=0;e.clientY=0;e.screenX=0;e.screenY=0;e.Kf=0;e.Lf=0;e.Nc=0;e.pb=0;e.Pb=!0;e.ke=!1;e.zg=0;e.Sv=!1;e.cp=!1;e.Bd=function(a){this.Pb=a};
e.S=function(){Kg.i.S.call(this);$d(this.handle,["touchstart","mousedown"],this.$s,!1,this);this.Za.removeAll();Lg&&this.Qa.releaseCapture();this.handle=this.target=null};function Mg(a){ea(a.Qs)||(a.Qs=Sf(a.target));return a.Qs}
e.$s=function(a){var b="mousedown"==a.type;if(!this.Pb||this.ke||b&&(!Qd(a)||w&&Na&&a.ctrlKey))this.dispatchEvent("earlycancel");else{Ng(a);if(0==this.zg)if(this.dispatchEvent(new Og("start",this,a.clientX,a.clientY)))this.ke=!0,a.preventDefault();else return;else a.preventDefault();var b=this.Qa,c=b.documentElement,d=!Lg;this.Za.j(b,["touchmove","mousemove"],this.Rv,d);this.Za.j(b,["touchend","mouseup"],this.Wk,d);Lg?(c.setCapture(!1),this.Za.j(c,"losecapture",this.Wk)):this.Za.j(b?dd(b):window,
"blur",this.Wk);u&&this.Sv&&this.Za.j(b,"dragstart",Md);this.dy&&this.Za.j(this.dy,"scroll",this.Cx,d);this.clientX=this.Kf=a.clientX;this.clientY=this.Lf=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.cp?(a=this.target,b=a.offsetLeft,c=a.offsetParent,c||"fixed"!=If(a,"position")||(c=Xc(a).documentElement),c?(Wa?(d=Vf(c),b+=d.left):kb(8)&&(d=Vf(c),b-=d.left),a=Sf(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Nc=a;this.pb=this.target.offsetTop;this.Lo=ld(Vc(this.Qa));
pa()}};e.Wk=function(a){this.Za.removeAll();Lg&&this.Qa.releaseCapture();if(this.ke){Ng(a);this.ke=!1;var b=Pg(this,this.Nc),c=Qg(this,this.pb);this.dispatchEvent(new Og("end",this,a.clientX,a.clientY,0,b,c))}else this.dispatchEvent("earlycancel")};function Ng(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ec.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.init(a.ec.changedTouches[0],a.currentTarget)}
e.Rv=function(a){if(this.Pb){Ng(a);var b=(this.cp&&Mg(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.ke){var d=this.Kf-this.clientX,g=this.Lf-this.clientY;if(d*d+g*g>this.zg)if(this.dispatchEvent(new Og("start",this,a.clientX,a.clientY)))this.ke=!0;else{this.Bc||this.Wk(a);return}}c=Rg(this,b,c);b=c.x;c=c.y;this.ke&&this.dispatchEvent(new Og("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(Sg(this,a,b,c),a.preventDefault())}};function Rg(a,b,c){var d=ld(Vc(a.Qa));b+=d.x-a.Lo.x;c+=d.y-a.Lo.y;a.Lo=d;a.Nc+=b;a.pb+=c;b=Pg(a,a.Nc);a=Qg(a,a.pb);return new H(b,a)}e.Cx=function(a){var b=Rg(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Sg(this,a,b.x,b.y)};function Sg(a,b,c,d){a.vg(c,d);a.dispatchEvent(new Og("drag",a,b.clientX,b.clientY,0,c,d))}
function Pg(a,b){var c=a.nl,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function Qg(a,b){var c=a.nl,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}e.vg=function(a,b){this.cp&&Mg(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};e.gl=function(){return this.ke};
function Og(a,b,c,d,g,h,k){Ld.call(this,a);this.clientX=c;this.clientY=d;this.left=ea(h)?h:b.Nc;this.top=ea(k)?k:b.pb}t(Og,Ld);J.u.na={};
J.u.na.bd=function(a){var b='<div id="book"><button class="icon icon-close close-button"></button><h2>Feng Shui Tips Collected <span class="tip-counter"></span></h2><div class="scroller-wrapper"><div class="scroller"><div class="inner"><ul>';a=a.Dd;for(var c=a.length,d=0;d<c;d++){var g=a[d],b=b+('<li class="tip-module" data-tip-id="'+g.id+'"><div class="card"><div class="curtain"><div class="wrapper unlocked"><div class="icon icon-'+g.icon+'"></div><h1>'+g.name+"</h1><h2><span>Located at</span>"+
g.$+'</h2></div><div class="wrapper locked"><div class="icon icon-lock"></div><h1>Unknown Tip</h1><h2><span>Unlock in</span>'+g.$+'</h2></div></div><div class="detail"><div class="screen" data-src="'+g.jy+'"><div class="loader"></div></div><div class="advice"><h3>'+g.name+'</h3><div class="scroller"><div class="content"><p>'+(g.Hl?g.Hl+"<br>":"")+(g.Ok?g.Ok+"<br>":""));if(g.xa.descriptions)for(var h=qd(g.xa.descriptions),k=h.length,l=0;l<k;l++)b+=g.xa.descriptions[h[l]]+"</br>";b+='</p></div><div class="scrollbar"><button class="handle"></button></div></div><ul class="share"><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://fengshuirealtime.com/assets/html/share/'+
g.id+'.html" target="_blank" class="icon icon-facebook"></a></li><li><a href="https://twitter.com/intent/tweet?original_referer=http://fengshuirealtime.com/assets/html/share/'+g.id+'.html" target="_blank" class="icon icon-twitter"></a></li><li><a href="https://plus.google.com/share?url=http://fengshuirealtime.com/assets/html/share/'+g.id+'.html" target="_blank" class="icon icon-google"></a></li></ul></div></div></div></li>'}return b+'</ul></div></div></div><div class="scrubber"><button class="handle"></button></div></div>'};
J.P={};function Tg(a,b){N.call(this);this.domElement=a;this.Vd=I("handle",this.domElement);this.ta=b;this.k=new L(this);this.Bg=!1;this.yn=0;this.Mm=!1;this.Nd=new Bf(0,0,0,0);this.U=new Kg(this.Vd,null,this.Nd);this.U.vg=s(this.Jw,this)}t(Tg,N);e=Tg.prototype;e.t=function(){this.k.j(this.ta,"scroll",this.Cs,!1,this);this.k.j(this.ta,"mouseover",this.gx,!1,this);this.k.j(this.ta,"mouseout",this.fx,!1,this);R(this.ta,"overflow","auto");this.resize()};
e.n=function(){this.k.removeAll();R(this.ta,"overflow","hidden")};e.resize=function(){this.yn=Pf(this.ta).height;var a=this.yn/this.ta.scrollHeight,b=Math.round(100*a);R(this.Vd,"height",b+"%");this.Mm=!(100<=b||0>=b);O(this.domElement,this.Mm);b=Pf(this.domElement).height;this.Nd.height=b-b*a;this.U.nl=this.Nd||new Bf(NaN,NaN,NaN,NaN)};e.scrollTo=function(a){this.ta.scrollTop=a;this.Cs()};e.Jw=function(a,b){Jf(this.Vd,a,b);this.ta.scrollTop=b/this.Nd.height*(this.ta.scrollHeight-this.yn)};
e.Cs=function(){var a=Math.round(this.ta.scrollTop/this.ta.scrollHeight*100);R(this.Vd,"top",a+"%")};e.gx=function(){this.Bg=this.Mm};e.fx=function(a){a.relatedTarget?this.Bg=!1:a.relatedTarget&&!jd(a.currentTarget,a.relatedTarget)&&(this.Bg=!1)};J.ea.na={};
J.ea.na.cd=function(a,b){N.call(this);this.domElement=a;this.St=I("card",this.domElement);var c=I("scroller",this.domElement),d=I("content",c),c=I("scrollbar",c);this.zc=new Tg(c,d);this.$h=M(".share a",this.domElement);this.id=this.domElement.getAttribute("data-tip-id");this.index=b;this.x=0;this.size=new Sc;this.Fq=J.ea.na.cd.yt;this.Bp=this.Fq.pi();this.Ru=J.ea.na.cd.Et;this.Qu=J.ea.na.cd.Dt;this.Kd=this.an=0;this.tq=this.fu=!1;this.Pq=new L(this);this.Rm=new L(this)};t(J.ea.na.cd,N);e=J.ea.na.cd.prototype;
e.t=function(){this.Pq.j(this.domElement,"click",this.Y,!1,this)};e.n=function(){this.Pq.removeAll();this.Rm.removeAll()};e.setActive=function(a){if(a&&this.tq){P(this.domElement,"active");if(!this.fu){var b=I("screen",this.domElement),c=new Image;c.src=b.getAttribute("data-src");Zd(c,"load",function(){R(b,"background-image","url("+c.src+")");X(b,"loaded",!0)})}this.zc.t();C(this.$h,function(a){this.Rm.j(a,"click",this.Li,!1,this)},this)}else Q(this.domElement,"active"),this.zc.n(),this.Rm.removeAll()};
e.setX=function(a){this.x=a;R(this.domElement,"transform","translateX("+a+"px)")};e.setSize=function(a){this.Kd=a.width*this.Ru;this.Kd=Math.max(this.Fq.width,this.Kd);var b=Math.max(450,0.6*a.height),b=Math.min(b,this.Kd/this.Bp);this.Kd=b*this.Bp;this.an=a.width*this.Qu;this.size.width=this.Kd+2*this.an;this.size.height=b;Of(this.St,this.Kd,b);Of(this.domElement,this.size);this.zc.resize();return this.size};e.Bg=function(){return this.zc.Bg};
e.Fa=function(){this.tq=!0;X(this.domElement,"unlocked",!0)};e.Y=function(){this.dispatchEvent(J.d.e.G)};e.Li=function(a){a.preventDefault();J.v.Utils.Fl(a.currentTarget.href)};J.ea.na.cd.Et=0.35;J.ea.na.cd.Dt=0.025;J.ea.na.cd.yt=new Sc(300,440);function Ug(a,b){N.call(this);var c=this.dc=a,c=ia(c)&&1==c.nodeType?this.dc:this.dc?this.dc.body:null;this.Vv=!!c&&Sf(c);this.Xr=K(this.dc,Wa?"DOMMouseScroll":"mousewheel",this,b)}t(Ug,N);
Ug.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.ec;if("mousewheel"==a.type){c=1;if(u||w&&(Oa||y("532.0")))c=40;d=Vg(-a.wheelDelta,c);ea(a.wheelDeltaX)?(b=Vg(-a.wheelDeltaX,c),c=Vg(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ea(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;r(this.xo)&&(b=ac(b,-this.xo,this.xo));r(this.pl)&&(c=ac(c,-this.pl,this.pl));this.Vv&&(b=-b);b=new Wg(d,a,b,c);this.dispatchEvent(b)};function Vg(a,b){return w&&(Na||Pa)&&0!=a%b?a:a/b}
Ug.prototype.S=function(){Ug.i.S.call(this);ae(this.Xr);this.Xr=null};function Wg(a,b,c,d){Od.call(this,b);this.type="mousewheel";this.detail=a;this.Nc=c;this.pb=d}t(Wg,Od);
J.ea.na.bd=function(){N.call(this);var a=Ze(Ve.F());this.Va=D(a,function(a){a.rf&&a.j(J.d.e.Hb,this.ve,!1,this);return a.rf},this);this.domElement=od(J.u.na.bd,{Dd:this.Va});Yc("main").appendChild(this.domElement);this.Ne=I("close-button",this.domElement);this.av=I("tip-counter",this.domElement);this.ta=I("scroller",this.domElement);this.Zh=I("inner",this.ta);this.Zq=I("scrubber",this.domElement);this.Vd=I("handle",this.Zq);this.Lj=this.ok=0;this.U=new Kg(this.Vd);this.U.zg=Math.pow(10,2);this.Nd=
new Bf(0,0,0,0);a=Zc(this.domElement);s(this.uy,this);this.Ab=E(a,function(a,c){var d=new J.ea.na.cd(a,c);d.Sa=this;return d},this);this.qr={};C(this.Ab,function(a){this.qr[a.id]=a},this);this.hi=[];this.uj=null;this.tj=0;this.ee=null;this.nd=this.ld=0;this.ci=function(a,c){return a+c};this.Ac=null;this.Ib=new TimelineMax;this.Uf=s(this.D,this);this.Nu=s(this.ay,this);this.qu=s(this.aw,this);this.Wq=this.xq=this.xb=null;this.uc=new Ug(this.domElement);this.bn=30;this.uc.xo=this.bn;this.uc.pl=this.bn;
this.k=new L(this);K(J.hc,J.d.e.G,this.Cf,!1,this);this.D(!0);Xg(this)};t(J.ea.na.bd,N);m(J.ea.na.bd);e=J.ea.na.bd.prototype;
e.t=function(){this.k.j(window,"resize",this.N,!1,this);this.k.j(this.Ne,"click",this.D,!1,this);this.k.j(this,J.d.e.G,this.Mx,!1,this);this.k.j(this,J.d.e.Fd,this.Nx,!1,this);this.k.j(this.uc,"mousewheel",this.Bf,!1,this);this.k.j(this.U,"drag",this.vd,!1,this);this.k.j(this.U,"start",this.xd,!1,this);this.k.j(this.U,"end",this.wd,!1,this);this.xb=J.M.bind(this.Uf,J.M.key.Ce,!0);this.xq=J.M.bind(this.Nu,J.M.key.LEFT);this.Wq=J.M.bind(this.qu,J.M.key.RIGHT);C(this.Ab,function(a){a.t()})};
e.n=function(){this.k.removeAll();Yg(J.M,this.xb);Yg(J.M,this.xq);Yg(J.M,this.Wq);C(this.Ab,function(a){a.n()})};
e.resize=function(){this.ee=J.ka;this.hi=E(this.Ab,function(a){return a.setSize(this.ee).width},this);R(this.ta,"height",this.Ab[0].size.height+"px");C(this.Ab,function(a,c){var d=Ib(this.hi.slice(0,c),this.ci,0);a.setX(d)},this);var a=Ib(this.hi,this.ci,0);this.ok=Pf(this.Zq).width;this.Lj=this.ee.width/a*this.ok;R(this.Vd,"width",this.Lj+"px");this.Nd.width=this.ok-this.Lj;this.U.nl=this.Nd||new Bf(NaN,NaN,NaN,NaN)};
e.uy=function(a,b){this.hi[a]=b;C(this.Ab,function(a,b){var g=Ib(this.hi.slice(0,b),this.ci,0);a.setX(g)},this)};
e.H=function(a){O(this.domElement,!0);this.t();this.resize();var b=0;a&&(b=Mb(this.Ab,function(b){return b.domElement.getAttribute("data-tip-id")===a}));Zg(this,b,!0);this.dispatchEvent(J.d.e.cb);this.Ib.clear();for(var c=[],d=Math.max(0,b-2),b=Math.min(b+2,this.Ab.length);d<=b;d++){var g=this.Ab[d],h=g.domElement;TweenMax.set(h,{x:g.x+this.ee.width});g=TweenMax.to(h,1.2,{x:g.x,ease:Strong.easeOut});c.push(g)}this.Ib.add(c,"+=0","start",0.1);this.Ib.play();J.T.Ta("confirm")};
e.D=function(){O(this.domElement,!1);this.n();J.hc.Pg("");J.T.Ta("close");this.dispatchEvent(J.d.e.Da)};function $g(a){var b=E(a.Ab,function(a){return a.Kd+2*a.an},a),c=Ib(b,a.ci,0),d=b[b.length-1];return{ht:b,scrollWidth:c,ml:-(a.ee.width-b[0])/2,So:c-d-(a.ee.width-d)/2}}
function Zg(a,b,c){TweenMax.ticker.removeEventListener("tick",a.update,a);a.uj&&a.uj.setActive(!1);a.tj=b;a.uj=a.Ab[b];a.uj.setActive(!0);var d=$g(a).ht,g=d[b];b=Ib(d.slice(0,b),a.ci,0)-(a.ee.width-g)/2;a.Ac=TweenMax.to(a,c?0:0.65,{ld:b,nd:b,ease:Strong.easeOut,onUpdate:a.xr,onUpdateScope:a})}e.ay=function(){if(!this.Ac||!this.Ac.isActive()){var a=Math.max(0,this.tj-1);Zg(this,a)}};e.aw=function(){if(!this.Ac||!this.Ac.isActive()){var a=Math.min(this.Ab.length-1,this.tj+1);Zg(this,a)}};
e.xr=function(){R(this.Zh,"transform","translateX("+-this.ld+"px)");if(!this.U.gl()){var a=$g(this),b=a.ml;Jf(this.Vd,(this.ld-b)/(a.So-b)*(this.ok-this.Lj),0)}};function Xg(a){var b=0;C(a.Va,function(a){a.pa&&(b++,this.qr[a.id].Fa())},a);a.av.innerHTML=b+"/"+a.Va.length}e.vd=function(){var a=Math.max(0,Math.min(1,this.U.Nc/this.Nd.width)),b=$g(this);this.nd=cc(b.ml,b.So,a)};
e.xd=function(){TweenMax.ticker.addEventListener("tick",this.update,this);this.Ac&&this.Ac.isActive()&&this.Ac.kill();Y(this.ta,"zoom-in","zoom-out")};e.wd=function(){Y(this.ta,"zoom-out","zoom-in")};e.Mx=function(a){Zg(this,a.target.index)};e.Nx=function(){this.D()};
e.Bf=function(a){if(F(this.Ab,function(a){return!0===a.Bg()}))return!1;this.nd+=cc(0,this.ee.width/4,(a.Nc||a.pb)/this.bn);a=$g(this);var b=a.ml;this.nd=Math.max(Math.min(a.So,this.nd),b);TweenMax.ticker.addEventListener("tick",this.update,this);this.Ac&&this.Ac.isActive()&&this.Ac.kill()};
e.update=function(){this.ld+=0.1*(this.nd-this.ld);this.xr();if(1>=Math.abs(this.ld-this.nd)&&!this.U.gl()){TweenMax.ticker.removeEventListener("tick",this.update,this);this.ld=this.nd;var a;a:{a=this.ld;for(var b=$g(this),c=b.ht,d=c.length,g=b.ml,b=0;b<d-1;b++){var h=g+c[b];if(a>=g&&a<h){a=b;break a}g=h}a=d-1}Zg(this,a)}};e.Cf=function(a){var b=Oe(a.bj,Re.gp);(a=(a=Oe(a.bj,Re.rp))?a.tipId:null)&&(b=!0);b&&this.H(a)};e.ve=function(){Xg(this)};e.N=function(){this.resize();Zg(this,this.tj||0)};
function ah(a,b,c){W.call(this,a,b,c);this.rq=!1;this.Wf=null}t(ah,W);ah.prototype.init=function(){ah.i.init.call(this);this.Wf=this.f.ma["sewingmachine-cover"];this.Wf.Ng()};ah.prototype.Ma=function(){ah.i.Ma.call(this);this.rq||(Cg(this.Wf,this.m),TweenMax.fromTo(this.Wf.m.position,2,{y:this.Wf.m.position.y+30},{y:this.Wf.m.position.y,immediateRender:!0,ease:Strong.easeInOut,onComplete:this.Gw,onCompleteScope:this}))};ah.prototype.Gw=function(){this.Fa();this.Ca();this.rq=!0};
function bh(a,b,c){Gg.call(this,a,b,c);this.fg=null}t(bh,Gg);bh.prototype.Ya=function(){bh.i.Ya.call(this);var a=U(T.F(),this.f.$+"."+this.f.id+".bear-on-bed-texture");this.fg=new THREE.Texture(a);this.fg.needsUpdate=!0;this.sd&&(this.m.material.map=this.fg)};bh.prototype.Ob=function(){this.fg.dispose();this.fg=null;this.m.material.map=null;bh.i.Ob.call(this)};
bh.prototype.Si=function(){bh.i.Si.call(this);this.m.material.map=this.fg;this.m.material.needsUpdate=!0;TweenMax.to(this.f.ma.drawer.m.position,1,{delay:2,z:-11})};function ch(a,b,c){W.call(this,a,b,c);this.Rh=null;var d=[];this.m.traverse(function(a){a instanceof THREE.Mesh&&4===a.geometry.vertices.length&&d.push(a)});this.ig=0<d.length?d:[this.m];this.Id=null;this.Vq={}}t(ch,W);
ch.prototype.Ya=function(){if(ch.i.Ya.call(this)){var a=this.B.xa.pictures,b=T.F(),c=this.Rh=rb(a,function(a,c){var h=U(b,this.f.$+"."+this.f.id+".pictures."+c),h=new THREE.Texture(h);h.needsUpdate=!0;return h},this);this.m.traverse(function(a){a.userData.id&&(a.material.map=c[a.userData.id])})}};ch.prototype.Ob=function(){ch.i.Ob.call(this)&&(z(this.Rh,function(a){a.dispose()}),this.Rh=null)};ch.prototype.Ma=function(){ch.i.Ma.call(this);dh(this,this.ig[0])};
ch.prototype.Ca=function(){ch.i.Ca.call(this);dh(this,null)};function dh(a,b){a.Id=b;C(a.ig,function(a){var d;d=a!==b&&b?7237230:16777215;var g={R:0,Gv:a.material.color.clone(),qy:new THREE.Color(d)};TweenMax.to(g,0.25,{R:1,onUpdate:function(){a.material.color.copy(g.Gv).lerp(g.qy,g.R);a.material.needsUpdate=!0}})})}function eh(a,b){N.call(this);this.ua=new Sc(a,b);this.Ro=this.Ui=1;this.width=this.ua.width;this.height=this.ua.height;K(window,"resize",this.N,!1,this)}t(eh,N);e=eh.prototype;
e.set=function(a,b){this.ua.width=r(a)?a:this.ua.width;this.ua.height=r(b)?b:this.ua.height;this.width=this.ua.width;this.height=this.ua.height;this.dispatchEvent({type:"resize",width:this.ua.width,height:this.ua.height})};e.qf=function(){return this.ua.qf()};e.reset=function(){this.update(1,1)};e.pi=function(){return this.ua.pi()};e.update=function(a,b){this.Ui=r(a)?a:this.Ui;this.Ro=r(b)?b:this.Ro;this.set(J.ka.width*this.Ui,J.ka.height*this.Ro);return this};e.N=function(){this.update()};
function fh(a,b,c){W.call(this,a,b,c);this.Ka=new createjs.LoadQueue(!0);createjs.LoadQueue.loadTimeout=1E5;this.Fu=s(this.onLoadComplete,this);this.Gu=s(this.cx,this);this.fa=this.m.children[0];this.objects={};C(b.objects,function(a){this.objects[a]=null},this);this.Tj=null}t(fh,W);
function gh(a,b){var c=a.m.children[0];c&&(a.m.remove(c),delete a.f.ma[c.name]);a.f.ma[b.name]=b;a.fa=b.m;a.m.add(a.fa);TweenMax.fromTo(a.fa.scale,1,{y:1.05},{y:1,ease:Elastic.easeOut});TweenMax.fromTo(a.fa.position,0.5,{y:1.5},{y:0,ease:Bounce.easeOut})}
fh.prototype.onLoadComplete=function(){var a=this.Ka.getResult("data"),b=this.Ka.getResult("texture"),a=J.v.K.Yr.parse(a),b=new THREE.Texture(b);b.needsUpdate=!0;a.material.map=b;a.material.needsUpdate=!0;b=new zg(a,{},this.f);b.init();this.objects[this.Tj]=b;gh(this,b);this.Fa();this.dispatchEvent({type:J.d.e.Tf,id:this.Tj})};fh.prototype.cx=function(){};
function hh(a,b){this.wj=a;for(var c=[],d=0;6>d;d++){var g=new THREE.MeshBasicMaterial({transparent:!0,side:THREE.BackSide});g.shading=THREE.FlatShading;g.fog=!1;c.push(g)}d=new THREE.BoxGeometry(1E5,1E5,1E5);this.jb=new THREE.MeshFaceMaterial(c);this.jb.shading=THREE.FlatShading;this.jb.fog=!1;c=new THREE.Mesh(d,this.jb);c.position.y=-8E3;c.name="skybox";zg.call(this,c,{},b);this.opacity=1;Cg(this)}t(hh,zg);
hh.prototype.Ya=function(){if(hh.i.Ya.call(this)){var a="xpos xneg ypos yneg zpos zneg".split(" ");C(this.jb.materials,function(b,c){var d=new THREE.Texture(this.wj[a[c]]);d.needsUpdate=!0;b.map=d;b.needsUpdate=!0},this)}};hh.prototype.Ob=function(){hh.i.Ob.call(this)&&C(this.jb.materials,function(a){a.map.dispose();a.map=null;a.needsUpdate=!0},this)};hh.prototype.Qf=function(a){this.opacity=r(a)?a:this.opacity;C(this.jb.materials,function(a){a.opacity=this.opacity},this)};
function ih(a,b,c){zg.call(this,a,b,c)}t(ih,zg);ih.prototype.init=function(){ih.i.init.call(this);var a=this.m.material;a.needsUpdate=!0;a.envMap=Ag(this.f,this.qb())};function jh(a,b,c,d,g){this.yk=b;this.or=c;this.vu=d;this.texture=a;this.texture.needsUpdate=!0;this.texture.wrapS=this.texture.wrapT=THREE.RepeatWrapping;this.texture.repeat.set(1/this.yk,1/this.or);this.mr=g;this.uh=this.th=0;this.ym=new THREE.Clock(!1)}t(jh,N);jh.prototype.start=function(){this.ym.start();ef(this)};
jh.prototype.stop=function(){this.ym.stop();ff(this)};jh.prototype.Db=function(){var a;for(this.th+=1E3*this.ym.getDelta();this.th>this.mr;)this.th-=this.mr,this.uh++,this.uh===this.vu&&(this.uh=0),a=this.uh%this.yk,this.texture.offset.x=a/this.yk,a=Math.floor(this.uh/this.yk),this.texture.offset.y=a/this.or};
function kh(a,b,c){W.call(this,a,b,c);this.On=this.Nn=this.Ik=this.qg=this.En=this.df=null;this.Gn=30;this.Cn=this.kr=this.Fn=0;this.zj=!1;this.Xb=this.Me=null;this.Nj=this.Mj=!1;this.U=new Kg(this.f.domElement);this.U.zg=Math.pow(5,2);this.U.vg=ca}t(kh,W);e=kh.prototype;e.init=function(){kh.i.init.call(this);this.qg=this.f.ma["window-left"];this.Ik=this.f.ma["window-right"];this.Nn=this.f.ma["window-left-switch"];this.On=this.f.ma["window-right-switch"]};
e.Ma=function(){kh.i.Ma.call(this);lh(this,this)};e.Ca=function(){kh.i.Ca.call(this)};function mh(a,b){a.Zb.removeAll();a.df=b;var c=b.$i,d=a.f.Q.control,c={R:0,Ub:d.getPosition().clone(),Oc:c.position,Jf:jf(d).clone(),oe:c.rotation,If:Z(d),ne:c.fov};a.Me=TweenMax.to(c,1,{R:1,ease:Sine.easeInOut,onUpdate:a.Ki,onUpdateParams:[c],onUpdateScope:a,onComplete:a.Do,onCompleteScope:a})}
function lh(a,b){a.df=b===a.qg?a.qg:a.Ik;a.En=a.df===a.qg?a.Nn:a.On;a.Cn=Z(a.f.Q.control);a.Zb.j(a.f.domElement,J.d.e.lp,a.Iw,!1,a);a.Zb.j(a.U,"start",a.xd,!1,a);a.Zb.j(a.U,"drag",a.vd,!1,a);a.Zb.j(a.U,"end",a.wd,!1,a)}e.Iw=function(a){var b=this.f.Cb.cc,c=this.f.Fb,d=[Bg(this.df)];this.zj=0<yg(a.clientX,a.clientY,d,b,c).length};
e.xd=function(){if(this.zj){this.kr=this.En.m.position.y;var a={fov:Z(this.f.Q.control)};this.Xb=TweenMax.to(a,1,{fov:this.Cn-5,ease:Strong.easeOut,onUpdate:this.Uc,onUpdateParams:[a],onUpdateScope:this})}};e.vd=function(){this.zj&&(this.En.m.position.y=ac(this.kr-this.U.pb/J.ka.height*(this.Gn-this.Fn),this.Fn,this.Gn))};
e.wd=function(){if(this.zj){this.Mj=this.Nn.m.position.y===this.Gn;this.Nj=this.On.m.position.y===this.Fn;var a=this.df===this.Ik&&this.Nj;if(this.df===this.qg&&this.Mj||a)a={fov:Z(this.f.Q.control)},this.Xb=TweenMax.to(a,1,{fov:this.Cn,onUpdate:this.Uc,onUpdateParams:[a],onUpdateScope:this,onComplete:this.Eo,onCompleteScope:this})}};e.Ki=function(a){this.f.Q.control.lerp(a.Ub,a.Oc,a.Jf,a.oe,a.If,a.ne,a.R)};e.Do=function(){lh(this,this.df)};e.Uc=function(a){this.f.Q.control.setFov(a.fov)};
e.Eo=function(){this.Mj&&this.Nj?(this.Fa(),this.Ca()):this.Mj?mh(this,this.Ik):this.Nj&&mh(this,this.qg)};function nh(a,b,c){W.call(this,a,b,c);this.Tt=this.m.getObjectByName("cat");this.br=TweenMax.to(this.Tt.scale,4,{y:1.04,repeat:-1,repeatDelay:0.5,yoyo:!0,paused:!0,ease:Sine.easeInOut})}t(nh,W);nh.prototype.ab=function(){nh.i.ab.call(this);this.br.play()};nh.prototype.tb=function(){nh.i.tb.call(this);this.br.pause()};J.controllers.controls={};
function oh(a,b,c){N.call(this);this.W=a;this.f=b;this.ga=this.f.scene;this.k=new L(this);this.isPaused=this.isEnabled=!1;this.vc={fov:0,Ao:0,z:0,bs:0};this.Mb=new THREE.Euler(0,0,0,"YXZ");this.Ku=this.W.position.clone();this.Lu=this.W.rotation.clone();this.kb=new THREE.Object3D;this.kb.add(this.W);this.Pa=new THREE.Object3D;this.Pa.add(this.kb);this.$j=Yc("main");this.Re=c;this.ga.add(this.Pa);this.reset()}t(oh,N);e=oh.prototype;e.pe=function(){return this.W};e.getPosition=function(){return this.Pa.position};
function jf(a){a.Mb.x=a.kb.rotation.x;a.Mb.y=a.Pa.rotation.y;return a.Mb}function Z(a){return a.W.fov}function ph(a,b){var c=new THREE.Vector3(0,0,-1);c.applyEuler(a.kb.rotation,a.kb.rotation.order);c.applyEuler(a.Pa.rotation,a.Pa.rotation.order);c.normalize();b||c.setY(0);return c}function qh(a){var b=(new THREE.Raycaster(a.getPosition(),ph(a,!0))).intersectObject(a.f.Vg.m);return 0<b.length?b[0].point:a.f.scene.position}
e.setPosition=function(a,b,c){a instanceof THREE.Vector3?this.Pa.position.copy(a):this.Pa.position.set(a,b,c)};e.hb=function(a,b){a instanceof THREE.Euler?(this.Mb.x=a.x,this.Mb.y=a.y):(this.Mb.x=a,this.Mb.y=b);this.kb.rotation.x=this.Mb.x;this.Pa.rotation.y=this.Mb.y};e.setFov=function(a){this.W.fov=a;this.W.updateProjectionMatrix()};e.reset=function(){this.W.position.set(0,0,0);this.W.rotation.set(0,0,0);this.kb.position.set(0,0,0);this.kb.rotation.set(0,0,0);this.Pa.position.copy(this.Ku);this.Pa.rotation.copy(this.Lu)};
e.lerp=function(a,b,c,d,g,h,k){var l=this.getPosition(),n=jf(this);a=l.copy(a).lerp(b,k);c=J.v.K.nf(c,d,k,n);g=cc(g,h,k);this.setPosition(a);this.hb(c);this.setFov(g)};e.t=function(){this.k.j(this.Re,"click",this.Y,!1,this);this.k.j(this.Re,J.d.e.lp,this.Hg,!1,this);TweenMax.ticker.addEventListener("tick",this.update,this);P(this.f.domElement,"grab")};e.n=function(){this.k.removeAll();TweenMax.ticker.removeEventListener("tick",this.update,this);Q(this.f.domElement,"grab");Q(this.$j,"grabbing")};
e.enable=function(a){if(this.isEnabled===a)return!1;(this.isEnabled=a)?this.t():this.n();return!0};
e.pause=function(a){if(this.isPaused!==a&&this.isEnabled)return(this.isPaused=a)?(this.vc.Ao=this.vc.fov=Z(this),this.vc.bs=this.vc.z=0,TweenMax.to(this.vc,0.8,{fov:this.vc.Ao+8,z:5,ease:Quad.easeInOut,onUpdate:this.ws,onUpdateScope:this,onStart:this.tx,onStartScope:this})):TweenMax.to(this.vc,0.8,{fov:this.vc.Ao,z:this.vc.bs,ease:Quad.easeInOut,onUpdate:this.ws,onUpdateScope:this,onComplete:this.rx,onCompleteScope:this}),this.isPaused};e.update=function(){};e.tx=function(){this.n()};
e.ws=function(){this.pe().position.z=this.vc.z;this.setFov(this.vc.fov)};e.rx=function(){this.t()};e.Y=function(){};e.Hg=function(a){a.preventDefault();this.k.j(this.Re,J.d.e.mp,this.ul,!1,this);this.k.j(document,J.d.e.op,this.qs,!1,this)};e.qs=function(a){a.preventDefault();this.k.Ia(this.Re,J.d.e.mp,this.ul,!1,this);this.k.Ia(document,J.d.e.op,this.qs,!1,this);Q(this.$j,"grabbing")};e.ul=function(a){a.preventDefault();P(this.$j,"grabbing")};function rh(a,b,c){oh.call(this,a,b,c);this.Ud=null}
t(rh,oh);rh.prototype.Eb=function(a){this.Ud=a;var b=this.Ud.origin.position;this.setPosition(b);var c=new THREE.Euler(0,0,0,"YXZ");a=J.v.K.Dc(b,a.qb());c.setFromQuaternion(a);this.hb(c);this.setFov(40)};rh.prototype.t=function(){rh.i.t.call(this);!0===this.Ud.data.Yg?J.hc.Tg(Re.mj):(this.f.ao.load(this.Ud.Vb),this.k.Ra(this.f.ao,J.d.e.Gb,this.onLoadComplete,!1,this))};rh.prototype.onLoadComplete=function(){zf(J.C.I.Vl,this.Co,this)};
rh.prototype.Co=function(){sh(this.Ud);qe(function(){th(this.Ud)},2500,this);this.f.dispatchEvent({type:J.d.e.G,$:this.f.$,Vb:this.Ud.Vb,xi:this.Ud.xi})};function uh(a,b,c){oh.call(this,a,b,c);this.Le=new THREE.Vector3(0,0,0);this.eb=new THREE.Euler(0,0,0,"YXZ");this.zk=new TimelineMax;this.Rd=null;this.zh=vh(this.f)}t(uh,oh);e=uh.prototype;
e.start=function(){var a=this.zh,b=a.qb(),c=a.origin.position,d=a.origin.rotation,a=(new THREE.Vector3).subVectors(c,b).setY(0).normalize().negate(),c=c.clone().setY(80),g=b.clone().setY(80).add(a.clone().multiplyScalar(150)),a=g.clone().add(a.clone().multiplyScalar(-80)),d=d.clone(),h=new THREE.Euler(0,0,0,"YXZ"),b=J.v.K.Dc(g,b);h.setFromQuaternion(b);this.setPosition(g);this.hb(h);this.setFov(60);Cg(this.f.wg);g={R:0,Ub:g,Oc:a};b=TweenMax.to(g,3,{R:1,ease:Sine.easeInOut,onUpdate:this.Jx,onUpdateParams:[g],
onUpdateScope:this,onComplete:this.Ix,onCompleteScope:this});g={R:0,Ub:a,Oc:c,Jf:h,oe:d,If:60,ne:40};c=TweenMax.to(g,3,{R:1,delay:1,ease:Quad.easeInOut,onStart:this.iw,onStartScope:this,onUpdate:this.jw,onUpdateParams:[g],onUpdateScope:this,onComplete:this.hw,onCompleteParams:[g],onCompleteScope:this});this.zk.add(b);this.zk.add(c)};e.Ux=function(){this.zh.open(!0);this.f.wg.Ng();this.zk.play();sh(this.zh)};e.Jx=function(a){var b=a.R,c=a.Oc;a=this.Le.copy(a.Ub).lerp(c,b);this.setPosition(a)};
e.Ix=function(){this.zk.pause();var a=this.f.ya;a.yd.Zg(this.f.$,this.f.id);a.yd.H();Zd(a.yd,J.d.e.fh,this.Ux,!1,this)};e.iw=function(){this.Rd=J.T.Ta("footsteps")};e.jw=function(a){var b=a.R,c=a.Oc,c=this.Le.copy(a.Ub).lerp(c,b);this.setPosition(c);var c=a.Jf,d=a.oe;this.eb.set(cc(c.x,d.x,b),cc(c.y,d.y,b),cc(c.z,d.z,b),"YXZ");this.hb(this.eb);this.setFov(cc(a.If,a.ne,b))};e.hw=function(a){this.Rd.pause();th(this.zh);this.zh.close();this.dispatchEvent({type:J.d.e.G,mode:V,jc:a.Oc,Of:a.oe,Nf:a.ne})};
J.ea.Ml={};J.ea.Ml.controls={};function $(a){N.call(this);this.domElement=a;this.Yh=this.Lc=this.Ja=this.f=null;this.sc=!1;this.k=new L(this)}t($,N);e=$.prototype;e.init=function(){};e.bb=function(a){this.f&&this.f.Q.Ia(J.d.e.G,this.Ha,!1,this);this.f=a;this.Ja=a.Cb;this.Lc=a.Fb;this.Yh=a.domElement;this.f.Q.j(J.d.e.G,this.Ha,!1,this)};e.t=function(){if(this.sc)return!1;this.sc=!0;this.f&&this.f.Q.j(J.d.e.G,this.Ha,!1,this);this.k.j(window,"resize",this.N,!1,this);this.N();return!0};
e.n=function(){if(this.sc)this.sc=!1;else return!1;this.k.removeAll();return!0};e.show=function(a){a="boolean"==typeof a?a:!0;X(this.domElement,"hidden",!a);a&&this.N()};e.Ha=function(){};e.N=function(){};function wh(a,b,c){$.call(this,a);this.Er={min:10,max:30};this.Nk=10;this.ge=this.Nk/2;this.Xf=this.Sd=xh(this);this.uc=new Ug(b);this.Iu=c||ca}t(wh,$);function xh(a,b){a.ge=r(b)?Math.round(cc(0,a.Nk,b)):a.ge;a.Sd=cc(a.Er.min,a.Er.max,a.ge/a.Nk);return a.Sd}
wh.prototype.reset=function(a){this.Xf=this.Sd=xh(this,a)};wh.prototype.t=function(){wh.i.t.call(this)&&this.k.j(this.uc,"mousewheel",this.Bf,!1,this)};wh.prototype.Bf=function(a){this.ge=0<a.pb?this.ge+1:this.ge-1;this.ge=Math.max(0,Math.min(this.ge,this.Nk));this.Sd=xh(this);ef(this)};wh.prototype.Db=function(){this.Xf+=0.1*(this.Sd-this.Xf);this.Iu(this.Xf);0.01>=Math.abs(this.Xf-this.Sd)&&ff(this)};
function yh(a,b,c){oh.call(this,a,b,c);this.Ea=null;this.zb=new THREE.Vector3;this.xh=900;this.Ke=new THREE.Box3;a=D(this.f.scene.children,function(a){if(qa(a.name,"floor")&&7>=a.name.length)return!0});C(a,function(a){a=(new THREE.Box3).setFromObject(a);this.Ke=this.Ke.union(a)},this);this.U=new Kg(this.f.domElement);this.U.zg=Math.pow(10,2);this.U.vg=ca;this.U.Bd(!1);new THREE.Vector3;new THREE.Vector3;new THREE.PerspectiveCamera;this.Kn=new THREE.Mesh(new THREE.BoxGeometry(20,20,20),new THREE.MeshBasicMaterial({color:16711680,
wireframe:!0,wireframeLinewidth:2}));this.Kn.material.fog=!1;J.debug&&this.f.scene.add(this.Kn);a=ed("div");b=s(this.setFov,this);this.rg=new wh(a,this.f.domElement,b);this.Na={x:0,y:0,Kf:0,Lf:0};this.gr=0;this.eb=new THREE.Euler(0,0,0,"YXZ")}t(yh,oh);e=yh.prototype;
e.Eb=function(a,b){this.zb.copy(this.f.scene.position);this.zb.set(this.zb.x,0,this.zb.z);var c=a.negate().multiplyScalar(this.xh);this.setPosition(c.x,this.xh,c.z);c=J.v.K.Dc(this.getPosition(),this.zb);this.eb.setFromQuaternion(c);this.hb(this.eb);this.Kn.position.copy(this.zb);this.setFov(xh(this.rg,0.6));c=this.getPosition();this.gr=(bc(180*Math.atan2(this.zb.z-c.z,this.zb.x-c.x)/Math.PI,360)+90)*Math.PI/180;this.Na.x=0;this.Na.Kf=0;this.Na.y=1;this.Na.Lf=1;this.rg.reset();this.Ea=b};e.gl=function(){return this.U.gl()};
e.enable=function(a){if(!yh.i.enable.call(this,a))return!1;this.isEnabled?(this.rg.show(!0),this.update()):this.rg.show(!1);this.U.Bd(this.isEnabled)};e.t=function(){yh.i.t.call(this);this.k.j(this.U,"start",this.xd,!1,this);this.k.j(this.U,"drag",this.vd,!1,this);this.k.j(this.U,"end",this.wd,!1,this);this.k.j(J.hc,J.d.e.G,this.Cf,!1,this);this.k.j(this.f.ya,J.d.e.Fc,this.Is,!1,this);this.k.j(this.f.ya.tg,J.d.e.jj,this.Fo,!1,this);this.k.j(this.f.ya.Be,J.d.e.Wl,this.Go,!1,this);this.rg.t()};
e.n=function(){yh.i.n.call(this);this.rg.n()};e.update=function(){yh.i.update.call(this);var a=this.getPosition(),a=bc(180*Math.atan2(this.zb.z-a.z,this.zb.x-a.x)/Math.PI,360)+90,a=bc(a*Math.PI/180,2*Math.PI);this.dispatchEvent({type:J.d.e.Fc,Yi:a})};
function zh(a,b,c){var d=a.zb.clone().sub(a.getPosition()).normalize(),d=a.getPosition().clone().add(d.multiplyScalar(600)),d={R:0,Ub:a.getPosition().clone(),Oc:d,Jf:jf(a),oe:jf(a),If:Z(a),ne:Z(a)};TweenMax.to(d,1,{R:1,ease:Expo.easeOut,onStart:a.qw,onStartScope:a,onUpdate:a.Ki,onUpdateParams:[d],onUpdateScope:a,onComplete:b,onCompleteParams:c,onCompleteScope:a})}
e.xd=function(){this.Na.Kf=this.Na.x;this.Na.Lf=this.Na.y;TweenLite.killTweensOf(this.Na);ThrowPropsPlugin.untrack(this.Na);ThrowPropsPlugin.track(this.Na,"x,y")};e.vd=function(){this.Na.x=this.Na.Kf+this.U.Nc/this.f.Fb.width/2;this.Na.y=ac(this.Na.Lf-this.U.pb/(this.f.Fb.height/2),0.05,1);this.ns()};e.wd=function(){ThrowPropsPlugin.to(this.Na,{throwProps:{x:"auto",y:"auto",resistance:100},onUpdate:this.ns,onUpdateScope:this},4,0.5)};
e.ns=function(){var a=THREE.Math.degToRad(360*this.Na.x),b=ac(this.Na.y,0.05,1),a=this.gr+a;this.setPosition(this.xh*b*Math.sin(-a)+this.zb.x,this.xh,this.xh*b*Math.cos(-a)+this.zb.z);b=J.v.K.Dc(this.getPosition(),this.zb);this.eb.setFromQuaternion(b);this.hb(this.eb)};e.Go=function(a){zh(this,this.tw,[a.Qc])};e.Fo=function(a){"browse"===a.mode&&zh(this,this.rw,[])};e.Cf=function(a){(a=Oe(a.bj,Re.$l))&&zh(this,this.uw,[a])};e.qw=function(){this.f.ya.Be.n();this.n();J.T.Ta("thrust-down")};
e.Ki=function(a){var b=a.R;this.lerp(a.Ub,a.Oc,a.Jf,a.oe,a.If,a.ne,b);this.f.Hf.zi=-b};e.tw=function(a){var b=a.qb(),c=a.origin.position,d=(new THREE.Vector3).subVectors(c,b).setY(0).normalize(),c=c.clone().add(d.clone().multiplyScalar(50)).setY(80),d=new THREE.Euler(0,0,0,"YXZ"),b=J.v.K.Dc(c,b);d.setFromQuaternion(b);this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:tg,Pc:c,mf:d,lf:40,Qc:a})};
e.uw=function(a){a=Ah(this.f,a.objectId);var b=this.f.Q.tc[V],c=(new THREE.Vector3).subVectors(b.getPosition(),a.qb()).normalize(),c=a.qb().clone().add(c.multiplyScalar(100)),d=mf(J.El,this.f.Mh),c=qf(c,d),c=sf(c,d),g=d.Mf,c=(new THREE.Vector3(c[0]*g+g/2+d.Bi,0,c[1]*g+g/2+d.Ci)).setY(80),d=new THREE.Euler(0,0,0,"YXZ"),g=J.v.K.Dc(c,a.qb());d.setFromQuaternion(g);b.setPosition(c);b.hb(d);this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:rg,Pc:c,mf:d,lf:40,object:a})};
e.rw=function(){var a=this.f.Q.tc[V],b=a.getPosition(),a=jf(a).clone();a.x=Math.PI/4;this.setPosition(b);this.hb(a);this.setFov(40);this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:V})};function Bh(a,b,c){oh.call(this,a,b,c);this.Ea=null;this.Cp=new THREE.Euler(0,0,0,"YXZ");this.$d=J.v.K.Kl;this.Xn=0}t(Bh,oh);
Bh.prototype.Eb=function(a){var b=this.f.Q.tc[V],c=b.getPosition();jf(b);b=a.Wv?a.$i:null;console.log("set close up by special camera settings: ",b);if(!b){var d=Bg(a),g=(new THREE.Box3).setFromObject(d),b=new THREE.Euler(0,0,0,"YXZ"),h=J.v.K.Dc(c,g.center());b.setFromQuaternion(h);h=d.position.clone().sub(c).normalize();this.$d.set(c,h);this.Xn=this.$d.intersectObject(d,!0)[0].distance;d=g.size().y;b={position:c,rotation:b,fov:180/Math.PI*Math.atan(d/(2*this.Xn))*2+10}}this.pe().position.set(0,0,
0);this.setPosition(b.position);this.hb(b.rotation);this.setFov(b.fov);this.Ea=a;b=this.f.Q.tc[V];h=J.v.K.Dc(b.getPosition(),this.Ea.qb());this.Cp.setFromQuaternion(h)};
Bh.prototype.enable=function(a,b){this.Ea=b||this.Ea;if(!Bh.i.enable.call(this,a))return!1;if(this.isEnabled){this.Xn=this.getPosition().distanceTo(this.Ea.m.position);this.Ea.ab();var c=Ch(this.f.ya,this.Ea,this);c.Sa=this;c.show();this.Ea.B.pa?(this.f.P.Sc.H(this.Ea),this.f.P.ad.D()):(this.f.P.ad.H(this.Ea),this.f.P.Sc.D())}else c=Ch(this.f.ya,this.Ea,this),c.J(),this.f.P.Sc.D(4),this.f.P.ad.D(4)};Bh.prototype.t=function(){Bh.i.t.call(this);this.k.j(this,J.d.e.Fd,this.close,!1,this);this.f.P.Sg.D()};
Bh.prototype.close=function(a){this.Ea.tb();J.hc.Pg("");this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:V,Of:this.Cp,co:a?a.co:null})};
function Dh(a,b,c){oh.call(this,a,b,c);this.An=!1;this.wu={onStart:s(this.kx,this),onCancel:s(this.ix,this),onComplete:s(this.jx,this)};this.hn=this.f.ya.cs;this.Ou=this.f.ya.Ti;this.Tp=150;this.Vp=new THREE.Sphere;this.Wt=new THREE.Raycaster;this.Wt.far=this.Tp;this.Dq=50;this.uc=new Ug(c);this.uc.pl=this.Dq;this.wk=this.ei=this.Ym=this.Xm=0;this.ku=THREE.Math.degToRad(40);this.ou=THREE.Math.degToRad(-60)}t(Dh,oh);e=Dh.prototype;e.Eb=function(a){this.hb(a)};
e.enable=function(a,b){if(!Dh.i.enable.call(this,a))return!1;if(this.isEnabled){b&&this.Hg(b);this.wk=this.Pa.rotation.y;this.ei=this.kb.rotation.x;var c=this.getPosition();this.Vp.set(c,this.Tp);var d=[],c=Eh(this.f);E(c,function(a){return a.m});z(this.f.Ae,function(a){var b=!a.B.pa;if(!We(a.B)||b){var c=this.Vp.intersectsSphere(a.getBoundingSphere()),l=Nb(this.f.ob.m.children,a.m);b&&c&&!l&&d.push(a)}},this);c=d.concat();Fh(this.hn,d);Gh(this.Ou,c)}};
e.t=function(){Dh.i.t.call(this);this.k.j(this.f.ya,J.d.e.Fc,this.Is,!1,this);this.k.j(this.f.ya.tg,J.d.e.jj,this.Fo,!1,this);this.k.j(this.f.ya.Be,J.d.e.Wl,this.Go,!1,this);this.k.j(this.uc,"mousewheel",this.Bf,!1,this);this.k.j(J.hc,J.d.e.G,this.Cf,!1,this);this.hn.t(this.wu)};e.n=function(){Dh.i.n.call(this);this.hn.n()};function Ph(a){var b=[];z(a.f.ma,function(a){b.push(a.m)});return b}
e.update=function(){Dh.i.update.call(this);var a=Math.PI/2;this.Pa.rotation.y+=0.1*(this.wk-this.Pa.rotation.y);this.kb.rotation.x+=0.1*(this.ei-this.kb.rotation.x);this.kb.rotation.x=Math.max(-a,Math.min(a,this.kb.rotation.x));a=Z(this);40!==a&&(a+=0.05*(40-a),this.setFov(a),0.1>=Math.abs(a-40)&&this.setFov(40));this.dispatchEvent({type:J.d.e.Fc,Yi:this.Pa.rotation.y})};
e.Y=function(a){Dh.i.Y.call(this,a);if(!this.An){var b=Ph(this);Qb(b,this.f.wg.m);Qb(b,this.f.Vg.m);a=yg(a.clientX,a.clientY,b,this.W,xg(this.f));0<a.length&&(b=a[0].point,this.dispatchEvent({type:J.d.e.G,mode:vg,Ga:V,jc:b}),J.V.Ba(J.C.I.pj,"click"),this.f.P.Tk.play(b,a[0].face.normal))}};e.Hg=function(a){Dh.i.Hg.call(this,a);this.An=!1;this.Xm=a.clientX;this.Ym=a.clientY};
e.ul=function(a){Dh.i.ul.call(this,a);this.An=!0;var b=a.clientX-this.Xm,c=a.clientY-this.Ym;this.Xm=a.clientX;this.Ym=a.clientY;this.wk=this.Pa.rotation.y+0.009*b;this.ei=this.kb.rotation.x+0.009*c;this.ei=Math.max(Math.min(this.ku,this.ei),this.ou)};
e.Bf=function(a){a.preventDefault();var b=cc(100,400,Math.abs(a.pb)/this.Dq),b=-a.pb/Math.abs(a.pb)*b;a=ph(this);b=(new THREE.Vector3).addVectors(this.getPosition(),a.multiplyScalar(b));b.y=this.getPosition().y;this.dispatchEvent({type:J.d.e.G,mode:vg,Ga:V,jc:b,zo:!0});J.V.Ba(J.C.I.pj,"mousewheel")};e.ix=function(){};e.kx=function(){};e.jx=function(a){console.log("Object selected: "+a.m.name);this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:rg,object:a})};
e.Is=function(a){a.target instanceof Qh&&(this.wk=this.Pa.rotation.y=a.rotation)};e.Fo=function(a){"design"===a.mode&&this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:ug})};e.Go=function(a){this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:tg,Qc:a.Qc})};e.Cf=function(a){if(a=Oe(a.bj,Re.$l))a=Ah(this.f,a.objectId),this.dispatchEvent({type:J.d.e.G,mode:wg,Ga:rg,object:a})};
function Rh(a,b){Gd.call(this);ea(a)||(a=Sh++ +pa());this.xe=a%2147483646;0>=this.xe&&(this.xe+=2147483646);b&&!this.po&&(this.Zv=Math.random,Math.random=s(this.random,this),this.po=!0)}t(Rh,Gd);var Sh=0,Th=1/2147483646;Rh.prototype.xe=1;Rh.prototype.S=function(){Rh.i.S.call(this);this.po&&(Math.random=this.Zv,this.po=!1)};Rh.prototype.random=function(){var a=this.xe%44488*48271-3399*Math.floor(this.xe/44488);this.xe=0<a?a:a+2147483647;return(this.xe-1)*Th};
function Uh(a,b,c,d){THREE.Object3D.call(this);this.wa=null;this.fl=!1;this.segments=this.cj=this.Tb=null;this.jb=new THREE.MeshBasicMaterial({opacity:0.4,transparent:!0,wireframe:!0});this.kd=new THREE.PerspectiveCamera;this.Mt=new THREE.Vector3;this.su=new THREE.Vector3;this.gv=new THREE.Vector3(0,1,0);this.Ve=0;this.Ld=new THREE.Object3D;this.add(this.Ld);this.create(a,b,c,d)}t(Uh,THREE.Object3D);
Uh.prototype.create=function(a,b,c,d){this.wa=a;this.Tb=(this.fl=c)?new THREE.ClosedSplineCurve3(a):new THREE.SplineCurve3(a);this.jb.color=d||"#000000";this.Ve=r(b)?b:-15;cf(this)};Uh.prototype.dispose=function(){this.cj.dispose();this.cj=null;this.jb.dispose();this.jb=null};function Vh(a){var b=[];C(a.Ld.children,function(a){a.geometry instanceof THREE.BoxGeometry&&b.push(a)});return b}Uh.prototype.getSpacedPoints=function(){return this.Tb.getSpacedPoints(this.segments)};
function Wh(a,b){var c=a.cj,d=a.Tb.getPointAt(b),g=c.tangents.length,h=b*g,k=Math.floor(h),l=(k+1)%g;h<=g-1?(g=a.Mt,g.subVectors(c.binormals[l],c.binormals[k]),g.multiplyScalar(h-k).add(c.binormals[k]),c=a.Tb.getTangentAt(b),h=a.su,h.copy(g).cross(c),d.add(h.clone().multiplyScalar(a.Ve)),a.kd.position.copy(d),g=a.Tb.getPointAt((b+30/a.Tb.getLength())%1),g.copy(d).add(c),a.kd.matrix.lookAt(d,g,a.gv),a.kd.rotation.setFromRotationMatrix(a.kd.matrix,a.kd.rotation.order),d=(new THREE.Euler(0,0,0,"YXZ")).setFromQuaternion(a.kd.quaternion),
a.kd.rotation.copy(d)):a.kd.position.copy(a.Tb.getPointAt(1));return a.kd}
function cf(a){a.Tb.updateArcLengths();Hb(a.Ld.children,function(a){this.Ld.remove(a)},a);a.segments=Math.floor(a.Tb.getLength()/5);a.cj=new THREE.TubeGeometry(a.Tb,a.segments,0.5,4,a.fl);var b=new THREE.Mesh(a.cj,a.jb);a.Ld.add(b);C(a.wa,function(a,b){var g=new THREE.BoxGeometry(6,6,6),g=new THREE.Mesh(g,new THREE.MeshBasicMaterial({transparent:!0,opacity:0.2,color:16777215*(new Rh(100*b)).random()}));g.name="cube"+b;g.userData.id=b;g.userData.position=a;g.position.copy(a);this.Ld.add(g)},a)}
function Xh(a,b,c){oh.call(this,a,b,c);this.X=this.Bb=null;this.eb=new THREE.Euler(0,0,0,"YXZ");this.Dn=new THREE.Euler(0,0,0,"YXZ");this.Hj=new THREE.Euler(0,0,0,"YXZ");this.Rd=null}t(Xh,oh);e=Xh.prototype;e.pause=function(a){Xh.i.pause.call(this,a)&&this.Bb?this.Bb.pause():this.Bb.resume()};
e.start=function(a){var b=a.jc,c=a.Ga,d=this.f.Mh,g=a.Pc,h=J.El.findPath(d,g,b);h?(this.X&&(J.debug&&this.ga.remove(this.X),this.X.dispose()),this.X=new Uh(h,0,!1,null),J.debug&&this.ga.add(this.X),g=this.X.Tb.getLength(),d=g-25,g=d/g,0>=g?Yh(this,c):(h=this.X.Tb.getPointAt(g).setY(80),b=J.v.K.Dc(h,b),this.Hj.setFromQuaternion(b),this.Hj.x=Math.max(this.Hj.x,THREE.Math.degToRad(-40)),this.Dn.copy(a.mf),b=Math.max(1,d/50),a={R:0,Cv:g,Dr:0,zo:a.zo},this.Bb=TweenMax.to(a,b,{R:1,Dr:Math.PI*Math.floor(d/
20),ease:Linear.easeNone,onStart:this.px,onStartScope:this,onUpdate:this.ox,onUpdateParams:[a],onUpdateScope:this,onComplete:this.us,onCompleteParams:[c],onCompleteScope:this}))):(a=mf(J.El,this.f.Mh),console.log(h,d,g,b,qf(g,a),qf(b,a)),Yh(this,c))};function Yh(a,b){var c={fov:Z(a)};TweenMax.to(c,0.3,{fov:35,yoyo:!0,repeat:1,ease:Quad.easeInOut,onUpdate:function(a){this.setFov(a.fov)},onUpdateParams:[c],onUpdateScope:a,onComplete:a.us,onCompleteParams:[b],onCompleteScope:a})}
e.px=function(){this.Rd=J.T.Ta("footsteps")};e.ox=function(a){var b=THREE.Math.smoothstep(a.R,0,1),c=Wh(this.X,b*a.Cv).position;this.setPosition(c.x,80+0.5*Math.sin(a.Dr),c.z);a.zo||(this.eb=J.v.K.nf(this.Dn,this.Hj,b,this.eb),this.hb(this.eb.x,this.eb.y))};e.us=function(a){this.Rd&&this.Rd.pause();this.dispatchEvent({type:J.d.e.G,mode:a})};e.Hg=function(a){Xh.i.Hg.call(this,a);this.Bb&&this.Bb.kill();this.Rd&&this.Rd.pause();this.dispatchEvent({type:J.d.e.G,mode:V,co:a})};
function Zh(a,b,c){oh.call(this,a,b,c);this.Bb=null;this.Le=new THREE.Vector3(0,0,0);this.eb=new THREE.Euler(0,0,0,"YXZ")}t(Zh,oh);
Zh.prototype.start=function(a){var b=a.Pc||this.getPosition(),c=a.jc,d={R:0,Pc:b,jc:c,lf:a.lf||Z(this),Nf:a.Nf||Z(this),Fr:a.Fr||qh(this),Pl:a.Pl,Ga:a.Ga};a=a.Ga;var g=a===ug,b=ac(1,2,cc(1,2,b.distanceTo(c)/100)),b=g?1.5:b;this.Bb=TweenMax.to(d,b,{R:1,ease:Sine.easeInOut,onUpdate:this.Rx,onUpdateParams:[d],onUpdateScope:this,onComplete:this.Qx,onCompleteParams:[d],onCompleteScope:this});d=this.f.wg;c=this.f.Vg;g?(c.Qf(1),Cg(c),TweenMax.to(c,b,{opacity:0,onUpdate:c.Qf,onUpdateScope:c,onComplete:c.Ng,
onCompleteScope:c}),d.Qf(0),Cg(d),TweenMax.to(d,b,{opacity:1,onUpdate:d.Qf,onUpdateScope:d}),J.T.Ta("thrust-up")):null==c.m.parent&&(c.Qf(1),Cg(c),d.Qf(0),d.Ng());TweenMax.to(this.f.Hf,b,{zi:0,ease:Expo.easeOut});a===rg?($h(this.f.$,1),J.T.Cc("closeup",0,1,2,!1)):(ai(this.f.$,6),J.T.Cc("closeup",null,0,3,!0,!0));this.dispatchEvent({type:J.d.e.Fc,mode:a})};Zh.prototype.pause=function(a){Zh.i.pause.call(this,a)?this.Bb.pause():this.Bb.resume()};
Zh.prototype.Rx=function(a){var b=a.R,c=a.jc;this.Le=this.Le.copy(a.Pc).lerp(c,b);this.setPosition(this.Le);c=a.Pl;c=a.Fr.clone().lerp(c,b);c=J.v.K.Dc(this.Le,c);this.eb.setFromQuaternion(c);this.hb(this.eb.x,this.eb.y);this.setFov(cc(a.lf,a.Nf,b))};Zh.prototype.Qx=function(a){this.dispatchEvent({type:J.d.e.G,mode:a.Ga})};function bi(a){N.call(this);this.k=new L(this);this.control=null;this.f=a;this.Ja=this.f.Cb;this.kk=this.f.Hf;this.dg=this.Fj=this.nh=null;this.tc={}}t(bi,N);
bi.prototype.init=function(){this.nh=ci(this,V);this.Cj=ci(this,rg);this.Fj=ci(this,ug);this.Yt=ci(this,sg);this.Dm=ci(this,tg);ci(this,vg);ci(this,wg);this.control=this.Yt};bi.prototype.t=function(){this.k.j(this,J.d.e.G,this.Ha,!1,this);(this.control=this.control===this.Dm?this.nh:this.control)&&this.control.enable(!0)};bi.prototype.n=function(){this.k.removeAll();this.control&&this.control.enable(!1)};function di(a,b){var c={type:J.d.e.G};Db(c,b);a.dispatchEvent(c)}
function ci(a,b){var c=a.f.ya.domElement,d=a.f.domElement,g=a.Ja.pe(b),h;switch(b){case V:h=Dh;break;case rg:h=Bh;break;case ug:h=yh;break;case sg:h=uh;break;case tg:h=rh;break;case vg:h=Xh;break;case wg:h=Zh}c=new h(g,a.f,d,c);c.Sa=a;return a.tc[b]=c}
bi.prototype.Ha=function(a){var b=this.dg,c=a.mode,d=a.Ga;this.dg=c;console.log("view3D mode changed from "+b+" to "+c);var b=this.control,g=this.tc[this.dg],d=this.tc[d];b&&b.enable(!1);this.control=g;var h=a.Pc||b.getPosition(),c=a.mf||jf(b),k=a.lf||Z(b),l=a.jc||(d?d.getPosition():g.getPosition()),n=a.Of||(d?jf(d):jf(g)),g=a.Nf||(d?Z(d):Z(g));this.control.setPosition(h);this.control.hb(c);this.control.setFov(k);a.Pc=h;a.mf=c;a.lf=k;a.jc=l;a.Of=n;a.Nf=g;switch(this.control){case this.nh:this.control.enable(!0,
a.co);break;case this.Cj:this.control.enable(!0,a.object);break;default:this.control.enable(!0)}this.Ja.Eb(this.control.pe());if(d){l=k=h=g=!1;switch(d){case this.nh:if(b===this.Fj||b===this.Cj)this.nh.Eb(n),l=h=!0;break;case this.Dm:this.Dm.Eb(a.Qc);l=k=h=g=!0;break;case this.Cj:this.Cj.Eb(a.object);l=k=h=g=!0;break;case this.Fj:this.Fj.Eb(ph(this.control),a.object),l=k=h=g=!0}a.jc=g?d.getPosition():a.jc;a.Of=h?J.v.K.Jv(c,jf(d)):a.Of;a.Nf=k?Z(d):a.Nf;a.Pl=l?qh(d):a.Pl}switch(this.dg){case sg:this.control.start();
break;case vg:case wg:this.control.start(a)}b=this.kk;d=this.dg;a=a.Ga;c=d===rg||a===rg;n=d===ug||a===ug;g=d!==rg&&a!==rg;h=d!==ug&&a!==ug;c&&(b.Lh=(d===rg?b.f.Q.tc[d]:b.f.Q.tc[a]).Ea,!b.Dj.isActive()&&b.blur<b.Cq&&b.Dj.play());(c||n)&&!b.Gk.isActive()&&b.gj<b.Eq&&b.Gk.play();g&&!b.Dj.reversed()&&0<b.blur&&b.Dj.reverse();g&&h&&!b.Gk.reversed()&&b.gj>b.cn&&b.Gk.reverse()};var V="browse",rg="close_up",ug="design",sg="entry",tg="exit",vg="walk",wg="transition";
function ei(a,b,c){W.call(this,a,b,c);this.yh=this.m;this.ff=3E3;this.Xb=null}t(ei,W);function fi(a){var b=[];C(["peach","pineapple","orange","apple"],function(a){b.push(this.f.ma[a])},a);return b}e=ei.prototype;e.Ma=function(){ei.i.Ma.call(this);var a={fov:this.data.camera.fov};this.Xb=TweenMax.to(a,1,{fov:a.fov-20,ease:Quad.easeInOut,onUpdate:this.Uc,onUpdateParams:[a],onUpdateScope:this,onComplete:this.vw,onCompleteScope:this,onReverseComplete:this.ww,onReverseCompleteScope:this})};e.Uc=function(a){this.f.Q.control.setFov(a.fov)};
e.vw=function(){var a=fi(this),b=this.f.ob,c=new TimelineMax({onComplete:this.wx,onCompleteScope:this});C(a,function(a){var g=Hg(b,a.name),h=g.position,k=g.rotation,l=a.m.position,n=a.m.rotation,p={R:0},v=new THREE.Vector3,x=new THREE.Euler,g=TweenMax.to(p,1,{R:1,ease:Sine.easeIn,onUpdate:function(){v=v.copy(l).lerp(h,p.R);a.m.position.copy(v);x=J.v.K.nf(n,k,p.R,x);a.m.rotation.copy(x)},onComplete:this.vx,onCompleteParams:[a],onCompleteScope:this});c.add(g)},this)};e.ww=function(){this.Fa();this.Ca()};
e.ab=function(){ei.i.ab.call(this);TweenMax.to(this.yh.rotation,2,{y:2.8,ease:Quad.easeInOut});J.T.Ta("refrigerator-open")};e.tb=function(){ei.i.tb.call(this);TweenMax.to(this.yh.rotation,1,{y:0,ease:Quad.easeInOut});TweenMax.delayedCall(0.8,function(){J.T.Ta("refrigerator-close")})};e.vx=function(a){Ig(this.f.ob,a);a.m.material.map=a.bg;a.m.material.needsUpdate=!0};e.wx=function(){this.Xb.reverse()};
function gi(a){var b=new THREE.PlaneBufferGeometry(1E5,1E5,1,1),c=new THREE.MeshLambertMaterial({transparent:!0});c.shading=THREE.FlatShading;b=new THREE.Mesh(b,c);b.name="design-plane";b.rotation.x=-Math.PI/2;b.position.y=-0.5;zg.call(this,b,{receiveShadow:!0,fog:!0},a);this.opacity=1}t(gi,zg);
gi.prototype.Ya=function(){if(gi.i.Ya.call(this)){var a=ed("canvas");a.width=128;a.height=128;var b=a.getContext("2d");b.fillStyle="#e7e7e7";b.fillRect(0,0,128,128);b.strokeStyle="#aaaaaa";b.strokeRect(0,0,128,128);a=new THREE.Texture(a);a.wrapS=a.wrapT=THREE.RepeatWrapping;a.repeat.set(8E3,8E3);a.needsUpdate=!0;this.m.material.map=a;this.m.material.needsUpdate=!0}};gi.prototype.Qf=function(a){this.opacity=r(a)?a:this.opacity;this.m.material.opacity=this.opacity};
function hi(a,b,c){Gg.call(this,a,b,c);this.gg=null}t(hi,Gg);hi.prototype.Ya=function(){hi.i.Ya.call(this);var a=U(T.F(),this.f.$+"."+this.f.id+".computer-on-desk-texture");this.gg=new THREE.Texture(a);this.gg.needsUpdate=!0;this.sd&&(this.m.material.map=this.gg)};hi.prototype.Ob=function(){this.gg.dispose();this.gg=null;this.m.material.map=null;hi.i.Ob.call(this)};hi.prototype.Si=function(){hi.i.Si.call(this);this.m.material.map=this.gg;this.m.material.needsUpdate=!0};
function ii(a,b,c){this.sj=1;this.L=new THREE.WebGLRenderer({canvas:a,antialias:!1,devicePixelRatio:this.sj});this.L.gammaInput=!0;this.L.gammaOutput=!0;this.L.autoClear=!1;this.L.setClearColor(16777215,0);this.L.shadowMapEnabled=!0;this.L.shadowMapType=THREE.PCFSoftShadowMap;this.xf=this.wf=this.Ji=null;this.un=new THREE.RenderPass(b);this.Gm=new THREE.ShaderPass(THREE.FXAAShader);this.Gm.renderToScreen=!0;this.Fk=new THREE.ShaderPass(THREE.VignetteShader);this.Fk.uniforms.offset.value=0.95;this.Fk.uniforms.darkness.value=
cc(0.5,1,0);this.sm=new THREE.ShaderPass(THREE.TriangleBlurShader,"texture");this.sm.uniforms.delta.value=new THREE.Vector2(0,0);this.tm=new THREE.ShaderPass(THREE.TriangleBlurShader,"texture");this.tm.uniforms.delta.value=new THREE.Vector2(0,0);this.um=new THREE.ShaderPass(THREE.BrightnessContrastShader);this.oq=new THREE.ShaderPass(THREE.HueSaturationShader);this.Nt=new THREE.BloomPass(0.2);this.Jm=this.Hm=0;this.Lt=this.Kt=0.05;this.Im=new THREE.ShaderPass(THREE.BrightnessContrastShader);ji(this,
this.Hm,this.Jm);this.Kh=new THREE.MaskPass(b);this.Kh.enabled=!1;this.Aj=new THREE.ClearMaskPass;this.Aj.enabled=!1;a={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!0};b=J.Wi.Ll;b=(new Sc(b,b)).scale(this.sj);var d=new THREE.WebGLRenderTarget(b.width,b.height,a);d.generateMipmaps=!1;this.jk=new THREE.EffectComposer(this.L,d);this.jk.addPass(this.un);this.Tu=new THREE.TexturePass(this.jk.renderTarget2);this.lk=new THREE.TexturePass(this.jk.renderTarget2);
this.lk.enabled=!1;d=J.Wi.Ll/2;d=new THREE.WebGLRenderTarget(d,d,a);d.generateMipmaps=!1;this.kh=new THREE.EffectComposer(this.L,d);this.kh.addPass(this.un);this.kh.addPass(this.sm);this.kh.addPass(this.tm);this.lh=new THREE.TexturePass(this.kh.renderTarget2);this.lh.enabled=!1;d=new THREE.WebGLRenderTarget(b.width,b.height,a);d.generateMipmaps=!1;this.$b=new THREE.EffectComposer(this.L,d);this.$b.addPass(this.Tu);this.$b.addPass(this.lh);this.$b.addPass(this.um);this.$b.addPass(this.Kh);this.$b.addPass(this.lk);
this.$b.addPass(this.Aj);this.$b.addPass(this.Nt);this.$b.addPass(this.oq);this.$b.addPass(this.Im);this.$b.addPass(this.Fk);this.$b.addPass(this.Gm);this.Eb(c)}t(ii,N);ii.prototype.Eb=function(a){this.un.camera=a;this.Kh.camera=a};function ji(a,b,c){a.Hm=b;a.Jm=c;a.Im.uniforms.brightness.value=a.Kt+a.Hm;a.Im.uniforms.contrast.value=a.Lt+a.Jm}ii.prototype.setSize=function(a,b){this.L.setSize(a,b);this.Gm.uniforms.resolution.value.set(1/(a*this.sj),1/(b*this.sj))};
ii.prototype.render=function(){this.Ji&&this.Ji();this.wf&&this.wf();this.lh.enabled&&this.kh.render();this.xf&&this.xf();this.jk.render();this.$b.render()};function ki(a,b,c,d){this.Yu=d.Tb;this.qq=d.fl;d=Math.round($b(-15,15));var g=Math.round($b(-15,15)),h=Math.round($b(-15,15));this.Ve=new THREE.Vector3(d,g,h);this.$u=a;this.wq=this.gi=0;this.vq=new THREE.Vector3;this.iu=b||2;this.ju=c||4;this.Sh=new THREE.Vector3;this.m=this.create()}ki.prototype.create=function(){};
ki.prototype.getPosition=function(){return this.Sh};ki.prototype.setPosition=function(a){this.Sh.copy(a)};ki.prototype.update=function(a){var b=Math.cos(Math.abs(Math.sin(a*this.iu*Math.PI))*Math.PI)*this.ju;this.vq.set(b,b,b);this.wq=this.gi;this.gi=(a+this.$u)%1;a=this.Yu.getPointAt(this.gi);this.Sh.copy(a).add(this.Ve).add(this.vq);this.qq||(this.m.material.opacity=Math.sin(this.gi*Math.PI));(this.qq?0:this.gi<this.wq)&&this.setPosition(this.Sh)};
function li(a,b,c,d,g,h,k){var l=U(T.F(),"global.leaf."+b);d=new THREE.Texture(l);var l=l.width/128,n=Zb(40)+40;this.fi=new jh(d,l,1,l,n);this.jb=new THREE.SpriteMaterial({map:b?this.fi.texture:null,transparent:!0,side:THREE.DoubleSide,rotation:Math.random()*Math.PI});c=c||2;this.ua=Math.round($b(c,c+2));$b(0.02,0.04);$b(0.1,0.14);ki.call(this,a,g,h,k);this.fi.start()}t(li,ki);
li.prototype.create=function(){var a=$b(3,6);THREE.Math.degToRad(360*Math.random());var b=new THREE.Sprite(this.jb);b.scale.set(a,a,a);return b};li.prototype.update=function(a){li.i.update.call(this,a);this.m.position.copy(this.Sh)};function mi(a,b,c,d,g,h,k){this.fn=10;this.vb=(new THREE.Color).set(b);this.dd=this.vb.getHSL();this.Kj=new THREE.PlaneGeometry(30,30,1,this.fn);this.jb=this.createMaterial(b);this.wc=[];this.yc=[];this.wr=$b(0.5,1);ki.call(this,a,g,h,k)}t(mi,ki);
mi.prototype.create=function(){var a=new THREE.Mesh(this.Kj,this.jb);a.dynamic=!0;for(var b=0;b<2*this.fn;b++)this.wc[b]=0,this.yc[b]=0;return a};mi.prototype.setPosition=function(a){mi.i.setPosition.call(this,a)};
mi.prototype.createMaterial=function(){if(!ni){var a=document.createElement("canvas");a.width=32;a.height=32;var b=a.getContext("2d"),c=b.createLinearGradient(0,0,0,32);c.addColorStop(0,"#000000");c.addColorStop(0.5,"#555555");c.addColorStop(1,"#000000");b.fillStyle=c;b.moveTo(0,16);b.arcTo(16,0,32,16,10);b.arcTo(16,32,0,16,10);b.fill();a=new THREE.Texture(a);a.needsUpdate=!0;ni=a}this.dd.h=$b(this.dd.h-0.1,this.dd.h+0.1);this.dd.l=$b(this.dd.l-0.5,this.dd.l);this.vb.setHSL(this.dd.h,this.dd.s,this.dd.l);
return new THREE.MeshBasicMaterial({color:this.vb,map:ni,fog:!1,side:THREE.DoubleSide,wireframe:!0,depthTest:!1})};
mi.prototype.update=function(a){mi.i.update.call(this,a);this.wc.pop();this.wc.pop();this.wc.pop();this.yc.pop();this.yc.pop();this.yc.pop();a=this.getPosition();this.wc.unshift(a.x,a.y,a.z);this.yc.unshift(this.wr,this.wr,0);for(a=0;a<this.fn;a++){var b=this.Kj.vertices[2*a],c=this.Kj.vertices[2*a+1],d=3*a,g=3*a+1,h=3*a+2;b.x=this.wc[d]+this.yc[d];b.y=this.wc[g]+this.yc[g];b.z=this.wc[h]+this.yc[h];c.x=this.wc[d]-this.yc[d];c.y=this.wc[g]-this.yc[g];c.z=this.wc[h]-this.yc[h]}this.Kj.verticesNeedUpdate=
!0};var ni=null;function oi(a,b,c){this.xc=c||pi;this.pr=this.sk=0;this.Pd=this.xc.duration;this.fk=[];this.uu=this.xc.as;this.Jq=this.xc.$r;this.Qh=this.uu+this.Jq;this.fk=[];Uh.call(this,a,0,b,"#000000")}t(oi,Uh);e=oi.prototype;
e.create=function(a,b,c,d){oi.i.create.call(this,a,b,c,d);b=this.Qh;for(a=0;a<b;a++)c=a/this.Qh,c=0===a%(this.Qh/this.Jq)?new li(c,this.xc.Ur,this.xc.Wr,this.xc.Vr,this.xc.ro,this.xc.yo,this):new mi(c,this.xc.color,0,0,this.xc.ro,this.xc.yo,this),c.setPosition(c.getPosition()),this.add(c.m),this.fk.push(c)};e.t=function(){ef(this);this.sk=pa();var a,b=this.Qh;for(a=0;a<b;a++){var c=this.fk[a];c.update(0);c.setPosition(c.getPosition())}K(window,"focus",this.Ls,!1,this);K(window,"blur",this.Ks,!1,this)};
e.n=function(){ff(this);$d(window,"focus",this.Ls,!1,this);$d(window,"blur",this.Ks,!1,this)};e.xg=function(a){this.t();var b=E(this.children,function(a){return a.material});a=r(a)?a:0.5;TweenMax.fromTo(b,a,{opacity:0},{opacity:1})};e.wi=function(a){var b=E(this.children,function(a){return a.material});a=r(a)?a:0.5;TweenMax.to(b,a,{opacity:0,onComplete:this.n,onCompleteScope:this})};e.Db=function(){var a=(pa()-this.sk)%this.Pd/this.Pd,b,c=this.Qh;for(b=0;b<c;b++)this.fk[b].update(a)};
e.Ls=function(){ef(this);this.sk=pa()-this.pr};e.Ks=function(){ff(this);this.pr=pa()-this.sk};var pi={as:80,$r:20,Ur:null,Wr:0,Vr:0,color:"#48D1CC",duration:2E4,length:20,lv:THREE.AdditiveBlending,ro:2,yo:4},qi={as:50,$r:10,Ur:"ji",Wr:2,Vr:4,color:"#25DDFF",duration:2E4,length:10,lv:THREE.AdditiveBlending,ro:2,yo:4};
function ri(a){N.call(this);this.f=a;this.L=this.f.renderer;this.L.Ji=s(this.Ji,this);this.L.wf=s(this.wf,this);this.L.xf=s(this.xf,this);this.Lh=null;this.Cq=20;this.mu=-0.2;this.nu=-0.35;this.cn=1;this.Eq=3;this.saturation=this.contrast=this.lo=this.zi=this.brightness=this.blur=0;this.gj=this.cn;this.Dj=TweenMax.fromTo(this,0.5,{blur:0,brightness:0,contrast:0},{blur:this.Cq,brightness:this.mu,contrast:this.nu,ease:Quad.easeInOut,paused:!0,onStart:this.Ew,onStartScope:this,onReverseComplete:this.Dw,
onReverseCompleteScope:this});this.Gk=TweenMax.fromTo(this,1,{gj:this.cn},{gj:this.Eq,paused:!0});this.xj=TweenMax.fromTo(this,0.5,{brightness:0,contrast:0,blur:this.blur,saturation:0},{brightness:-0.65,contrast:-0.2,blur:6,saturation:-0.65,ease:Quad.easeInOut,paused:!0,onStart:this.fs,onStartScope:this,onReverseComplete:this.gs,onReverseCompleteScope:this})}t(ri,N);function si(a,b){b?a.xj.isActive()?a.xj.play():a.xj.restart():a.xj.reverse()}e=ri.prototype;
e.Ew=function(){this.L.Kh.enabled=!0;this.L.lk.enabled=!0;this.L.Aj.enabled=!0;this.fs();this.L.render()};e.Dw=function(){this.Lh=null;this.L.Kh.enabled=!1;this.L.lk.enabled=!1;this.L.Aj.enabled=!1;this.gs();this.L.render()};e.fs=function(){this.L.lh.enabled=!0};e.gs=function(){0===this.blur&&(this.L.lh.enabled=!1)};
e.Ji=function(){var a=this.L,b=(this.blur||0)/512;a.sm.uniforms.delta.value.x=(this.blur||0)/512;a.tm.uniforms.delta.value.y=b;this.L.um.uniforms.brightness.value=this.brightness;this.L.um.uniforms.contrast.value=this.contrast;ji(this.L,this.zi,this.lo);this.L.oq.uniforms.saturation.value=this.saturation;this.L.Fk.uniforms.darkness.value=cc(0.5,1,this.gj)};e.wf=function(){var a=this.Lh,b=this.f.ma,c;for(c in b)Dg(b[c]);this.f.P.wf();a&&(Eg(a),Eg(this.f.ob))};
e.xf=function(){if(this.Lh){var a=this.Lh,b=this.f.ma,c;for(c in b)Eg(b[c]);this.f.P.xf();Dg(a);Dg(this.f.ob);this.f.ma.wall.Gi&&Dg(this.f.Vg);a.sd&&a.le&&a.le.kc&&Dg(a.le.kc)}};function ti(a,b,c){W.call(this,a,b,c);this.Hc=null;this.au=new THREE.Vector3;this.bu=new THREE.Euler;this.Bh=this.Em=null;this.Oj=!1}t(ti,W);e=ti.prototype;
e.init=function(){ti.i.init.call(this);var a=this.m.getObjectByName("fish-bowl-water");a.material.reflectivity=0.65;a.material.opacity=0.25;a.material.transparent=!0;a.material.shininess=10;a.material.envMap=Ag(this.f,this.qb(),512);a.material.needsUpdate=!0;this.Hc=this.f.ma.goldfish;a=(new THREE.Matrix4).makeRotationY(Math.PI/2);this.Hc.m.geometry.applyMatrix(a);this.Hc.Ng()};e.ab=function(){ti.i.ab.call(this);this.Oj&&this.$o()};
e.tb=function(){ti.i.tb.call(this);this.Oj&&(this.Em&&this.Em.kill(),this.Bh&&this.Bh.kill())};e.Ma=function(){ti.i.Ma.call(this);this.Oj||(Cg(this.Hc,this.m),TweenMax.fromTo(this.Hc.m.position,4,{y:this.Hc.m.position.y+30},{y:this.Hc.m.position.y,immediateRender:!0,ease:Expo.easeOut,onComplete:this.Sw,onCompleteScope:this}))};
e.$o=function(){var a=3*Math.random()+2,b=1*Math.random(),c=this.Hc.m,d=c.position.clone(),g=c.position.clone().set($b(-3,3),0,$b(-3,3)),h=c.rotation.clone(),k=J.v.K.Dc(d,g),k=c.rotation.clone().setFromQuaternion(k),d={R:0,Pc:d,jc:g,mf:h,Of:k};this.Em=TweenMax.to(d,a,{R:1,delay:b,onUpdate:this.ty,onUpdateParams:[d],onUpdateScope:this,onComplete:this.$o,onCompleteScope:this});this.Bh&&this.Bh.isActive()||(this.Bh=TweenMax.fromTo(c.scale,0.85,{x:1},{x:1.1,yoyo:!0,repeat:-1}))};
e.ty=function(a){var b=a.R,c=this.au.copy(a.Pc).lerp(a.jc,b);a=J.v.K.nf(a.mf,a.Of,b,this.bu);this.Hc.m.position.copy(c);this.Hc.m.rotation.copy(a)};e.Sw=function(){this.$o();this.Fa();this.Ca();this.Oj=!0};
function ui(a,b,c){W.call(this,a,b,c);this.yh=this.m.getObjectByName("closet-door");this.Vm=null;this.mc=-41;this.mm=[new THREE.Vector3(this.mc,85.489,-40.44),new THREE.Vector3(this.mc,74.602,-39.45),new THREE.Vector3(this.mc,74.602,-44.72),new THREE.Vector3(this.mc,74.602,-50.22),new THREE.Vector3(this.mc,74.602,-55.7),new THREE.Vector3(this.mc,63.715,-39.7),new THREE.Vector3(this.mc,63.715,-46.23),new THREE.Vector3(this.mc,63.715,-52.54),new THREE.Vector3(this.mc,63.715,-59.22),new THREE.Vector3(this.mc,
63.715,-65.45)];this.Ap=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Ua=this.Md=this.Ie=null;this.Od=[];this.Wp=new THREE.Vector3;this.Xb=null;this.Lb={x:0,y:0};this.Jd={fov:0,ap:!1};this.gk=this.vk=0;this.U=new Kg(this.f.domElement);this.U.vg=ca}t(ui,W);e=ui.prototype;
e.init=function(){ui.i.init.call(this);var a=this.qb(),b=a.clone().setX(a.x+20);this.Md=new THREE.Mesh(new THREE.PlaneBufferGeometry(50,50,1,1));this.Md.visible=!1;this.Md.rotation.y=Math.PI/2;this.Md.position.copy(b);this.Ie=new THREE.Mesh(new THREE.PlaneBufferGeometry(50,50,1,1));this.Ie.visible=!1;this.Ie.rotation.y=Math.PI/2;this.Ie.position.copy(a).setX(this.mc);var c=[0.15,0.1,-0.08,0.3,-0.07,0.1,0.05,0.2,0.05,-0.05],d={"jar-1":{y:72,z:-36},"jar-2":{y:64,z:-40},"jar-3":{y:72,z:-65},"jar-4":{y:80,
z:-58},"jar-5":{y:82,z:-40},"jar-6":{y:64,z:-48},"jar-7":{y:65,z:-60},"jar-8":{y:68,z:-63},"jar-9":{y:64,z:-55},"jar-10":{y:82,z:-67}},g={"jar-1":{x:-0.12,y:0.04,z:0.2},"jar-2":{x:1,y:0.06,z:-0.46},"jar-3":{x:0.58,y:0.08,z:-0.42},"jar-4":{x:-0.5,y:-0.64,z:-0.82},"jar-5":{x:0.8,y:0.06,z:-0.54},"jar-6":{x:0.38,y:-0.18,z:-0.34},"jar-7":{x:0.56,y:-0.82,z:0.06},"jar-8":{x:-0.04,y:1,z:-0.14},"jar-9":{x:-0.52,y:-0.08,z:-0.14},"jar-10":{x:-0.64,y:-1.08,z:-0.38}},a=E("jar-1 jar-2 jar-3 jar-4 jar-5 jar-6 jar-7 jar-8 jar-9 jar-10".split(" "),
function(a,k){var l=this.m.getObjectByName(a).kc,n=l.m.clone();n.visible=!1;this.Od.push(n);n.userData.Xv=l;n.userData.Ag=!1;n.userData.anchor=null;n.userData.orientation={Mo:n.position.x,No:n.position.y,Oo:n.position.z,Rs:n.rotation.x,Yi:n.rotation.y,Ss:n.rotation.z};n.userData.$n=new THREE.Vector3;n.userData.Yo=1;n.userData.oy=c[k];n.userData.To=1;return TweenMax.to(n.userData.orientation,0.65,{Mo:b.x,No:d[l.name].y,Oo:d[l.name].z,Rs:g[l.name].x,Yi:g[l.name].y,Ss:g[l.name].z})},this);this.Vm=new TimelineMax({paused:!0,
onComplete:this.bx,onCompleteScope:this});this.Vm.add(a,"+=0","start",0.15)};function vi(a){var b=a.Lb.x/J.ka.width*2-1,c=2*-(a.Lb.y/J.ka.height)+1,d=a.f.Cb.cc;a=a.f.Q.control.getPosition();b=(new THREE.Vector3(b,c,0.5)).unproject(d).sub(a).normalize();J.v.K.Kl.set(a,b)}function wi(a){a=J.v.K.Kl.intersectObject(a);return 0<a.length?a[0].point:null}
e.Ma=function(){ui.i.Ma.call(this);var a=this.f.scene;a.add(this.Md);a.add(this.Ie);C(this.Od,function(b){a.add(b)});this.Vm.restart();TweenMax.to(this,4,{vk:1,gk:1});TweenMax.ticker.addEventListener("tick",this.update,this)};e.Ca=function(){ui.i.Ca.call(this);var a=this.f.scene;a.remove(this.Md);a.remove(this.Ie);C(this.Od,function(b){a.remove(b)});TweenMax.to(this,0.5,{vk:0,gk:0});TweenMax.ticker.removeEventListener("tick",this.update,this)};
function xi(a){var b=wi(a.Md);a.Ua.userData.$n.subVectors(b,a.Wp)}
e.update=function(){var a=pa(),b,c=this.Od.length;for(b=0;b<c;b++){var d=this.Od[b],g=d.userData,h=g.oy,k=g.Yo,l=g.To,n=g.$n,p=g.orientation;d.position.x=p.Mo;d.position.y=p.No+Math.sin(0.001*a*h)*this.vk*k*this.gk+n.y;d.position.z=p.Oo+Math.cos(0.001*a*h)*this.vk*k*this.gk+n.z;d.rotation.x=p.Rs*l;d.rotation.y=p.Yi*l;d.rotation.z=p.Ss*l;g=g.Ag?g.anchor:d.position;h=d.userData.Xv;h.m.position.x+=0.2*(g.x-h.m.position.x);h.m.position.y+=0.2*(g.y-h.m.position.y);h.m.position.z+=0.2*(g.z-h.m.position.z);
h.m.rotation.copy(d.rotation)}};e.ab=function(){this.ff=2E3;ui.i.ab.call(this);TweenMax.to(this.yh.rotation,1.5,{y:-2.8,ease:Quad.easeInOut})};e.tb=function(){ui.i.tb.call(this);TweenMax.to(this.yh.rotation,1.5,{y:0,ease:Quad.easeInOut});TweenMax.delayedCall(0.8,function(){})};e.bx=function(){this.Zb.j(this.U,"start",this.xd,!1,this);this.Zb.j(this.U,"drag",this.vd,!1,this);this.Zb.j(this.U,"end",this.wd,!1,this)};
e.xd=function(a){var b=yg(a.clientX,a.clientY,this.Od,this.f.Cb.cc,this.f.Fb);0<b.length&&(b=b[0].object,b.userData.Ag?this.Ua=null:(this.Ua=b,this.Lb.x=a.clientX,this.Lb.y=a.clientY,TweenMax.to(this.Ua.userData,0.5,{Yo:0,To:0}),vi(this),a=wi(this.Md),a=J.v.K.ho(this.Ua,a),this.Wp.set(a.x+this.Ua.userData.orientation.Mo,a.y+this.Ua.userData.orientation.No,a.z+this.Ua.userData.orientation.Oo),xi(this),this.Xb||(this.Jd.fov=this.$i.fov,this.Jd.ap=!0,this.Xb=TweenMax.to(this.Jd,1,{fov:this.$i.fov-12,
ease:Strong.easeOut,onUpdate:this.Uc,onUpdateParams:[this.Jd],onUpdateScope:this}))))};
e.wd=function(){if(this.Ua){TweenMax.to(this.Ua.userData.$n,0.5,{x:0,y:0,z:0});var a=this.Ua.userData.Ag;TweenMax.to(this.Ua.userData,0.5,{Yo:a?0:1,To:a?0:1});this.Ua=null;C(this.Od,function(a){var c=Gb(this.mm,a.userData.anchor);this.Ap[c]=a.userData.Ag},this);F(this.Od,function(a){return!1===a.userData.Ag})||(this.Jd.fov=Z(this.f.Q.control),this.Jd.ap=!1,this.Xb=TweenMax.to(this.Jd,1,{fov:this.$i.fov,onUpdate:this.Uc,onUpdateParams:[this.Jd],onUpdateScope:this,onComplete:this.Eo,onCompleteScope:this}))}};
e.vd=function(a){if(this.Ua){this.Lb.x=a.clientX;this.Lb.y=a.clientY;vi(this);xi(this);var b;if(a=wi(this.Ie)){var c,d=this.mm.length,g=4;for(c=0;c<d;c++){var h=this.mm[c];if(!this.Ap[c]){var k=a.distanceTo(h);k<g&&(g=k,b=h)}}}else b=null;this.Ua.userData.Ag=b?!0:!1;this.Ua.userData.anchor=b}};e.Uc=function(a){this.f.Q.control.setFov(a.fov);a.ap&&this.Ua&&xi(this)};e.Eo=function(){this.Fa();this.Ca()};
function yi(a,b,c){W.call(this,a,b,c);this.pg=ed("video",{preload:"metadata",loop:!0},[ed("source",{src:J.ra.assetsPath+"video/wallpaper.mp4",type:'video/mp4; codecs="avc1.42E01E"'}),ed("source",{src:J.ra.assetsPath+"video/wallpaper.ogv",type:'video/ogg; codecs="theora, vorbis"'})]);this.li=this.Ek=this.ki=null}t(yi,W);e=yi.prototype;e.t=function(){yi.i.t.call(this);K(this.pg,"canplay",this.yl,!1,this)};e.n=function(){yi.i.n.call(this);$d(this.pg,"canplay",this.yl,!1,this)};
e.Ya=function(){yi.i.Ya.call(this);this.ki=ed("canvas",{width:480,height:268});this.Ek=this.ki.getContext("2d");this.Ek.fillStyle="#000000";this.Ek.fillRect(0,0,this.ki.width,this.ki.height);this.li=new THREE.Texture(this.ki);this.li.minFilter=THREE.LinearFilter;this.li.magFilter=THREE.LinearFilter;this.m.material.map=this.li;this.pg.load()};e.yl=function(){this.Ek.drawImage(this.pg,0,0);this.li.needsUpdate=!0};
e.ab=function(){yi.i.ab.call(this);this.pg.play();TweenMax.ticker.addEventListener("tick",this.yl,this)};e.tb=function(){yi.i.tb.call(this);this.pg.pause();TweenMax.ticker.removeEventListener("tick",this.yl,this)};
function zi(a,b,c){Fg.call(this,a,b,c);this.Vb=this.data.Zc;this.xi=this.data.Rc;this.Yg=this.data.Yg;this.se=this.data.se;this.hl=this.data.hl;this.origin=this.data.origin;this.origin.position.y=80;this.tk=this.m.rotation.y;this.dk=J.T.la[Ai][this.data.Vc];this.Bj=J.T.la[Ai][this.data.Mc];this.ek=TweenMax.fromTo(this.m.rotation,2.5,{y:this.tk},{y:this.tk+-90*(this.data.Qr?-1:1)*Math.PI/180,paused:!0,onComplete:this.lx,onCompleteScope:this});this.Qp=new dg(this.pause,250,this)}t(zi,Fg);e=zi.prototype;
e.open=function(a){this.ek.updateTo({y:this.tk+-90*(this.data.Qr?-1:1)*Math.PI/180},!0);this.ek.restart();a||this.Qp.start()};e.close=function(){TweenMax.to(this.m.rotation,2,{y:this.tk,ease:Strong.easeIn});this.Qp.stop()};e.resume=function(){this.ek.resume()};e.pause=function(){this.ek.pause();this.dispatchEvent(J.d.e.fm)};function sh(a){a.dk&&a.dk.play();a.Bj&&a.Bj.stop()}function th(a){a.Bj&&a.Bj.play();a.dk&&a.dk.stop()}e.lx=function(){this.dispatchEvent(J.d.e.Gb)};
function Bi(a,b,c){W.call(this,a,b,c);this.Zf={apple:!1,orange:!1,pineapple:!1,peach:!1}}t(Bi,W);
function Ci(a,b){if(!a.Zf[b]){a.Zf[b]=!0;var c=a.f.ma[b],d=a.f.ob;d.removeItem(c);a.m.add(c.m);var d=Hg(d,b),g=d.rotation,h=J.v.K.ho(a.m,d.position),k=J.v.K.Jr(a.m,g),d=Di[b],l=d.position.clone().setY(d.position.y+10),n=d.rotation,p={R:0},v=new THREE.Vector3,x=new THREE.Euler;TweenMax.to(p,0.8,{R:1,immediateRender:!0,ease:Sine.easeInOut,onUpdate:function(){v=v.copy(h).lerp(l,p.R);c.m.position.copy(v);x=J.v.K.nf(k,n,p.R,x);c.m.rotation.copy(x)},onUpdateScope:a});TweenMax.to(c.m.position,0.8,{y:d.position.y,
delay:1,ease:Bounce.easeOut,onComplete:a.Uw,onCompleteScope:a})}}Bi.prototype.Uw=function(){this.Zf.apple&&this.Zf.orange&&this.Zf.pineapple&&this.Zf.peach&&(this.Fa(),this.Ca())};
var Di={apple:{position:new THREE.Vector3(-113.86,52.8,-69.91),rotation:new THREE.Euler(0,-0.67,0)},orange:{position:new THREE.Vector3(-118.57,52.17,-70.48),rotation:new THREE.Euler(0,0.96,0)},pineapple:{position:new THREE.Vector3(-118.35,56.99,-63.23),rotation:new THREE.Euler(0.4,0,0)},peach:{position:new THREE.Vector3(-112.3,52.04,-65.7),rotation:new THREE.Euler(0,-0.49,0)}};
function Ei(a){var b=new THREE.Object3D;b.name="arms";this.Ju=new THREE.Object3D;b.add(this.Ju);Fg.call(this,b,{},a);this.uq=[];Cg(this)}t(Ei,Fg);function Hg(a,b){var c=Fi[b];return{position:J.v.K.Lv(a.m,c.position),rotation:J.v.K.Mv(a.m,c.rotation)}}function Ig(a,b){Pb(a.uq,b);var c=b.m;a.m.add(c);var d=Fi[b.name];c.position.copy(d.position);c.rotation.copy(d.rotation);b instanceof Gg&&a.f.ya.Vk.t(b);console.log("collected by arms: "+b.name)}
Ei.prototype.removeItem=function(a){Qb(this.uq,a);this.m.remove(a.m);a instanceof Gg&&this.f.ya.Vk.n();console.log("removed from arms: "+a.name)};Ei.prototype.update=function(a,b){this.m.rotation.copy(b);this.m.position.copy(a).setY(65);this.m.translateZ(-10)};
var Fi={apple:{position:new THREE.Vector3(0.47,6.1,-4.36),rotation:new THREE.Euler(-0.26,0.16,0.02)},orange:{position:new THREE.Vector3(4.9,4.31,-2.08),rotation:new THREE.Euler(0.7,0.26,-0.5)},pineapple:{position:new THREE.Vector3(-4.73,6.62,-0.8),rotation:new THREE.Euler(0.12,-0.16,0.14)},peach:{position:new THREE.Vector3(0.69,4.53,-0.42),rotation:new THREE.Euler(0.7,0.08,-0.6)},"dining-chair":{position:new THREE.Vector3(5,-25,-20),rotation:new THREE.Euler(0,0,0.17)},bear:{position:new THREE.Vector3(0.47,
0,-5),rotation:new THREE.Euler(-0.26,3.49,0.02)},computer:{position:new THREE.Vector3(0.47,-22,-12),rotation:new THREE.Euler(-0.26,3.49,0.02)},"swivel-chair":{position:new THREE.Vector3(10,-30,-40),rotation:new THREE.Euler(0,3.49,-0.5)},setsquare:{position:new THREE.Vector3(0.47,-2,-10),rotation:new THREE.Euler(-0.78,-1.57,0.02)},knife:{position:new THREE.Vector3(0,10,-2),rotation:new THREE.Euler(1.4,-0.6,-0.5)},handheld:{position:new THREE.Vector3(0,7.5,-2),rotation:new THREE.Euler(0.2,-1.57,0)}};
J.ea.iz={};
function Gi(){THREE.Object3D.call(this);var a=document.createElement("canvas");a.width=a.height=32;var b=a.getContext("2d");b.arc(a.width/2,a.height/2,12,0,2*Math.PI,!1);b.fillStyle="rgba(255, 255, 255, 1)";b.fill();b=new THREE.Texture(a);b.needsUpdate=!0;for(var c={alpha:{type:"f",value:[]}},d=0;12>d;d++)c.alpha.value[d]=0.1+0.8*Math.random();a=new Float32Array(60);for(d=0;60>d;d++)a[d]=0+0.25*Math.random();this.ce={color:{type:"c",value:new THREE.Color(16777215)},texture:{type:"t",value:b},time:{type:"f",
value:0},pulse:{type:"f",value:1},globalAlpha:{type:"f",value:0}};c=new THREE.ShaderMaterial({uniforms:this.ce,attributes:c,vertexShader:Hi("dotsVertexShader"),fragmentShader:Hi("dotsFragmentShader"),blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0});b=new THREE.ShaderMaterial({uniforms:this.ce,attributes:{alpha:{type:"f",value:null}},vertexShader:Hi("linesVertexShader"),fragmentShader:Hi("linesFragmentShader"),blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0});d=new THREE.IcosahedronGeometry(1,
0);c=new THREE.PointCloud(d,c);this.add(c);c=(new THREE.WireframeHelper(c)).geometry;c.addAttribute("alpha",new THREE.BufferAttribute(a,1));a=new THREE.Line(c,b,THREE.LinePieces);this.add(a);this.Jb=this.Ib=null;this.nm=new hg;this.nm.Db=s(this.Db,this)}t(Gi,THREE.Object3D);e=Gi.prototype;e.t=function(){this.ce.globalAlpha.value=0;ef(this.nm)};e.n=function(){this.ce.globalAlpha.value=0;ff(this.nm)};
e.H=function(a){a=a.getBoundingSphere();var b=a.radius;this.position.copy(a.center);this.Jb&&this.Jb.kill();this.Ib=TweenMax.fromTo(this.scale,2,{x:0.5*b,y:0.5*b,z:0.5*b},{x:b,y:b,z:b,ease:Elastic.easeOut,onStart:this.t,onStartScope:this});TweenMax.to(this.ce.globalAlpha,2,{value:1,ease:Elastic.easeOut})};
e.D=function(a){if(!this.Jb||!this.Jb.isActive()){var b=0.5*this.scale.x;this.Jb=TweenMax.to(this.scale,0.5,{x:b,y:b,z:b,delay:a||0,ease:Strong.easeOut,onComplete:this.n,onCompleteScope:this});TweenMax.to(this.ce.globalAlpha,0.5,{value:0,delay:a||0,ease:Strong.easeOut})}};e.Db=function(a){this.rotation.x=5E-4*a;this.rotation.y=2E-4*a;this.ce.time.value=0.5*Math.sin(0.001*a)+0.5;this.ce.pulse.value=cc(0.8,1,0.5*Math.sin(0.001*a)+0.5)};
function Ii(){var a=new THREE.PlaneBufferGeometry(10,10),b=ed("canvas");b.width=b.height=128;var c=b.getContext("2d"),d=b.width/2,g=b.height/2;c.beginPath();c.arc(d,g,40,0,2*Math.PI,!1);c.lineWidth=30;c.strokeStyle="rgba(255, 255, 255, .1)";c.stroke();c.closePath();c.beginPath();c.arc(d,g,30,0,2*Math.PI,!1);c.lineWidth=6;c.strokeStyle="rgba(255, 255, 255, .2)";c.stroke();c.closePath();b=new THREE.Texture(b);b.needsUpdate=!0;b=new THREE.MeshBasicMaterial({map:b,side:THREE.DoubleSide,fog:!1,transparent:!0,
blending:THREE.AdditiveBlending,depthTest:!1});THREE.Mesh.call(this,a,b);this.Aq=new THREE.Vector3;TweenMax.set(this.material,{opacity:0})}t(Ii,THREE.Mesh);Ii.prototype.play=function(a,b){this.position.copy(a);this.Aq.addVectors(b,a);this.lookAt(this.Aq);TweenMax.fromTo(this.scale,0.8,{x:0.5,y:0.5},{x:1.5,y:1.5,ease:Expo.easeOut});TweenMax.fromTo(this.material,0.8,{opacity:1},{opacity:0,ease:Expo.easeOut})};
function Ji(a){var b=new THREE.SpriteMaterial({map:a,transparent:!0,side:THREE.DoubleSide,sizeAttenuation:!0,alphaTest:1,fog:!0});THREE.Sprite.call(this,b);var b=a.image.width/128,c=Zb(40)+40;this.fi=new jh(a,b,1,b,c);this.rm=1;Ki(this)}t(Ji,THREE.Sprite);Ji.prototype.start=function(){this.fi.start()};Ji.prototype.stop=function(){this.fi.stop()};function Ki(a){a.rm=$b(0.5,2);var b=1*a.rm;a.scale.set(b,b,b);b=Math.random()*Math.PI*2;a.material.rotation=b}
function Li(a,b){THREE.Object3D.call(this);this.isActive=!1;this.k=new L(this);this.Ah=a;this.vb=b;this.Ea=null;var c=T.F();z(Mi,function(a,b){if(!Ni[b]){var d=U(c,"global.leaf."+a),d=new THREE.Texture(d);Ni[b]=d}});var d=[],g;switch(this.vb){case Oi:d.push("GREEN_1","GREEN_2");g=16;break;case Pi:d.push("YELLOW_1","YELLOW_2"),g=10}for(var h=0;h<g;h++){var k=d[Zb(d.length)],k=new Ji(Ni[k].clone());this.add(k)}this.Vf={Ub:[],Qo:[]};this.Zm=1;this.$m=TweenMax.fromTo(this,2,{Zm:0},{Zm:1,paused:!0,onUpdate:this.gt,
onUpdateScope:this,onReverseComplete:this.n,onReverseCompleteScope:this});this.bi=0;this.Vu=this.vb===Oi?0.001:0.002;this.qm=new hg;this.qm.Db=s(this.Db,this);this.pm=new dg(this.D,2E3,this)}t(Li,THREE.Object3D);e=Li.prototype;e.t=function(){this.isActive=!0;this.k.j(this.Ea.B,J.d.e.Hb,this.Ef,!1,this)};e.n=function(){C(this.children,function(a){a.stop()});ff(this.qm);this.k.removeAll();this.pm.stop();this.Ea=null;this.isActive=!1};
e.H=function(a){if(this.Ea!==a){this.Ea=a;this.pm.stop();a=a.getBoundingSphere();var b=Math.max(15,a.radius);this.position.copy(a.center);a=this.children;this.Vf.Ub=[];this.Vf.Qo=[];C(a,function(a){a.position.set(Math.random()-0.5,Math.random()-0.5,Math.random()-0.5);a.position.setLength(b*(0.1*Math.random()+0.9));this.Vf.Ub.push(a.position.clone());this.Vf.Qo.push(Math.random());Ki(a);a.start()},this);this.$m.restart();this.gt();this.bi=pa();ef(this.qm);this.t()}};
e.D=function(a){!this.$m.reversed()&&this.isActive&&(a?this.pm.start():this.$m.reverse())};e.gt=function(){var a=this.children,b,c=a.length;for(b=0;b<c;b++){var d=a[b],g=d.rm*this.Zm;d.scale.set(g,g,g)}};e.Ef=function(){this.Ah.dispatchEvent({type:J.d.e.Hb,jv:this.Ea})};
e.Db=function(a){a=(a-this.bi)*this.Vu;for(var b=0;b<this.children.length;b++){var c=this.children[b],d=(Math.sin((this.Vf.Qo[b]+1)*a)+1)/2;this.vb===Oi?d=cc(0.8,1,d):this.vb===Pi&&(d=cc(0.8,2,d));var g=this.Vf.Ub[b];c.position.x=g.x*d;c.position.y=g.y*d;c.position.z=g.z*d}this.rotation.y=0.75*a};var Oi="green",Pi="yellow",Mi={GREEN_1:"green-1",GREEN_2:"green-2",YELLOW_1:"yellow-1",YELLOW_2:"yellow-2"},Ni={GREEN_1:null,GREEN_2:null,YELLOW_1:null,YELLOW_2:null};
function Qi(){THREE.Object3D.call(this);this.k=new L(this);this.Ah=new N;this.Tk=new Ii;this.add(this.Tk);this.Sg=new Gi;this.add(this.Sg);this.Sc=new Li(this.Ah,Oi);this.add(this.Sc);this.ad=new Li(this.Ah,Pi);this.add(this.ad)}t(Qi,THREE.Object3D);e=Qi.prototype;e.t=function(){this.k.j(this.Ah,J.d.e.Hb,this.Ef,!1,this)};e.n=function(){this.Sc.n();this.ad.n();this.k.removeAll()};e.wf=function(){this.Tk.visible=!0;this.Sg.visible=!0;this.Sc.visible=this.Sc.isActive;this.ad.visible=this.ad.isActive};
e.xf=function(){this.Tk.visible=!1;this.Sg.visible=!1;this.Sc.visible=this.Sc.isActive;this.ad.visible=this.ad.isActive};e.Ef=function(a){this.ad.D();this.Sc.H(a.jv)};function Ri(a,b,c){W.call(this,a,b,c);this.yq=this.m.getObjectByName("light");this.Op=this.yq.color;this.vb=this.Op.clone();this.rr=new THREE.Color;this.setColor(this.vb)}t(Ri,W);
Ri.prototype.setColor=function(a){var b=this.vb.getHex();a=this.rr.set(a);var c={R:0};TweenMax.to(c,0.8,{R:1,ease:Expo.easeOut,onUpdate:function(){this.vb.set(b).lerp(this.rr,c.R);this.yq.color.copy(this.vb);this.m.material.color.copy(this.vb)},onUpdateScope:this});a.equals(this.Op)||this.Fa()};function Si(a,b,c){W.call(this,a,b,c);this.hr=this.m.position.z}t(Si,W);
Si.prototype.ab=function(){this.ff=this.f.Ae.knife.sd&&!this.B.pa?4E3:2E3;Si.i.ab.call(this);TweenMax.to(this.m.position,1,{z:this.hr+20,ease:Quad.easeInOut,onComplete:this.Kw,onCompleteScope:this})};Si.prototype.tb=function(){Si.i.tb.call(this);TweenMax.to(this.m.position,1,{z:this.hr,ease:Quad.easeInOut})};Si.prototype.Kw=function(){this.B.pa||qe(function(){var a=this.f.Ae.knife;a.sd&&a.Uk()},400,this)};function Ti(a,b,c){Gg.call(this,a,b,c);this.ag=null}t(Ti,Gg);e=Ti.prototype;e.Hr=function(){return this.f.Ae.drawer};
e.Ya=function(){Ti.i.Ya.call(this);var a=U(T.F(),this.f.$+"."+this.f.id+".knife-in-drawer-texture");this.ag=new THREE.Texture(a);this.ag.needsUpdate=!0;this.$k&&(this.m.material.map=this.ag)};e.Ob=function(){this.ag.dispose();this.ag=null;this.m.material.map=null;Ti.i.Ob.call(this)};e.Uk=function(){Ti.i.Uk.call(this);this.m.material.map=this.ag;this.m.material.needsUpdate=!0};e.Fa=function(){Ti.i.Fa.call(this);this.f.Ae.drawer.Fa()};
function Ui(a,b,c){W.call(this,a,b,c);this.Mn=this.oi=this.Km=null;this.di={position:new THREE.Vector3(11,59,76.65),rotation:new THREE.Euler(-0.32,-1.59,0,"YXZ"),fov:30};this.Xb=this.Me=this.ni=this.mi=null;this.U=new Kg(this.f.domElement);this.U.zg=Math.pow(2,2);this.U.vg=ca;this.Wm=this.Dk=0;this.tr=2;this.Lm=!1}t(Ui,W);e=Ui.prototype;e.init=function(){Ui.i.init.call(this);this.Km=this.m.getObjectByName("shower-handle");this.oi=this.m.getObjectByName("waterdrop");this.Mn=this.oi.position.y};
e.ab=function(){Ui.i.ab.call(this);this.B.pa||(this.mi=TweenMax.fromTo(this.oi.position,1.5,{y:this.Mn},{ease:Expo.easeIn,y:this.Mn-180,repeat:-1,repeatDelay:1,onRepeat:J.T.Ta,onRepeatParams:["water-drop"],onRepeatScope:J.T}),this.ni=TweenMax.fromTo(this.oi.scale,1.5,{y:1},{ease:Expo.easeIn,y:1.5,repeat:-1,repeatDelay:1}))};e.tb=function(){Ui.i.tb.call(this);this.mi&&this.mi.kill();this.ni&&this.ni.kill();this.Me&&this.Me.kill()};
e.Ma=function(){Ui.i.Ma.call(this);var a=this.f.Q.control,a={R:0,Ub:a.getPosition().clone(),Oc:this.di.position,Jf:jf(a).clone(),oe:this.di.rotation,If:Z(a),ne:this.di.fov};this.Me=TweenMax.to(a,2,{R:1,ease:Sine.easeInOut,onUpdate:this.Ki,onUpdateParams:[a],onUpdateScope:this,onComplete:this.Do,onCompleteScope:this})};e.Ca=function(){Ui.i.Ca.call(this);this.mi&&this.mi.kill();this.ni&&this.ni.kill();this.Me&&this.Me.kill()};e.finish=function(){this.oi.kc.Ng();this.Fa();this.Ca()};
e.Ki=function(a){this.f.Q.control.lerp(a.Ub,a.Oc,a.Jf,a.oe,a.If,a.ne,a.R)};e.Do=function(){this.Zb.j(this.U,"start",this.xd,!1,this);this.Zb.j(this.U,"drag",this.vd,!1,this);this.Zb.j(this.U,"end",this.wd,!1,this)};e.Uc=function(a){this.f.Q.control.setFov(a.fov)};e.xd=function(){if(!this.Lm){var a={fov:Z(this.f.Q.control)};this.Xb=TweenMax.to(a,0.5,{fov:this.di.fov-5,ease:Strong.easeOut,onUpdate:this.Uc,onUpdateParams:[a],onUpdateScope:this})}};e.wd=function(){this.Wm=0};
e.vd=function(a){if(!this.Lm){var b=J.ka.width/2,c=J.ka.height/2,d=Math.atan2(a.target.clientY-c,a.target.clientX-b),d=d-Math.atan2(a.target.Lf-c,a.target.Kf-b);a=180/Math.PI*d;b=Math.PI/180*a;c=Math.PI/180*this.Wm;b=Math.max(0,180/Math.PI*Math.atan2(Math.sin(b-c),Math.cos(b-c)));this.Wm=a;this.Dk+=b;a=Math.floor(this.Dk/360);c=Math.max(0,Math.min(1,this.Dk/(360*this.tr)));this.Km.rotation.x+=b*Math.PI/180*(1-c)*0.35;a>=this.tr&&(this.Lm=!0,a={fov:Z(this.f.Q.control)},this.Xb=TweenMax.to(a,1,{fov:this.di.fov,
ease:Strong.easeOut,onUpdate:this.Uc,onUpdateParams:[a],onUpdateScope:this,onComplete:this.finish,onCompleteScope:this}))}};function Vi(a,b,c,d,g){N.call(this);this.id=b;this.$=a;this.el=this.La=!1;this.Ar=c;this.domElement=ed("canvas");this.ya=d;this.ao=g;this.Vg=this.wg=this.ob=this.P=this.scene=this.Q=this.Hf=this.Cb=null;this.ma={};this.qo={};this.Ae={};this.Mp=[];this.Fb=new eh(0,0);this.renderer=this.Xo=this.Mh=null;this.k=new L(this)}t(Vi,N);e=Vi.prototype;
e.init=function(){this.scene=Wi(this.$,this.id).scene;this.Cb=new pg(this);this.Cb.init(this.scene);this.renderer=new ii(this.domElement,this.scene,this.Cb.cc);Xi(this);this.Hf=new ri(this);this.Q=new bi(this);this.Q.init();this.J()};function Yi(a){J.V.Ba(J.C.I.hp);var b=0,c=tb(a.ma),d=c.length,g=new dg(function(){c[b].Ya();b===d-1?(J.V.Ba(J.C.I.Vl),g.dispose()):(b++,g.start())},100);g.start()}function Zi(a){console.log(a.id+" DISPOSED!");z(a.ma,function(a){a.Ob()})}
function xg(a){a.Fb.qf()&&(a.Fb=a.Fb.update());return a.Fb}function vh(a){a=$i(a);return F(a,function(a){return!0===a.se})}function Eh(a){var b=tb(a.ma);Qb(b,a.Vg);Qb(b,a.ob);Qb(b,a.wg);return b=D(b,function(a){return null!=a.m.parent})}function Ah(a,b){return yb(a.ma,function(a){return a.id===b})}function $i(a){var b=[];z(a.ma,function(a){a instanceof zi&&b.push(a)});return b}
function Ag(a,b,c){c=new THREE.CubeCamera(0.1,1E3,c||J.Wi.Ll);c.position.copy(b);a.scene.add(c);a.Mp.push(c);return c.renderTarget}function aj(a){var b=a.renderer.L,c=a.scene;C(a.Mp,function(a){a.updateCubeMap(b,c)})}
e.t=function(){if(!this.el){this.el=!0;this.k.j(this.Fb,"resize",this.N,!1,this);this.k.j(this.Cb,J.d.e.G,this.pw,!1,this);this.k.j(this.ya.Pf,J.d.e.cb,this.Df,!1,this);this.k.j(this.ya.hf,J.d.e.cb,this.Df,!1,this);this.k.j(this.ya.jf,J.d.e.cb,this.Df,!1,this);this.k.j(this.ya.Cr,J.d.e.cb,this.Df,!1,this);var a=J.ea.na.bd.F();this.k.j(a,J.d.e.cb,this.lw,!1,this);this.k.j(a,J.d.e.Da,this.mw,!1,this);z(this.qo,function(a){a.t()});this.Q.t();this.P.t();TweenMax.ticker.addEventListener("tick",this.update,
this)}};e.n=function(){this.el&&(this.el=!1,TweenMax.ticker.removeEventListener("tick",this.update,this),this.k.removeAll(),z(this.qo,function(a){a.n()}),this.Q.n(),this.P.n())};e.show=function(){this.La||(this.La=!0,this.Ar.appendChild(this.domElement),TweenMax.set(this.domElement,{opacity:0,display:"block"}),this.N(),aj(this),this.dispatchEvent({type:J.d.e.Fe}))};e.J=function(){this.La&&(this.La=!1,TweenMax.set(this.domElement,{opacity:0,display:"none"}),this.dispatchEvent({type:J.d.e.fh}))};
e.xg=function(){this.La||this.show();var a=TweenMax.to(this.domElement,1,{delay:1,opacity:1,clearProps:"opacity"});this.dispatchEvent({type:J.d.e.cb});a.eventCallback("onComplete",s(function(){this.dispatchEvent({type:J.d.e.Sf})},this))};e.wi=function(){var a=TweenMax.to(this.domElement,1,{opacity:0});this.dispatchEvent({type:J.d.e.Da});a.eventCallback("onComplete",s(function(){this.J();this.dispatchEvent({type:J.d.e.ij})},this))};e.pause=function(){this.Q.control.pause(!0);si(this.Hf,!0);this.ya.pause(!0)};
e.resume=function(){this.Q.control.pause(!1);si(this.Hf,!1);this.ya.pause(!1)};e.render=function(){this.renderer.render()};
function Xi(a){a.scene.fog=new THREE.FogExp2(14277081,8E-4);var b=a.scene.getObjectByName("HemisphereLight"),c=b?b.position:new THREE.Vector3(200,200,200),b=new THREE.DirectionalLight(0,1);b.position.copy(c);b.target.position.set(0,0,0);b.castShadow=!0;c=J.Wi.shadowMapSize;b.shadowMapWidth=c;b.shadowMapHeight=c;b.shadowCameraLeft=-400;b.shadowCameraRight=400;b.shadowCameraTop=400;b.shadowCameraBottom=-400;b.shadowCameraNear=2;b.shadowCameraFar=800;b.shadowDarkness=0.1;a.scene.add(b);var d={tip:W,
replaceable:fh,movable:Gg,gateway:zi,mirror:ih,closet:ui,pictures:ch,computer:hi,lamp:Ri,bear:bh,cat:nh,drawer:Si,knife:Ti,refrigerator:ei,sewingmachine:ah,wallpaper:yi,windows:kh,showerhead:Ui,fruitplate:Bi,fruit:Jg,glassbowl:ti},g=a.$,h=a.id,k=s(function(a){if(a instanceof THREE.Object3D){var b=J.tf.ih.getData(g+"."+h+"."+a.name),c=b.O;c?new d[c](a,b,this):a instanceof THREE.Mesh&&new zg(a,b,this)}},a);C(a.scene.children,function(a){bj(a,k)});a.Mh=[a.$,a.id].join("-");nf(J.El,a.Mh,Eh(a));b=T.F();
(c=U(b,a.$+"."+a.id+".energyflow-data"))&&new oi(c.controlPoints,a.id,a.$);a.wg=new gi(a);b=U(b,a.$+"."+a.id+".skybox");a.Vg=new hh(b,a);a.ob=new Ei(a);a.P=new Qi;a.scene.add(a.P);z(a.ma,function(a){a.init()})}e.update=function(){var a=this.Q.control;this.ob.update(a.getPosition(),jf(a));this.render()};e.pw=function(a){this.renderer.Eb(a.camera)};e.Df=function(a){this.pause();var b=!0;a=a.currentTarget;a===this.ya.jf&&$e()&&(b=!1);b&&this.k.Ra(a,J.d.e.Da,this.wl,!1,this)};e.wl=function(){this.resume()};
e.lw=function(){this.pause();$h(this.$);J.T.Cc("book",0,1,2)};e.mw=function(){this.resume();ai(this.$);J.T.Cc("book",null,0,2,!0,!0)};e.N=function(){this.Cb.N(this.Fb.pi());this.renderer.setSize(this.Fb.width,this.Fb.height);this.render()};function bj(a,b){b(a);a instanceof THREE.Object3D&&C(a.children,function(a){bj(a,b)})}function Wi(a,b){var c=U(T.F(),a+"."+b+".scene-data");return{scene:J.v.K.Yr.parse(c)}}
function cj(a,b,c,d,g){if(!(u||w&&y("525")))return!0;if(Na&&g)return dj(a);if(g&&!d)return!1;r(b)&&(b=ej(b));if(!c&&(17==b||18==b||Na&&91==b))return!1;if(w&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(u&&d&&b==a)return!1;switch(a){case 13:return!(u&&kb(9));case 27:return!w}return dj(a)}
function dj(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||w&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function ej(a){if(Wa)a=fj(a);else if(Na&&w)a:switch(a){case 93:a=91;break a}return a}
function fj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}}function gj(a,b){N.call(this);a&&this.attach(a,b)}t(gj,N);e=gj.prototype;e.dc=null;e.jl=null;e.so=null;e.kl=null;e.Sb=-1;e.te=-1;e.Qn=!1;
var hj={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ij={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},jj=u||w&&y("525"),kj=Na&&Wa;e=gj.prototype;
e.Pv=function(a){w&&(17==this.Sb&&!a.ctrlKey||18==this.Sb&&!a.altKey||Na&&91==this.Sb&&!a.metaKey)&&(this.te=this.Sb=-1);-1==this.Sb&&(a.ctrlKey&&17!=a.keyCode?this.Sb=17:a.altKey&&18!=a.keyCode?this.Sb=18:a.metaKey&&91!=a.keyCode&&(this.Sb=91));jj&&!cj(a.keyCode,this.Sb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.te=ej(a.keyCode),kj&&(this.Qn=a.altKey))};e.Qv=function(a){this.te=this.Sb=-1;this.Qn=a.altKey};
e.handleEvent=function(a){var b=a.ec,c,d,g=b.altKey;u&&"keypress"==a.type?(c=this.te,d=13!=c&&27!=c?b.keyCode:0):w&&"keypress"==a.type?(c=this.te,d=0<=b.charCode&&63232>b.charCode&&dj(c)?b.charCode:0):Va?(c=this.te,d=dj(c)?b.keyCode:0):(c=b.keyCode||this.te,d=b.charCode||0,kj&&(g=this.Qn),Na&&63==d&&224==c&&(c=191));var h=c=ej(c),k=b.keyIdentifier;c?63232<=c&&c in hj?h=hj[c]:25==c&&a.shiftKey&&(h=9):k&&k in ij&&(h=ij[k]);a=h==this.Sb;this.Sb=h;b=new lj(h,d,a,b);b.altKey=g;this.dispatchEvent(b)};
e.Ir=function(){return this.dc};e.attach=function(a,b){this.kl&&this.detach();this.dc=a;this.jl=K(this.dc,"keypress",this,b);this.so=K(this.dc,"keydown",this.Pv,b,this);this.kl=K(this.dc,"keyup",this.Qv,b,this)};e.detach=function(){this.jl&&(ae(this.jl),ae(this.so),ae(this.kl),this.kl=this.so=this.jl=null);this.dc=null;this.te=this.Sb=-1};e.S=function(){gj.i.S.call(this);this.detach()};function lj(a,b,c,d){Od.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(lj,Od);
J.Wa={};J.Wa.gh=function(){N.call(this);lg();J.V=J.C.F();this.Th=new cg(null,250);this.Xq="studio.livingroom studio.bathroom house.livingroom house.corridor house.boysroom house.homeoffice".split(" ");this.ga=null;this.nk=[];this.X=this.ib=this.L=this.jd=this.Z=this.W=null;this.Lb=new THREE.Vector3;this.Ve=new THREE.Vector3;this.uc=this.Yj=this.Ic=this.da=this.Fh=null;this.fe=this.Mk=1;this.Wj=!0;this.init()};t(J.Wa.gh,N);m(J.Wa.gh);e=J.Wa.gh.prototype;
e.init=function(){var a=od(J.u.ud.Spline);document.body.appendChild(a);a=M("canvas",Yc("spline"))[0];this.L=new THREE.WebGLRenderer({canvas:a,antialias:!0});this.L.setClearColor(16776689,1);this.L.setSize(window.innerWidth,window.innerHeight);this.Z=new THREE.CombinedCamera(window.innerWidth,window.innerHeight,45,1,1E4,1,1E4);this.Z.position.x=500;this.Z.position.y=500;this.Z.position.z=500;this.jd=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,1E3);this.W=this.Z;this.Yj=new gj(document);
K(this.Yj,"key",this.Ho,!1,this);this.uc=new Ug(this.L.domElement);K(this.uc,"mousewheel",this.Bf,!1,this);K(this.L.domElement,"mousedown",this.Af,!1,this);K(window,"resize",this.N,!1,this);this.ib=new THREE.OrbitControls(this.W,this.L.domElement);this.ib.noZoom=!0;this.ib.noKeys=!0;a=[];Tb(a,this.Xq,"global");this.Th.load(a);Zd(this.Th,J.d.e.Tf,this.onLoadComplete,!1,this)};function mj(a){return F(a.ga.children,function(a){return a instanceof Uh})}
function nj(a){var b="cube"+Gb(a.X.wa,a.da);a.X.Ld.getObjectByName(b).material.opacity=1}function oj(a,b){a.Wj=b;C(a.ga.children,function(a){a instanceof Uh||(a.visible=b)})}function pj(a){var b=a.Ic?a.Ic.progress():0;a.Ic=null;a.xs();a.Ic.progress(b);a.vs()}e.render=function(){this.L.render(this.ga,this.W)};
e.onLoadComplete=function(a){var b=E(this.Xq,function(a){T.F();a=Wi(a.split(".")[0],a.split(".")[1]).scene;var b=new THREE.CameraHelper(this.jd);b.name="motionCameraHelper";a.add(b);b=[new THREE.Vector3(100,40,0),new THREE.Vector3(-30,50,-50),new THREE.Vector3(-100,50,-200)];b=new oi(b,!0,qi);a.add(b);return a},this);Tb(this.nk,b);this.ga=this.nk[0];this.ga.add(this.Z);this.ga.add(this.jd);this.ga.getObjectByName("motionCameraHelper");this.X=mj(this);this.da=this.X.wa[0];nj(this);ef(this);Af=wf=xf=
vf=!1;yf=!0;uf.F();K(this,J.d.e.hj,this.es,!1,this);K(this,J.d.e.gm,this.As,!1,this);K(this,J.d.e.G,this.onChange,!1,this);K(this,J.d.e.qp,this.xs,!1,this);K(this,J.d.e.fm,this.vs,!1,this);K(this,J.d.e.Ee,this.onProgress,!1,this);this.dispatchEvent({type:a.type,cy:this.nk});this.dispatchEvent({type:J.d.e.G,ug:this.da,Cl:this.X})};
e.onChange=function(a){!0===a.Xk?this.W=this.jd:!1===a.Xk&&(this.W=this.Z);a.Us&&(this.ga=F(this.nk,function(b){return b.name===a.Us}),this.ga.add(this.Z),this.ga.add(this.jd),this.X&&this.X.n(),this.X=mj(this),this.X.t(),this.da=this.X.wa[0],nj(this),this.ga.getObjectByName("motionCameraHelper"),pj(this),oj(this,!0),this.dispatchEvent({type:J.d.e.G,ug:this.da,Cl:this.X}))};
e.xs=function(){if(!this.Ic){var a={progress:0};this.Ic=TweenMax.to(a,10,{progress:1,Uy:Linear.easeNone,onUpdate:this.onProgress,az:[a],bz:this,zf:this.zf,$y:this})}1===this.Ic.progress()?this.Ic.restart():this.Ic.play()};e.onProgress=function(a){this.dispatchEvent({type:J.d.e.G,progress:a.progress});a=Wh(this.X,a.progress);this.jd.position.copy(a.position);this.jd.rotation.copy(a.rotation)};e.vs=function(){this.Ic.pause()};e.zf=function(){this.dispatchEvent({type:J.d.e.G,complete:!0})};
e.es=function(){if(this.da){var a=this.X,b=this.da,b=b instanceof THREE.Mesh?b.userData.id:b instanceof THREE.Vector3?Gb(a.wa,b):r(b)?b:a.wa.length-1,c=a.wa[b],d=a.wa[Math.min(a.wa.length-1,b+1)],c=c===d?c.clone().add(c):c.clone().lerp(d,0.5);Ub(a.wa,b+1,0,c);cf(a);a.Ld.getObjectByName("cube"+(b+1));a=Gb(this.X.wa,this.da)+1;this.da=this.X.wa[a];cf(this.X);nj(this)}};
e.As=function(){if(this.da){var a=Gb(this.X.wa,this.da),b=Math.max(0,a-1);a===b&&1>=this.X.wa.length||(a=this.da,this.da=this.X.wa[b],b=this.X,a=a instanceof THREE.Mesh?a.userData.id:a instanceof THREE.Vector3?Gb(b.wa,a):r(a)?a:b.wa.length-1,B.splice.call(b.wa,a,1),cf(b),cf(this.X),nj(this))}};
e.Af=function(a){this.Lb.x=a.clientX/window.innerWidth*2-1;this.Lb.y=2*-(a.clientY/window.innerHeight)+1;a=(new THREE.Projector).pickingRay(this.Lb,this.W);var b=[];C(this.ga.children,function(a){a instanceof Uh&&Tb(b,Vh(a))});a=a.intersectObjects(b);0<a.length&&(a=a[0],a.object instanceof THREE.Mesh&&(this.Fh=a,this.X=this.Fh.object.parent.parent,this.da=this.Fh.object.userData.position,this.Ve.copy(this.Fh.point).sub(this.da),this.ib.enabled=!1,K(document,"mousemove",this.Jg,!1,this),K(document,
"mouseup",this.rs,!1,this),cf(this.X),nj(this)));this.dispatchEvent({type:J.d.e.G,ug:this.da,Cl:this.X})};e.Jg=function(a){this.Lb.x=a.clientX/window.innerWidth*2-1;this.Lb.y=2*-(a.clientY/window.innerHeight)+1;a=(new THREE.Projector).pickingRay(this.Lb,this.W).ray;a=a.direction.clone().multiplyScalar(this.Fh.distance).add(a.origin);a.sub(this.Ve);this.da.copy(a);cf(this.X);nj(this);pj(this);this.dispatchEvent({type:J.d.e.G,ug:this.da})};
e.rs=function(){this.ib.enabled=!0;$d(document,"mousemove",this.Jg,!1,this);$d(document,"mouseup",this.rs,!1,this)};
e.Ho=function(a){switch(a.target.tagName){case "TEXTAREA":case "INPUT":return!1}a.preventDefault();switch(a.keyCode){case 9:this.Z.inPerspectiveMode?(this.Mk=10,this.Z.toOrthographic()):(this.Mk=1,this.Z.toPerspective());this.Z.setZoom(this.fe*this.Mk);break;case 49:this.Z.position.x=0;this.Z.position.y=500;this.Z.position.z=0;break;case 50:this.Z.position.x=0;this.Z.position.y=-500;this.Z.position.z=0;break;case 51:this.Z.position.x=500;this.Z.position.y=0;this.Z.position.z=0;break;case 52:this.Z.position.x=
-500;this.Z.position.y=0;this.Z.position.z=0;break;case 53:this.Z.position.x=0;this.Z.position.y=0;this.Z.position.z=500;break;case 54:this.Z.position.x=0;this.Z.position.y=0;this.Z.position.z=-500;break;case 187:this.es();break;case 189:this.As();break;case 67:this.dispatchEvent({type:J.d.e.G,Xk:this.W===this.Z});break;case 72:this.Wj=!this.Wj,oj(this,this.Wj)}};e.Bf=function(a){a.preventDefault();this.fe=0<a.pb?this.fe/1.1:1.1*this.fe;this.Z.setZoom(this.fe*this.Mk)};
e.Db=function(){this.ib.update();this.render()};e.N=function(){this.Z.setSize(window.innerWidth,window.innerHeight);this.Z.updateProjectionMatrix();this.jd.aspect=window.innerWidth/window.innerHeight;this.jd.updateProjectionMatrix();this.L.setSize(window.innerWidth,window.innerHeight);this.render()};function qj(){}function rj(){}t(rj,qj);rj.prototype.rb=function(){var a=0;kc(this.Hd(!0),function(){a++});return a};rj.prototype.clear=function(){var a=lc(this.Hd(!0)),b=this;C(a,function(a){b.remove(a)})};
function sj(a){this.Cd=a}t(sj,rj);e=sj.prototype;e.set=function(a,b){try{this.Cd.setItem(a,b)}catch(c){if(0==this.Cd.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};e.get=function(a){a=this.Cd.getItem(a);if(!q(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};e.remove=function(a){this.Cd.removeItem(a)};e.rb=function(){return this.Cd.length};
e.Hd=function(a){var b=0,c=this.Cd,d=new ic;d.rl=function(){if(b>=c.length)throw hc;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!q(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};e.clear=function(){this.Cd.clear()};e.key=function(a){return this.Cd.key(a)};function tj(){var a=null;try{a=window.localStorage||null}catch(b){}this.Cd=a}t(tj,sj);function uj(){tj.call(this);ea(vj(this))||this.set("sound",!0)}t(uj,tj);m(uj);
function vj(a){if(!0===JSON.parse(a.get("sound")))return!0;if(!1===JSON.parse(a.get("sound")))return!1}J.ea.ez={};function wj(a){N.call(this);this.domElement=a;this.Xj=!1;this.k=new L(this);this.Np=0;this.om=new dg(this.Yn,this.Np,this);this.jn=new dg(this.Hi,1E3,this);this.kn=new dg(this.Ii,250,this)}t(wj,N);e=wj.prototype;e.t=function(){};e.n=function(){this.k.removeAll();this.jn.stop();this.kn.stop()};e.toggle=function(){this.Xj?this.D():this.H()};
e.H=function(a){a=r(a)?a:this.Np;this.om.start(a);this.dispatchEvent(J.d.e.cb)};e.Yn=function(){this.Xj=!0;P(this.domElement,"shown");this.om.stop();this.kn.stop();this.jn.start()};e.D=function(){this.n();Q(this.domElement,"shown");J.T.Ta("close");this.dispatchEvent(J.d.e.Da);this.om.stop();this.jn.stop();this.kn.start()};e.Hi=function(){this.t()};e.Ii=function(){this.Xj=!1;this.dispatchEvent(J.d.e.Fd)};
function xj(){var a=od(J.u.common.It,{sg:J.ra.assetsPath});wj.call(this,a);this.Ln=M("video",this.domElement);this.ir=M(".steps li",this.domElement);this.dv=M(".title li",this.domElement);C(this.Ln,function(a){R(a,"visibility","hidden")},this);this.Kc=-1;this.Jn=this.ir.length;this.uk=this.de=null;this.Kq=0;this.Te=!1;this.yb=this.xb=null;this.Uf=s(this.D,this);this.qn=M(".prev",this.domElement)[0];this.Oh=M(".next",this.domElement)[0];this.wb=I("controls",this.domElement);this.Zj=I("loader",this.domElement);
this.Ij=I("fill",this.domElement);this.Kp=I("counter",this.domElement);this.ai=I("skip",this.domElement)}t(xj,wj);m(xj);e=xj.prototype;e.$x=function(){var a=Math.max(0,this.Kc-1);this.Kc!==a&&yj(this,a)};e.$v=function(){var a=Math.min(this.Jn-1,this.Kc+1);this.Kc!==a&&yj(this,a)};
function yj(a,b){a.Kc=b;a.de&&a.uk&&a.In&&(a.de.pause(),a.k.Ia(a.de,"ended",a.Js,!1,a),Q(a.In,"active"),Q(a.uk,"active"));a.qn.disabled=!1;a.Oh.disabled=!1;0===a.Kc?a.qn.disabled=!0:a.Kc===a.Jn-1&&(a.Oh.disabled=!0,X(a.wb,"hidden",!1));a.In=a.dv[a.Kc];a.uk=a.ir[a.Kc];P(a.In,"active");P(a.uk,"active");a.de=a.Ln[a.Kc];a.de.currentTime=0;a.de.play();a.k.Ra(a.de,"ended",a.Js,!1,a)}e.H=function(){xj.i.H.call(this,200)};
e.t=function(){xj.i.t.call(this);this.k.j(this.ai,"click",this.D,!1,this);this.k.j(this.qn,"click",this.$x,!1,this);this.k.j(this.Oh,"click",this.$v,!1,this);this.xb=J.M.bind(this.Uf,J.M.key.lj,!0);this.yb=J.M.bind(this.Uf,J.M.key.Ce,!0);this.Te?yj(this,0):C(this.Ln,function(a){a.load();this.k.Ra(a,"canplay",this.Tx,!1,this)},this)};e.n=function(){xj.i.n.call(this);this.de.pause();Yg(J.M,this.xb);Yg(J.M,this.yb)};
function zj(){var a=J.ub;TweenMax.fromTo(a.Zj,0.25,{opacity:0,y:20},{opacity:1,y:0,display:"block",ease:Strong.easeInOut});TweenMax.set(a.ai,{display:"none"})}e.Yc=function(a){a=Math.round(100*a);R(this.Ij,"width",a+"%");this.Kp.innerHTML=(9<a?a:"0"+a)+"%"};e.Tx=function(a){this.Kq++;this.Kq>=this.Jn&&(this.Te=!0,this.Xj&&yj(this,0));R(a.currentTarget,"visibility","visible")};e.Js=function(a){a.currentTarget.play()};e.Ii=function(){xj.i.Ii.call(this);yj(this,0)};
function Aj(a){if(a.classList)return a.classList;a=a.className;return q(a)&&a.match(/\S+/g)||[]}function Bj(a,b){return a.classList?a.classList.contains(b):Nb(Aj(a),b)}function P(a,b){a.classList?a.classList.add(b):Bj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Q(a,b){a.classList?a.classList.remove(b):Bj(a,b)&&(a.className=D(Aj(a),function(a){return a!=b}).join(" "))}function Cj(a,b){a.classList?C(b,function(b){Q(a,b)}):a.className=D(Aj(a),function(a){return!Nb(b,a)}).join(" ")}
function X(a,b,c){c?P(a,b):Q(a,b)}function Y(a,b,c){Q(a,b);P(a,c)}
function Dj(){N.call(this);this.domElement=Yc("main-options");this.Eh=M(".info",this.domElement)[0];this.pq=M(".instructions",this.domElement)[0];this.Lp=M(".credits",this.domElement)[0];this.rk=M(".sound",this.domElement)[0];this.dr=I("on",this.rk);this.cr=I("off",this.rk);this.Xp=M(".facebook",this.domElement)[0];this.ur=M(".twitter",this.domElement)[0];this.cq=M(".google",this.domElement)[0];O(this.Eh,!1);vj(J.aj)||this.ss();K(this.pq,"click",this.Y,!1,this);K(this.Lp,"click",this.Y,!1,this);K(this.dr,
"click",this.Y,!1,this);K(this.cr,"click",this.Y,!1,this);K(this.Xp,"click",this.Y,!1,this);K(this.ur,"click",this.Y,!1,this);K(this.cq,"click",this.Y,!1,this);J.T.j(J.d.e.pp,this.ss,!1,this);J.T.j(J.d.e.vp,this.Sx,!1,this)}t(Dj,N);Dj.prototype.Y=function(a){switch(a.currentTarget){case this.pq:J.ub.toggle();break;case this.Lp:J.si.toggle();break;case this.dr:J.T.unmute();break;case this.cr:J.T.mute();break;case this.Xp:case this.ur:case this.cq:a.preventDefault(),J.v.Utils.Fl(a.currentTarget.href)}};
Dj.prototype.ss=function(){P(this.rk,"mute")};Dj.prototype.Sx=function(){Q(this.rk,"mute")};function Ej(a){N.call(this);this.ui=a||Vc();if(this.Br=this.Gr())this.Fv=K(this.ui.Qa,this.Br,s(this.Ov,this))}t(Ej,N);e=Ej.prototype;e.Gr=re(function(){var a=this.isSupported(),b="hidden"!=this.fo();return a?b?((Ef()||"")+"visibilitychange").toLowerCase():"visibilitychange":null});e.fo=re(function(){return Ff("hidden",this.ui.Qa)});e.Kv=re(function(){return Ff("visibilityState",this.ui.Qa)});
e.isSupported=function(){return!!this.fo()};e.Ov=function(){var a=this.isSupported()?this.ui.Qa[this.Kv()]:null,a=new Fj(!!this.ui.Qa[this.fo()],a);this.dispatchEvent(a)};e.S=function(){ae(this.Fv);Ej.i.S.call(this)};function Fj(a,b){Ld.call(this,"visibilitychange");this.hidden=a;this.visibilityState=b}t(Fj,Ld);
function Gj(){function a(a){var b=[];b[0]=J.ra.assetsPath+"audio/"+a+".mp3";b[1]=J.ra.assetsPath+"audio/"+a+".ogg";return b}N.call(this);this.la={};this.la[Ai]={};this.la[Hj]={};this.la[Ij]={};this.og={};this.og[Ai]={};this.og[Hj]={};this.og[Ij]={};this.Lq=this.Mq=0;this.Um=this.Te=!1;var b=s(this.Hx,this);this.Ej={};this.Ej[Ai]={click:{urls:a("sfx/click"),onload:b},close:{urls:a("sfx/close"),onload:b},confirm:{urls:a("sfx/confirm"),onload:b},"thrust-up":{urls:a("sfx/thrust-up"),onload:b},"thrust-down":{urls:a("sfx/thrust-down"),
onload:b},"door-open":{urls:a("sfx/door-open"),onload:b},"door-close":{urls:a("sfx/door-close"),onload:b},"entry-open":{urls:a("sfx/entry-open"),onload:b},"entry-close":{urls:a("sfx/entry-close"),onload:b},footsteps:{urls:a("sfx/footsteps"),onend:s(this.we,this,"footsteps","sfx"),onload:b},"refrigerator-open":{urls:a("sfx/refrigerator-open"),onload:b},"refrigerator-close":{urls:a("sfx/refrigerator-close"),onload:b},"water-drop":{urls:a("sfx/water-drop"),onload:b}};this.Ej[Hj]={studio:{urls:a("ambient/city-distant-traffic"),
volume:0,onend:s(this.we,this,"studio","ambient"),onload:b},house:{urls:a("ambient/subdivision"),volume:0,onend:s(this.we,this,"house","ambient"),onload:b}};this.Ej[Ij]={"first-class":{urls:a("loop/first-class"),volume:0,onend:s(this.we,this,"first-class","loop"),onload:b},"optimize-loop-1":{urls:a("loop/optimize-loop-1"),volume:0,onend:s(this.we,this,"optimize-loop-1","loop"),onload:b},serendipity:{urls:a("loop/serendipity"),volume:0,onend:s(this.we,this,"serendipity","loop"),onload:b},closeup:{urls:a("loop/optimize-loop-7"),
volume:0,onend:s(this.we,this,"closeup","loop"),onload:b},book:{urls:a("loop/optimize-loop-8"),volume:0,onend:s(this.we,this,"book","loop"),onload:b}};z(this.Ej,function(a,b){z(a,function(a,c){var d=new Howl(a);d.ye=c;d.ze=b;this.la[b][c]=d;d={Wo:d,volume:d.volume(),Ns:!1,ct:!1};this.og[b][c]=d;this.Mq++},this)},this);var b=s(this.$a,this),c=s(this.Cc,this);this.dn={studio:{position:0,time:0,duration:25E3,Wg:new oe(1E3),Zi:[this.la[Ij]["optimize-loop-1"],this.la[Hj].studio,this.la[Ij].serendipity,
this.la[Hj].studio,this.la[Ij]["first-class"],this.la[Hj].studio],$a:b,Cc:c},house:{position:0,time:0,duration:25E3,Wg:new oe(1E3),Zi:[this.la[Ij]["optimize-loop-1"],this.la[Hj].house,this.la[Ij].serendipity,this.la[Hj].house,this.la[Ij]["first-class"],this.la[Hj].house],$a:b,Cc:c}};z(this.dn,function(a){a.Wg.j(pe,this.dx,!1,a)},this);vj(J.aj)?this.unmute():this.mute();b=new Ej;b.isSupported()&&(c=b.Gr(),K(b,c,this.mx))}t(Gj,N);m(Gj);e=Gj.prototype;
e.we=function(a,b){var c;switch(b){case Hj:c=this.la[Hj][a];break;case Ij:c=this.la[Ij][a];break;case Ai:c=this.la[Ai][a]}c.play()};e.mute=function(){Howler.mute();this.Um=!0;J.aj.set("sound",!1);this.dispatchEvent(J.d.e.pp)};e.unmute=function(){Howler.unmute();this.Um=!1;J.aj.set("sound",!0);this.dispatchEvent(J.d.e.vp)};e.toggle=function(){this.Um?this.unmute():this.mute()};e.Ta=function(a){a=this.la[Ai][a];if(!this.Te)return a;a.play();return a};
function ai(a,b){var c=J.T,d=c.dn[a];if(!d.Wg.enabled){d.Wg.start();d.position=d.position;var d=d.Zi[d.position],g=r(b)?b:5;d.ze===Hj?c.$a(d.ye,0,1,g):d.ze===Ij&&c.Cc(d.ye,0,1,g)}}function $h(a,b){var c=J.T,d=c.dn[a];if(d.Wg.enabled){d.Wg.stop();var g=d.Zi[d.position];g.ze===Hj?c.$a(g.ye,null,0,b,!0):g.ze===Ij&&c.Cc(g.ye,null,0,b,!0);d.position=d.position}}
function Jj(a,b,c,d,g,h,k){b.volume=r(c)?c:b.Wo.volume();b.Ns=h;b.ct=k;TweenMax.to(b,g||1,{volume:d,ease:Linear.easeNone,onUpdate:a.Pw,onUpdateParams:[b],onUpdateScope:a,onComplete:a.Ow,onCompleteParams:[b],onCompleteScope:a})}e.Cc=function(a,b,c,d,g,h){var k=this.la[Ij][a];this.Te&&(k.pause(),k.play());Jj(this,this.og[Ij][a],b,c,d,g,h)};e.$a=function(a,b,c,d,g,h){var k=this.la[Hj][a];this.Te&&(k.pause(),k.play());Jj(this,this.og[Hj][a],b,c,d,g,h)};e.Pw=function(a){a.Wo.volume(a.volume)};
e.Ow=function(a){var b=a.Wo,c=a.Ns;!0===a.ct&&b.stop();!0===c&&b.pause()};e.dx=function(){var a=!1;this.time>=this.duration?(a=!0,this.time=0):this.time+=1E3;if(a){var a=this.Zi,b=a[this.position];b.ze===Hj?this.$a(b.ye,null,0.4,10):b.ze===Ij&&this.Cc(b.ye,null,0,10,!0);this.position++;this.position>=this.Zi.length&&(this.position=0);a=a[this.position];a.ze===Hj?this.$a(a.ye,0,1,10):a.ze===Ij&&this.Cc(a.ye,0,0.5,10)}};e.Hx=function(){this.Lq++;if(this.Lq===this.Mq)this.onLoadComplete()};
e.onLoadComplete=function(){this.Te=!0;console.log("all sounds loaded: ",this.la)};e.mx=function(a){a.hidden?Howler._muted||Howler.volume(0):Howler._muted||Howler.volume(1)};var Ai="sfx",Hj="ambient",Ij="loop";function Kj(){}Kj.prototype.yr=null;function Lj(a){var b;(b=a.yr)||(b={},Mj(a)&&(b[0]=!0,b[1]=!0),b=a.yr=b);return b}var Nj;function Oj(){}t(Oj,Kj);function Pj(a){return(a=Mj(a))?new ActiveXObject(a):new XMLHttpRequest}
function Mj(a){if(!a.Nr&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Nr=d}catch(g){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.Nr}Nj=new Oj;function Qj(a){this.Aa=new mc;a&&this.Pn(a)}
function Rj(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a}e=Qj.prototype;e.rb=function(){return this.Aa.rb()};e.add=function(a){this.Aa.set(Rj(a),a)};e.Pn=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};e.removeAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};e.remove=function(a){return this.Aa.remove(Rj(a))};e.clear=function(){this.Aa.clear()};e.qf=function(){return this.Aa.qf()};e.contains=function(a){return this.Aa.gf(Rj(a))};
e.Rb=function(){return this.Aa.Rb()};e.clone=function(){return new Qj(this)};e.equals=function(a){return this.rb()==qc(a)&&Sj(this,a)};function Sj(a,b){var c=qc(b);if(a.rb()>c)return!1;!(b instanceof Qj)&&5<c&&(b=new Qj(b));return uc(a,function(a){var c=b;if("function"==typeof c.contains)a=c.contains(a);else if("function"==typeof c.Wn)a=c.Wn(a);else if(ga(c)||q(c))a=Nb(c,a);else a:{for(var h in c)if(c[h]==a){a=!0;break a}a=!1}return a})}e.Hd=function(){return this.Aa.Hd(!1)};
function Tj(a){N.call(this);this.headers=new mc;this.Ul=a||null;this.he=!1;this.Tl=this.aa=null;this.ll=this.uo="";this.pf=this.oo=this.dl=this.bo=!1;this.Ol=0;this.Nl=null;this.Ps=Uj;this.dp=this.xy=!1}t(Tj,N);var Uj="",Vj=/^https?$/i,Wj=["POST","PUT"],Xj=[];function Yj(a,b){var c=new Tj;Xj.push(c);b&&c.j("complete",b);c.Ra("ready",c.qv);c.send(a,void 0,void 0,void 0)}e=Tj.prototype;e.qv=function(){this.dispose();Qb(Xj,this)};
e.send=function(a,b,c,d){if(this.aa)throw Error("[goog.net.XhrIo] Object is active with another request="+this.uo+"; newUri="+a);b=b?b.toUpperCase():"GET";this.uo=a;this.ll="";this.bo=!1;this.he=!0;this.aa=this.Ul?Pj(this.Ul):Pj(Nj);this.Tl=this.Ul?Lj(this.Ul):Lj(Nj);this.aa.onreadystatechange=s(this.ys,this);try{this.oo=!0,this.aa.open(b,String(a),!0),this.oo=!1}catch(g){Zj(this,g);return}a=c||"";var h=this.headers.clone();d&&tc(d,function(a,b){h.set(b,a)});d=F(h.qe(),ak);c=f.FormData&&a instanceof
f.FormData;!Nb(Wj,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");tc(h,function(a,b){this.aa.setRequestHeader(b,a)},this);this.Ps&&(this.aa.responseType=this.Ps);"withCredentials"in this.aa&&(this.aa.withCredentials=this.xy);try{bk(this),0<this.Ol&&((this.dp=ck(this.aa))?(this.aa.timeout=this.Ol,this.aa.ontimeout=s(this.dt,this)):this.Nl=qe(this.dt,this.Ol,this)),this.dl=!0,this.aa.send(a),this.dl=!1}catch(k){Zj(this,k)}};
function ck(a){return u&&y(9)&&r(a.timeout)&&ea(a.ontimeout)}function ak(a){return"content-type"==a.toLowerCase()}e.dt=function(){"undefined"!=typeof aa&&this.aa&&(this.ll="Timed out after "+this.Ol+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};function Zj(a,b){a.he=!1;a.aa&&(a.pf=!0,a.aa.abort(),a.pf=!1);a.ll=b;dk(a);ek(a)}function dk(a){a.bo||(a.bo=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
e.abort=function(){this.aa&&this.he&&(this.he=!1,this.pf=!0,this.aa.abort(),this.pf=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ek(this))};e.S=function(){this.aa&&(this.he&&(this.he=!1,this.pf=!0,this.aa.abort(),this.pf=!1),ek(this,!0));Tj.i.S.call(this)};e.ys=function(){this.Bc||(this.oo||this.dl||this.pf?fk(this):this.zx())};e.zx=function(){fk(this)};
function fk(a){if(a.he&&"undefined"!=typeof aa&&(!a.Tl[1]||4!=gk(a)||2!=hk(a)))if(a.dl&&4==gk(a))qe(a.ys,0,a);else if(a.dispatchEvent("readystatechange"),4==gk(a)){a.he=!1;try{if(ik(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{var b;try{b=2<gk(a)?a.aa.statusText:""}catch(c){b=""}a.ll=b+" ["+hk(a)+"]";dk(a)}}finally{ek(a)}}}function ek(a,b){if(a.aa){bk(a);var c=a.aa,d=a.Tl[0]?ca:null;a.aa=null;a.Tl=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(g){}}}
function bk(a){a.aa&&a.dp&&(a.aa.ontimeout=null);r(a.Nl)&&(f.clearTimeout(a.Nl),a.Nl=null)}e.isActive=function(){return!!this.aa};function ik(a){var b=hk(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=pb(String(a.uo))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Vj.test(a?a.toLowerCase():"");c=b}return c}function gk(a){return a.aa?a.aa.readyState:0}
function hk(a){try{return 2<gk(a)?a.aa.status:-1}catch(b){return-1}}function jk(a){try{return a.aa?a.aa.responseText:""}catch(b){return""}}J.P.hm=function(){this.Ys=null;var a=J.ra.assetsPath+"html/shaders.html",b=s(this.zf,this);Yj(a,b)};m(J.P.hm);function Hi(a){return F(J.iy.Ys,function(b){return b.id===a}).textContent}J.P.hm.prototype.zf=function(a){if(ik(a.target)){var b=ed("div");b.innerHTML=jk(a.target);a=id(b);this.Ys=E(a,function(a){return a})}};
function kk(){N.call(this);this.key={Ce:27,lj:13,LEFT:37,RIGHT:39,UP:38,Cy:40};this.jh={};this.Hh={};this.Yj=new gj(document);K(this.Yj,"key",this.Ho,!1,this)}t(kk,N);m(kk);kk.prototype.bind=function(a,b,c){var d=xb(this.jh,function(d,h){return h.of===a&&h.Tr===b&&h.Ms===c});if(d)return d;d=Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^pa()).toString(36);Bb(this.jh,d,{of:a,Tr:b,Ms:c});this.Hh[b]=this.Hh[b]||[];Pb(this.Hh[b],d);return d};
function Yg(a,b){var c=a.jh[b];c&&(Qb(a.Hh[c.Tr],b),c=a.jh,b in c&&delete c[b])}kk.prototype.Ho=function(a){var b=this.Hh[a.keyCode];if(!b||a.repeat)return!1;C(b,function(a){var b=this.jh[a];b.of();b.Ms&&Yg(this,a)},this)};function lk(a,b){this.type=a;this.currentTarget=this.target=b||null}lk.prototype.zd=!1;lk.prototype.defaultPrevented=!1;lk.prototype.Xi=!0;lk.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Xi=!1};
function mk(a){a=new lk("mouseover",a);var b=a.relatedTarget=void 0;if(!b&&a.target&&1==a.target.nodeType)try{var c=a.target;if(1==c.nodeType){var d;if(c.getBoundingClientRect){var g=Lf(c);d=new H(g.left,g.top)}else{var h=ld(Vc(c)),k=Nf(c);d=new H(k.x-h.x,k.y-h.y)}var l;if(Wa&&!y(12)){var n=d,p;var v;u?v="-ms-transform":w?v="-webkit-transform":Va?v="-o-transform":Wa&&(v="-moz-transform");var x;v&&(x=If(c,v));x||(x=If(c,"transform"));if(x){var A=x.match(Wf);p=A?new H(parseFloat(A[1]),parseFloat(A[2])):
new H(0,0)}else p=new H(0,0);l=new H(n.x+p.x,n.y+p.y)}else l=d;b=l}else n=ha(c.Hv),l=c,c.targetTouches?l=c.targetTouches[0]:n&&c.ec.targetTouches&&(l=c.ec.targetTouches[0]),b=new H(l.clientX,l.clientY)}catch(Ta){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Xi=!0;c=[];for(b=a.target;b;b=b.parentNode)c.push(b);for(b=c.length-1;0<=b&&!a.zd;b--)l=c[b],p=a.type,v=new Od(a,c[b]),sd(l)?ge(l,p,!0,v):be(l,p,!0,v);for(b=0;b<c.length&&!a.zd;b++)l=c[b],p=a.type,v=new Od(a,c[b]),
sd(l)?ge(l,p,!1,v):be(l,p,!1,v)}function nk(){N.call(this);this.domElement=od(J.u.ud.st,{Ed:Re});zf(J.C.I.em,this.init,this)}t(nk,N);m(nk);e=nk.prototype;
e.init=function(){this.mb=M("> .prompt",this.domElement)[0];this.va=I("studio",this.domElement);this.sa=I("house",this.domElement);this.jr=M("a.studio",this.domElement)[0];this.kq=M("a.house",this.domElement)[0];this.Zt=this.xp=0;this.ck=this.pc=this.qc=null;this.k=new L(this);this.eu=s(this.Mr,this);this.du=s(this.Lr,this);this.Hu=s(this.xx,this);this.xb=this.mq=this.nq=null;this.reset()};
e.t=function(){this.k.Ra(this.domElement,"mousemove",this.ex,!1,this);this.k.j(this.va,J.d.e.np,this.ps,!1,this);this.k.j(this.sa,J.d.e.np,this.ps,!1,this);this.k.j(this.va,"mouseout",this.ue,!1,this);this.k.j(this.sa,"mouseout",this.ue,!1,this);this.k.j(this.jr,"click",this.js,!1,this);this.k.j(this.kq,"click",this.js,!1,this);J.Rg.j(J.d.e.He,this.onLoadStart,!1,this);J.Rg.j(J.d.e.Ee,this.onLoadProgress,!1,this);J.Rg.j(J.d.e.Gb,this.onLoadComplete,!1,this);this.nq=J.M.bind(this.eu,J.M.key.LEFT);
this.mq=J.M.bind(this.du,J.M.key.RIGHT);this.xb=J.M.bind(this.Hu,J.M.key.lj,!0)};e.n=function(){this.k.removeAll();f.clearTimeout(this.xp);f.clearTimeout(this.Zt);Yg(J.M,this.nq);Yg(J.M,this.mq);Yg(J.M,this.xb)};e.reset=function(){hd(J.ub.domElement);X(this.mb,"hidden",!1);X(this.va,"active",!1);X(this.va,"inactive",!1);X(this.va,"loading",!1);X(this.va,"hidden",!1);X(this.sa,"active",!1);X(this.sa,"inactive",!1);X(this.sa,"loading",!1);X(this.sa,"hidden",!1);this.qc=null};
e.H=function(){this.reset();this.xp=qe(this.t,2E3,this)};e.D=function(){this.n();J.T.$a("studio",null,0,4,!0);J.T.$a("house",null,0,4,!0)};
function ok(a){a.qc===a.va?(X(a.va,"active",!0),X(a.va,"inactive",!1),X(a.sa,"active",!1),X(a.sa,"inactive",!0),X(a.mb,"hidden",!0),Y(a.mb,"house","studio"),J.T.$a("studio",null,1,4),J.T.$a("house",null,0,4)):a.qc===a.sa?(X(a.va,"active",!1),X(a.va,"inactive",!0),X(a.sa,"active",!0),X(a.sa,"inactive",!1),X(a.mb,"hidden",!0),Y(a.mb,"studio","house"),J.T.$a("studio",null,0,4),J.T.$a("house",null,1,4)):(X(a.va,"active",!1),X(a.va,"inactive",!1),X(a.sa,"active",!1),X(a.sa,"inactive",!1),X(a.mb,"hidden",
!1),Q(a.mb,"studio"),Q(a.mb,"house"),J.T.$a("studio",null,0,4),J.T.$a("house",null,0,4))}e.Mr=function(){this.qc!==this.va&&(this.qc=this.va,ok(this))};e.Lr=function(){this.qc!==this.sa&&(this.qc=this.sa,ok(this))};e.zv=function(){this.pc.H();this.dispatchEvent({type:J.d.e.Gb,ao:this.pc})};e.xx=function(){this.qc===this.va?J.hc.Tg(Re.tp):this.qc===this.sa&&J.hc.Tg(Re.kp)};e.ps=function(a){if(a.currentTarget===this.qc)return!1;switch(a.currentTarget){case this.va:this.Mr();break;case this.sa:this.Lr()}};
e.ue=function(a){a.relatedTarget&&jd(this.domElement,a.relatedTarget)||(this.qc=null,ok(this))};e.ex=function(a){jd(this.va,a.target)?mk(this.va):jd(this.sa,a.target)&&mk(this.sa)};
e.js=function(a){a.preventDefault();this.n();X(this.mb,"hidden",!0);J.ub.Yc(0);zj();J.ub.H();switch(a.currentTarget){case this.jr:X(this.va,"loading",!0);X(this.sa,"hidden",!0);this.va.appendChild(J.ub.domElement);break;case this.kq:X(this.va,"hidden",!0),X(this.sa,"loading",!0),this.sa.appendChild(J.ub.domElement)}qe(function(){window.location.href=a.currentTarget.href},2E3);J.T.Ta("confirm")};
e.onLoadStart=function(a){this.ck=this.pc;this.pc=a.target.Sa;console.log(this.pc.id+": load start");zf(J.C.I.hp,this.nw,this);zf(J.C.I.Vl,this.Co,this)};e.onLoadProgress=function(a){J.ub.Yc(a.progress)};
e.onLoadComplete=function(){console.log(this.pc.id+": load complete");J.ub.Kp.innerHTML="Preparing for your visit";this.ck&&(this.ck.J(),this.ck=null);J.Rg.Ia(J.d.e.He,this.onLoadStart,!1,this);J.Rg.Ia(J.d.e.Ee,this.onLoadProgress,!1,this);J.Rg.Ia(J.d.e.Gb,this.onLoadComplete,!1,this);J.ub.Ra(J.d.e.Fd,this.zv,!1,this)};e.nw=function(){};
e.Co=function(){var a=J.ub;TweenMax.to(a.Zj,0.25,{opacity:0,y:20,display:"none",ease:Strong.easeInOut});TweenMax.fromTo(a.ai,0.25,{display:"none",opacity:0,y:20},{delay:0.6,opacity:1,y:0,display:"block",ease:Strong.easeInOut})};
function pk(){var a=od(J.u.common.ot);wj.call(this,a);this.ta=I("scroller",this.domElement);this.Uu=I("scrollbar",this.ta);this.Yq=I("content",this.ta);this.ai=I("skip",this.domElement);this.zc=new Tg(this.Uu,this.Yq);this.yb=null;this.Uf=s(this.D,this);this.Bu=s(this.Fw,this);this.eq=!1}t(pk,wj);m(pk);e=pk.prototype;e.H=function(){pk.i.H.call(this,200)};
e.Yn=function(){pk.i.Yn.call(this);this.eq?(this.zc.scrollTo(0),this.zc.resize()):(P(this.domElement,"loading"),TweenMax.set(this.ta,{opacity:0}),Yj(J.ra.assetsPath+"html/credits.html",this.Bu))};e.t=function(){pk.i.t.call(this);this.zc.t();K(window,"resize",this.N,!1,this);this.yb=J.M.bind(this.Uf,J.M.key.Ce,!0);this.k.j(this.ai,"click",this.D,!1,this)};e.n=function(){pk.i.n.call(this);this.zc.n();$d(window,"resize",this.N,!1,this);Yg(J.M,this.yb)};
e.Fw=function(a){this.eq=!0;a=jk(a.target);this.Yq.innerHTML=/<body.*?>([\s\S]*)<\/body>/.exec(a)[1];this.zc.resize();TweenMax.to(this.ta,0.5,{delay:1,opacity:1,onComplete:function(){Q(this.domElement,"loading")},onCompleteScope:this})};e.N=function(){this.zc.resize()};J.ea.Ml.home={};function qk(a){N.call(this);this.domElement=a;this.k=new L(this)}t(qk,N);e=qk.prototype;e.t=function(){};e.n=function(){this.k.removeAll()};e.show=function(){O(this.domElement,!0)};e.J=function(){O(this.domElement,!1)};
e.H=function(){this.show()};e.D=function(){this.n()};function rk(a){qk.call(this,a);this.Se=J.Dv;this.domElement.appendChild(this.Se.domElement)}t(rk,qk);e=rk.prototype;e.t=function(){rk.i.t.call(this);this.k.j(this.Se,J.d.e.Gb,this.onLoadComplete,!1,this)};e.n=function(){rk.i.n.call(this);this.Se.n()};e.reset=function(){this.Se.H()};e.H=function(){rk.i.H.call(this);this.t();this.Se.H()};e.D=function(){rk.i.D.call(this);this.n();this.Se.D()};
e.onLoadComplete=function(a){this.Se.n();J.T.$a("studio",null,0,4,!0);J.T.$a("house",null,0,4,!0);this.dispatchEvent(a)};
function sk(a){N.call(this);this.domElement=a;this.id=this.domElement.id;this.Ib=new TimelineMax({paused:!0,onComplete:this.Hi,onCompleteScope:this});this.Jb=new TimelineMax({paused:!0,onComplete:this.Ii,onCompleteScope:this});this.Mu=M(".preloader",this.domElement)[0];this.Th=new cg(this.Mu,2E3);this.Th.Sa=this;K(J.hc,J.d.e.G,this.Cf,!1,this);this.k=new L(this);this.Je=[];this.zq=[]}t(sk,N);e=sk.prototype;
e.init=function(){this.J();var a=TweenMax.fromTo(this.domElement,1,{opacity:0},{opacity:1});this.Ib.add(a);a=TweenMax.fromTo(this.domElement,0.5,{opacity:1},{opacity:0});this.Jb.add(a)};e.show=function(){O(this.domElement,!0);this.dispatchEvent({type:J.d.e.Fe})};e.J=function(){O(this.domElement,!1);this.dispatchEvent({type:J.d.e.fh})};e.La=function(){return"none"!=this.domElement.style.display};e.t=function(){};e.n=function(){this.k.removeAll()};
e.load=function(){this.j(J.d.e.He,this.onLoadStart,!1,this);this.j(J.d.e.Ee,this.onLoadProgress,!1,this);this.j(J.d.e.Tf,this.onLoadComplete,!1,this);this.j(J.d.e.Gb,this.Oi,!1,this);this.Je=D(this.Je,function(a){return!Nb(this.zq,a)},this);this.Th.load(this.Je)};e.H=function(){if(this.La())return!1;this.show();this.t();this.Ib.restart();this.dispatchEvent({type:J.d.e.cb});return!0};e.D=function(){if(!this.La())return!1;this.n();this.Jb.restart();this.dispatchEvent({type:J.d.e.Da});return!0};
e.Hi=function(){this.dispatchEvent({type:J.d.e.Sf})};e.Ii=function(){this.J();this.dispatchEvent({type:J.d.e.ij})};e.onLoadStart=function(){};e.onLoadProgress=function(){};e.onLoadComplete=function(){C(this.Je,function(a){Pb(this.zq,a)},this);Ob(this.Je)};e.Oi=function(){};e.Cf=function(a){(a=Oe(a.bj,Re.Gt))&&a.sectionId===this.id&&this.load()};
J.P.bh=function(a,b,c,d){this.nc=c||ed("canvas");this.qh=this.nc.getContext("2d");this.ua=new Sc(b.size.w,b.size.h);this.Bn=ed("canvas");this.Bn.width=a.width;this.Bn.height=a.height;this.er=this.Bn.getContext("2d");this.er.drawImage(a,0,0);this.Zp=b.frames;this.cu=ub(this.Zp).sort();this.aq=E(this.cu,function(a){return this.Zp[a]},this);this.rd=0;this.tl=this.aq.length;this.nc.width=this.ua.width;this.nc.height=this.ua.height;this.update();d&&(a=new gj(document),K(a,"key",function(a){switch(a.keyCode){case 37:case 38:this.rd=
Math.max(0,this.rd-1);this.update();break;case 39:case 40:this.rd=Math.min(this.tl-1,this.rd+1),this.update()}},!1,this))};function tk(a,b,c){var d;d=d||a.tl/(c||60);c={rd:a.tl-1,paused:!0,ease:Linear.easeNone,repeat:-1,onUpdate:a.update,onUpdateScope:a};Db(c,b||{});return TweenMax.fromTo(a,d,{rd:0},c)}J.P.bh.prototype.Yc=function(a){a=Math.round((this.tl-1)*a);uk(this,a)};
function uk(a,b){a.rd=Math.round(b);var c=a.aq[a.rd],d=c.sx,g=c.sy,h=c.sw,k=c.sh,l=c.x,c=c.y;a.qh.clearRect(0,0,a.nc.width,a.nc.height);d=a.er.getImageData(d,g,h,k);a.qh.putImageData(d,l,c)}J.P.bh.prototype.update=function(){uk(this,this.rd)};J.P.lc=function(a){J.P.bh.call(this,J.P.lc.cm,J.P.lc.kj,a)};t(J.P.lc,J.P.bh);J.P.lc.Iv=function(){var a=J.P.lc.cm;a.src=J.ra.assetsPath+"images/house-logo-loop.png";return a};J.P.lc.cm=new Image;
J.P.lc.kj={frames:{"00":{sx:842,sy:496,sw:120,sh:124,x:20,y:15},"01":{sx:718,sy:372,sw:130,sh:124,x:15,y:15},"02":{sx:448,sy:496,sw:138,sh:124,x:11,y:15},"03":{sx:304,sy:620,sw:144,sh:124,x:8,y:15},"04":{sx:154,sy:620,sw:150,sh:124,x:5,y:15},"05":{sx:0,sy:620,sw:154,sh:124,x:3,y:15},"06":{sx:780,sy:124,sw:156,sh:124,x:2,y:15},"07":{sx:624,sy:124,sw:156,sh:124,x:2,y:15},"08":{sx:468,sy:124,sw:156,sh:124,x:2,y:15},"09":{sx:152,sy:868,sw:152,sh:124,x:4,y:15},10:{sx:748,sy:248,sw:148,sh:124,x:6,y:15},
11:{sx:444,sy:868,sw:140,sh:124,x:10,y:15},12:{sx:586,sy:496,sw:132,sh:124,x:14,y:15},13:{sx:838,sy:744,sw:124,sh:124,x:18,y:15},14:{sx:848,sy:372,sw:112,sh:124,x:24,y:15},15:{sx:962,sy:744,sw:100,sh:124,x:30,y:15},16:{sx:962,sy:496,sw:112,sh:124,x:24,y:15},17:{sx:714,sy:868,sw:124,sh:124,x:18,y:15},18:{sx:586,sy:372,sw:132,sh:124,x:14,y:15},19:{sx:444,sy:744,sw:140,sh:124,x:10,y:15},20:{sx:600,sy:248,sw:148,sh:124,x:5,y:15},21:{sx:152,sy:744,sw:152,sh:124,x:4,y:15},22:{sx:312,sy:124,sw:156,sh:124,
x:1,y:15},23:{sx:156,sy:124,sw:156,sh:124,x:2,y:15},24:{sx:0,sy:124,sw:156,sh:124,x:2,y:15},25:{sx:0,sy:496,sw:154,sh:124,x:3,y:15},26:{sx:154,sy:496,sw:150,sh:124,x:5,y:15},27:{sx:304,sy:496,sw:144,sh:124,x:8,y:15},28:{sx:448,sy:372,sw:138,sh:124,x:11,y:15},29:{sx:584,sy:868,sw:130,sh:124,x:14,y:15},30:{sx:842,sy:620,sw:120,sh:124,x:20,y:15},31:{sx:712,sy:620,sw:130,sh:124,x:14,y:15},32:{sx:936,sy:124,sw:138,sh:124,x:11,y:15},33:{sx:304,sy:372,sw:144,sh:124,x:8,y:15},34:{sx:154,sy:372,sw:150,sh:124,
x:5,y:15},35:{sx:0,sy:372,sw:154,sh:124,x:3,y:15},36:{sx:780,sy:0,sw:156,sh:124,x:2,y:15},37:{sx:624,sy:0,sw:156,sh:124,x:2,y:15},38:{sx:468,sy:0,sw:156,sh:124,x:1,y:15},39:{sx:0,sy:868,sw:152,sh:124,x:4,y:15},40:{sx:452,sy:248,sw:148,sh:124,x:5,y:15},41:{sx:304,sy:868,sw:140,sh:124,x:10,y:15},42:{sx:580,sy:620,sw:132,sh:124,x:14,y:15},43:{sx:714,sy:744,sw:124,sh:124,x:18,y:15},44:{sx:962,sy:372,sw:112,sh:124,x:24,y:15},45:{sx:962,sy:620,sw:100,sh:124,x:30,y:15},46:{sx:958,sy:868,sw:112,sh:124,x:24,
y:15},47:{sx:718,sy:496,sw:124,sh:124,x:18,y:15},48:{sx:448,sy:620,sw:132,sh:124,x:14,y:15},49:{sx:304,sy:744,sw:140,sh:124,x:10,y:15},50:{sx:304,sy:248,sw:148,sh:124,x:6,y:15},51:{sx:0,sy:744,sw:152,sh:124,x:4,y:15},52:{sx:312,sy:0,sw:156,sh:124,x:2,y:15},53:{sx:156,sy:0,sw:156,sh:124,x:2,y:15},54:{sx:0,sy:0,sw:156,sh:124,x:2,y:15},55:{sx:0,sy:248,sw:154,sh:124,x:3,y:15},56:{sx:154,sy:248,sw:150,sh:124,x:5,y:15},57:{sx:896,sy:248,sw:144,sh:124,x:8,y:15},58:{sx:936,sy:0,sw:138,sh:124,x:11,y:15},59:{sx:584,
sy:744,sw:130,sh:124,x:15,y:15},60:{sx:838,sy:868,sw:120,sh:124,x:20,y:15}},size:{w:160,h:160}};function vk(a){qk.call(this,a);this.Qm=this.lq=null}t(vk,qk);e=vk.prototype;e.t=function(){vk.i.t.call(this);var a=J.P.lc.Iv();this.k.Ra(a,"load",this.vv,!1,this)};e.J=function(){vk.i.J.call(this);this.Qm.pause()};e.vv=function(){var a=I("house-logo",this.domElement);this.lq=new J.P.lc(a);this.Qm=tk(this.lq,{repeat:-1,repeatDelay:1.5,ease:Sine.easeInOut},60);this.Qm.restart()};
e.D=function(){vk.i.D.call(this);TweenMax.to(this.domElement,1,{delay:0.8,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteScope:this})};e.Oi=function(){qe(function(){this.dispatchEvent(J.d.e.Fd)},2E3,this)};function wk(){sk.call(this,Yc("home"));this.kg=new vk(Yc("main-preloader"));this.kg.t();this.Qd=new rk(Yc("main-episode-selection"));this.Qd.J();this.fq=!1}t(wk,sk);e=wk.prototype;e.init=function(){wk.i.init.call(this)};
e.t=function(){wk.i.t.call(this);this.k.j(this.kg,J.d.e.Fd,this.Bs,!1,this);this.k.j(this.Qd,J.d.e.Fd,this.Bs,!1,this);this.k.j(this.Qd,J.d.e.Gb,this.Nw,!1,this)};e.n=function(){wk.i.n.call(this);this.kg.n();this.Qd.n()};e.load=function(){this.Je=[this.id,"global"];wk.i.load.call(this)};e.Hi=function(a){wk.i.Hi.call(this,a)};e.Bs=function(a){switch(a.target){case this.kg:this.kg.D();this.Qd.H();break;case this.Qd:this.Qd.D()}};e.onLoadStart=function(a){wk.i.onLoadStart.call(this,a);this.H()};
e.onLoadComplete=function(a){wk.i.onLoadComplete.call(this,a);if(this.fq)this.Qd.reset();else{a=U(a.target.ql,"global");var b=a["fengshui-data"].tips;Ve.F().init(b);xk.F().init();J.ea.na.bd.F();J.V.Ba(J.C.I.em,a)}this.fq=!0};e.Oi=function(a){wk.i.Oi.call(this,a);this.kg.Oi()};e.Nw=function(){this.D()};function yk(a,b){N.call(this);this.domElement=a;this.La=!1;this.Fp=b;this.k=new L(this);this.J(!1)}t(yk,N);e=yk.prototype;e.t=function(){this.k.j(window,"resize",this.N,!1,this)};e.n=function(){this.k.removeAll()};
e.show=function(a){this.La=!0;O(this.domElement,this.La);this.N();this.t();!1!==a&&this.dispatchEvent({type:J.d.e.Fe,nv:this.Fp})};e.J=function(a){this.La=!1;O(this.domElement,this.La);this.n();!1!==a&&this.dispatchEvent({type:J.d.e.fh,nv:this.Fp})};e.H=function(){this.show(!0);this.dispatchEvent(J.d.e.cb)};e.D=function(){this.J(!0);this.dispatchEvent(J.d.e.Da)};e.N=function(){};J.ea.Ml.dz={};
function zk(a){this.Zj=I("loader",a);this.Xu=I("spinner",a);this.Pu=I("progress",a);T.F();this.Wu=new J.P.bh(J.P.lc.cm,J.P.lc.kj,this.Xu);this.fr=tk(this.Wu);yk.call(this,a,!0)}t(zk,yk);m(zk);e=zk.prototype;e.H=function(){zk.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut});TweenMax.fromTo(this.Zj,0.8,{opacity:0},{delay:0.8,opacity:1});this.fr.restart()};
e.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteScope:this})};e.J=function(a){zk.i.J.call(this,a);this.fr.pause()};e.onLoadStart=function(){this.H()};e.onLoadProgress=function(a){a=Math.round(100*a.progress).toString();this.Pu.innerHTML=1<a.length?a:"0"+a};e.onLoadComplete=function(){zf(J.C.I.am,this.D,this)};e.N=function(a){zk.i.N.call(this,a);Of(this.domElement,J.ka)};function Ak(a){yk.call(this,a,!0)}
t(Ak,yk);m(Ak);Ak.prototype.show=function(a){Ak.i.show.call(this,a);this.domElement.appendChild(J.ub.domElement)};Ak.prototype.H=function(){Ak.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut})};Ak.prototype.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{delay:0.25,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteParams:[!0],onCompleteScope:this})};
Ak.prototype.N=function(a){Ak.i.N.call(this,a);Of(this.domElement,J.ka)};function Bk(a){yk.call(this,a,!0);a=I("popup",this.domElement);this.lb=new wj(a);this.$h=M("ul a",this.domElement);this.yb=null;this.Jt=s(function(){this.lb.D()},this);this.Zg()}t(Bk,yk);m(Bk);e=Bk.prototype;e.t=function(){Bk.i.t.call(this);C(this.$h,function(a){this.k.j(a,"click",this.Li,!1,this)},this);this.k.Ra(this.lb,J.d.e.Da,this.D,!1,this);this.yb=J.M.bind(this.Jt,J.M.key.Ce,!0)};
e.n=function(){Bk.i.n.call(this);Yg(J.M,this.yb)};e.Zg=function(){var a=U(T.F(),"global.fengshui-data").dialog.finale,b=a.title,a=a.paragraph,c=M("h1",this.domElement)[0],d=M("p",this.domElement)[0];c.innerHTML=b;d.innerHTML=a};e.H=function(){Bk.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut});this.lb.H()};
e.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{delay:0.25,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteParams:[!0],onCompleteScope:this})};e.Li=function(a){a.preventDefault();J.v.Utils.Fl(a.currentTarget.href)};e.N=function(a){Bk.i.N.call(this,a);Of(this.domElement,J.ka);J.v.Utils.Un(this.lb.domElement)};J.u.Xa={};
J.u.Xa.dh=function(a){return'<div class="caption '+a.position+'"><div class="panel"><div class="panel-button"><button class="icon"></button><h3>Learn<br>More</h3></div><div class="panel-content"><div class="content"><h1>'+a.B.name+'</h1><div class="scroller"><div class="scroller-inner">'+(a.B.hint?'<section class="hint"><div class="inner"><div class="inner-scroller"><p>'+a.B.hint+"</p>"+J.u.common.Wb({icon:"icon-yes",ia:"hint-button",text:"I see"})+'</div></div><div class="scrollbar"><button class="handle"></button></div></section>':
"")+(a.B.Hl?'<section class="problem"><div class="inner"><div class="inner-scroller"><p>'+a.B.Hl+"</p>\x3c!-- either close to interact, or scroll down to go interaction section if available --\x3e"+J.u.common.Wb({ia:"prompt-button",icon:"icon-yes",text:a.B.prompt})+'</div></div><div class="scrollbar"><button class="handle"></button></div></section>':"")+(a.Fi?'<section class="interaction"><div class="inner"><div class="inner-scroller">'+a.Fi+'</div></div><div class="scrollbar"><button class="handle"></button></div></section>':
"")+(a.B.Ok?'<section class="advice"><div class="inner"><div class="inner-scroller"><h3>Feng Shui Tips</h3><p>'+a.B.Ok+'</p></div></div><div class="scrollbar"><button class="handle"></button></div></section>':"")+'</div></div></div></div></div><div class="controls"><ul class="share"><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://fengshuirealtime.com/assets/html/share/'+a.B.id+'.html" target="_blank" class="icon icon-facebook"></a></li><li><a href="https://twitter.com/intent/tweet?original_referer=http://fengshuirealtime.com/assets/html/share/'+
a.B.id+'.html" target="_blank" class="icon icon-twitter"></a></li><li><a href="https://plus.google.com/share?url=http://fengshuirealtime.com/assets/html/share/'+a.B.id+'.html" target="_blank" class="icon icon-google"></a></li></ul><button class="icon icon-close close-button"></button></div></div>'};
J.u.Xa.mt=function(a){for(var b='<div class="change-picture"><h2>Click on a picture to change</h2><ul class="pictures">',c=qd(a.B.xa.pictures),d=c.length,g=0;g<d;g++)b+='<li><button class="item-button" data-picture="'+c[g]+'"></button></li>';b+='</ul><ul class="info">';c=qd(a.B.xa.pictures);d=c.length;for(g=0;g<d;g++)var h=c[g],b=b+('<li data-picture="'+h+'"><h3>'+a.B.xa.pictures[h].name+"</h3><p>"+a.B.xa.pictures[h].description+"</p></li>");return J.u.Xa.dh(pd(a,{Fi:b+"</ul></div>"}))};
J.u.Xa.kt=function(a){for(var b='<div class="change-color"><h2>Choose a better color.</h2><ul class="colors">',c=qd(a.B.xa.colors),d=c.length,g=0;g<d;g++)var h=c[g],b=b+('<li><button class="item-button" style="background-color: '+a.B.xa.colors[h].hex+'" data-color="'+h+'"></button></li>');b+='</ul><ul class="info">';c=qd(a.B.xa.colors);d=c.length;for(g=0;g<d;g++)h=c[g],b+='<li data-color="'+h+'"><h3>'+a.B.xa.colors[h].name+"</h3><p>"+a.B.xa.colors[h].description+"</p></li>";return J.u.Xa.dh(pd(a,
{Fi:b+"</ul></div>"}))};J.u.Xa.lt=function(a){for(var b='<div class="change-object"><h2>Replace with a new element.</h2><ul class="objects">',c=qd(a.B.xa.names),d=c.length,g=0;g<d;g++)b+='<li><button class="item-button" data-object="'+c[g]+'"></button></li>';b+='</ul><ul class="info">';c=qd(a.B.xa.descriptions);d=c.length;for(g=0;g<d;g++)var h=c[g],b=b+('<li data-object="'+h+'"><h3>'+a.B.xa.names[h]+"</h3><p>"+a.B.xa.descriptions[h]+"</p></li>");return J.u.Xa.dh(pd(a,{Fi:b+"</ul></div>"}))};
J.u.Xa.qt=function(a){for(var b='<div class="drop-fruits"><h2>Fill the plate with fruits.</h2><ul class="fruits">',c=qd(a.B.xa.fruits),d=c.length,g=0;g<d;g++)b+='<li><button class="item-button" data-fruit="'+c[g]+'"></button></li>';b+='</ul><ul class="info">';c=qd(a.B.xa.fruits);d=c.length;for(g=0;g<d;g++)var h=c[g],b=b+('<li data-fruit="'+h+'"><h3>'+a.B.xa.fruits[h].name+"</h3><p>"+a.B.xa.fruits[h].description+"</p></li>");return J.u.Xa.dh(pd(a,{Fi:b+"</ul></div>"}))};
J.u.Xa.ut=function(a){var b='<p class="floatText">';a=a.Yv;for(var c=a.length,d=0;d<c;d++)b+="<span>"+a[d]+"</span>";return b+"</p>"};J.ea.Ml.Xa={};
function Ck(a,b,c,d,g){N.call(this);this.fa=a;this.kk=b;this.Xe=c;this.ib=d;this.Dh=g;this.k=new L(this);this.mg=this.mg||J.u.Xa.dh;this.ng=this.ng||{B:a.B,position:"right"};this.zm=null;this.Cu=s(this.Mw,this);this.domElement=od(this.mg,this.ng);this.nn=I("panel",this.domElement);this.Zh=I("scroller-inner",this.domElement);this.Ne=I("close-button",this.domElement);this.mn=I("panel-button",this.domElement);this.jq=I("hint-button",this.domElement);this.Wh=I("prompt-button",this.domElement);this.Uh=
I("problem",this.domElement);this.Qj=I("hint",this.domElement);this.gd=I("interaction",this.domElement);this.lm=I("advice",this.domElement);this.Nb=D([this.Qj,this.Uh,this.gd,this.lm],function(a){return null!=a});this.nb=null;this.Vs=E(this.Nb,function(a){var b=I("inner-scroller",a);a=I("scrollbar",a);return new Tg(a,b)});this.Xc=null;this.wb=I("controls",this.domElement);this.ar=I("share",this.domElement);this.$h=M("a",this.ar);this.pk=null;this.Vj=!1;this.hd=!0;X(this.domElement,"hide-panel",this.hd);
this.bp()}t(Ck,N);e=Ck.prototype;e.show=function(){this.t();O(this.domElement,!0);this.N()};e.J=function(){this.n();this.nb=null;this.hd?O(this.domElement,!1):Dk(this,!1,!0)};
e.t=function(){this.k.j(this.Ne,"click",this.close,!1,this);this.k.j(this.mn,"click",this.ry,!1,this);this.k.j(this.fa,J.d.e.Hb,this.bp,!1,this);this.k.j(window,"resize",this.N,!1,this);this.k.j(this.fa,J.d.e.Sf,this.Pk,!1,this);this.k.j(this.fa,J.d.e.He,this.ax,!1,this);this.k.j(this.fa,J.d.e.ip,this.$w,!1,this);C(this.$h,function(a){this.k.j(a,"click",this.Li,!1,this)},this);this.zm=J.M.bind(this.Cu,J.M.key.Ce,!1);O(this.mn,!1);Ek(this,!1);this.bp()};
e.n=function(){this.k.removeAll();Yg(J.M,this.zm);this.fa.Ca();C(this.Vs,function(a){a.n()})};function Ek(a,b){X(a.wb,"hidden",!("boolean"==typeof b?b:1))}function Fk(a,b){b?a.k.j(a.jq,"click",a.close,!1,a):a.k.Ia(a.jq,"click",a.close,!1,a)}function Gk(a,b){b?a.k.j(a.Wh,"click",a.Y,!1,a):a.k.Ia(a.Wh,"click",a.Y,!1,a)}function Hk(a,b){return Gb(a.Nb,b)*Pf(a.Zh).width}
function Ik(a,b){if(a.nb!==b){a.nb=b;a.Xc&&a.Xc.n();a.Xc=a.Vs[Gb(a.Nb,b)];a.Xc.t();var c=a.nb;a.pk=TweenMax.to(a.Zh,0.25,{x:-Hk(a,b),ease:Quad.easeOut,onStart:a.Bx,onStartParams:[c],onStartScope:a,onComplete:a.Dx,onCompleteParams:[b],onCompleteScope:a})}}e.Bx=function(a){if(a)switch(Y(a,"animate-in","animate-out"),a){case this.gd:this.fa.Ma();break;case this.Qj:Fk(this,!1);break;case this.Uh:Gk(this,!1)}};
e.Dx=function(a){this.hd||Y(a,"animate-out","animate-in");switch(a){case this.gd:this.fa.Ma();break;case this.Qj:Fk(this,!0);break;case this.Uh:Gk(this,!0)}};e.Pk=function(){this.hd&&(this.hd=!1,O(this.mn,!0),Ek(this,!this.Vj),X(this.domElement,"hide-panel",!1),Y(this.nn,"animate-out","animate-in"),this.nb&&Y(this.nb,"animate-out","animate-in"),TweenMax.to(this.kk,0.5,{zi:-0.15,lo:-0.15,ease:Sine.easeInOut}),TweenMax.to(this.Xe,0.5,{Ui:0.7,ease:Sine.easeInOut,onUpdate:this.Xe.update,onUpdateScope:this.Xe}))};
function Dk(a,b,c){a.hd||(X(a.domElement,"hide-panel",!0),Y(a.nn,"animate-in","animate-out"),a.nb&&Y(a.nb,"animate-in","animate-out"),TweenMax.to(a.kk,0.5,{zi:0,lo:0,ease:Sine.easeInOut}),TweenMax.to(a.Xe,0.5,{Ui:1,ease:Sine.easeInOut,onUpdate:a.Xe.update,onUpdateScope:a.Xe,onComplete:a.ts,onCompleteParams:[b,c],onCompleteScope:a}))}e.ry=function(){this.hd?this.Pk():Dk(this)};e.close=function(){this.hd?this.ts(!0):Dk(this,!0);Yg(J.M,this.zm);J.T.Ta("close")};e.Fa=function(){this.fa.Fa();this.Pk()};
e.bp=function(){var a=this.fa.B,b=Te(a);b&&!b.pa?Ik(this,this.Qj):(this.Wh&&O(this.Wh,!a.pa),!a.pa&&this.Uh?Ik(this,this.Uh):(O(this.ar,a.pa),this.gd&&P(this.gd,"unlocked"),a.pa&&(this.lm?Ik(this,this.lm):this.gd&&Ik(this,this.gd))))};e.ts=function(a,b){this.hd=!0;a&&this.dispatchEvent({type:J.d.e.Fd});b&&this.J()};e.ax=function(){this.Vj=!0;this.gd?Ik(this,this.gd):(Ek(this,!1),Dk(this))};e.$w=function(){this.Vj=!1;this.fa.B.rf&&this.fa.B.pa?this.Pk():this.close()};e.Mw=function(){this.Vj||this.close()};
e.Y=function(a){switch(a.currentTarget){case this.Wh:this.fa.Ma(),J.T.Ta("confirm")}};e.Li=function(a){a.preventDefault();J.v.Utils.Fl(a.currentTarget.href)};e.N=function(){R(this.nn,"height",this.Xe.height+"px");this.Xc&&this.Xc.resize();if(this.pk){var a=Hk(this,this.nb);this.pk.isActive()?this.pk.updateTo({x:-a}):TweenMax.set(this.Zh,{x:-a})}};
function Jk(a,b,c,d,g){this.mg=J.u.Xa.kt;this.ng={B:a.B,position:"right"};Ck.call(this,a,b,c,d,g);this.Oe=null;this.Oa=J.v.Utils.je(M(".item-button",this.domElement),"data-color");this.rc=J.v.Utils.je(M(".info li",this.domElement),"data-color")}t(Jk,Ck);Jk.prototype.show=function(){Jk.i.show.call(this);z(this.Oa,function(a){this.k.j(a,"click",this.yf,!1,this)},this)};Jk.prototype.J=function(){Jk.i.J.call(this);this.fa.Ca()};
Jk.prototype.yf=function(a){this.Oe&&(X(this.Oa[this.Oe],"active",!1),X(this.rc[this.Oe],"active",!1));this.Oe=a.currentTarget.getAttribute("data-color");X(this.Oa[this.Oe],"active",!0);X(this.rc[this.Oe],"active",!0);this.Xc.resize();a=this.fa;a.setColor(a.B.xa.colors[this.Oe].hex);J.T.Ta("click")};function Kk(a,b,c){Gd.call(this);this.sf=a;this.td=b;this.Tc=c;this.ef=s(this.Lx,this)}t(Kk,Gd);e=Kk.prototype;e.Ug=!1;e.Qi=0;e.ba=null;e.kf=function(){this.ba||this.Qi?this.Ug=!0:this.pd()};
e.stop=function(){this.ba&&(f.clearTimeout(this.ba),this.ba=null,this.Ug=!1)};e.pause=function(){this.Qi++};e.resume=function(){this.Qi--;this.Qi||!this.Ug||this.ba||(this.Ug=!1,this.pd())};e.S=function(){Kk.i.S.call(this);this.stop()};e.Lx=function(){this.ba=null;this.Ug&&!this.Qi&&(this.Ug=!1,this.pd())};e.pd=function(){this.ba=qe(this.ef,this.td);this.sf.call(this.Tc)};
function Lk(a,b){$.call(this,a);this.cv=M(".tips-wrapper",this.domElement)[0];this.ii=M(".tips",this.domElement);this.yp=M(".tips > li",this.domElement);M(".tips .dot",this.domElement);this.Bk=this.ii[0];this.be=M("li",this.Bk);this.bf=E(this.ii,function(a){return a.getAttribute("data-view-id")});this.fb=this.bf[0];this.Va={};C(b,function(a){this.Va[a.id]=a},this);this.Zd=null;this.wh=new Kk(this.xv,200,this);this.eg=[];this.bv=0.5;this.lu=50;this.Bb=new TimelineMax}t(Lk,$);e=Lk.prototype;
e.bb=function(a){Lk.i.bb.call(this,a);this.fb=a.id;var b=F(this.ii,function(b){return b.getAttribute("data-view-id")===a.id});Mk(this,b);Nk(this,a.id)};function Mk(a,b){a.be=M("li",b);var c=a.be.length,d=Math.min(c*a.lu*2,a.bv*J.ka.width),g=d/c/2;C(a.be,function(a){R(a,"margin","0 "+g+"px")});return d}
e.t=function(){Lk.i.t.call(this)&&(C(this.yp,function(a){this.k.j(a,"mouseover",this.Px,!1,this);this.k.j(a,"mouseout",this.Ox,!1,this)},this),z(this.Va,function(a){a.j(J.d.e.Hb,this.ve,!1,this);a.pa&&Ok(this,a.id)},this),this.wh.kf(),X(this.domElement,"hidden",!1))};e.n=function(){Lk.i.n.call(this)&&(z(this.Va,function(a){a.Ia(J.d.e.Hb,this.ve,!1,this)},this),this.wh.stop(),this.Bb.kill(),X(this.domElement,"hidden",!0))};
function Nk(a,b){a.fb=b;var c=F(a.ii,function(a){return a.getAttribute("data-view-id")===b}),d=Mk(a,c),g=TweenMax.to(a.ii,0,{display:"none"});a.Bk=c;var c=TweenMax.to(a.cv,0.5,{width:d,ease:Strong.easeOut}),d=new TimelineMax,h=E(a.be,function(a){return TweenMax.fromTo(a,0.25,{opacity:0,y:20},{opacity:1,y:0})});d.add(h,"+=0","start",0.05);h=TweenMax.to(a.Bk,0.25,{opacity:1,display:"block"});a.Bb.clear();a.Bb.add([g,c,d,h])}function Gh(a,b){a.eg=b;a.eg&&0<a.eg.length&&a.wh.kf()}
e.xv=function(){if(this.eg&&0!==this.eg.length){this.wh.kf();var a=this.f.Q.control,b=a.getPosition(),c=ph(a,!0),d=Math.cos(THREE.Math.degToRad(45)),g;C(this.eg,function(a){var h=a.qb().clone().sub(b).normalize().dot(c);h>=d&&(d=h,g=a)});if(g){var a=g.B,h=We(a),k=h?h.id:a.id,a=F(this.yp,function(a){return a.getAttribute("data-tip-id")===k});this.Zd!==a&&(this.Zd&&Q(this.Zd,"nearby"),this.Zd=a,P(this.Zd,"nearby"),a=a.getAttribute("data-view-id"),a!==this.fb&&Nk(this,a))}else this.Zd&&(Q(this.Zd,"nearby"),
this.Zd=null)}else this.wh.stop()};function Ok(a,b){var c=F(a.be,function(a){return a.getAttribute("data-tip-id")===b});c&&(M("a",c)[0].href=a.Va[b].by,P(c,"unlocked"))}e.Px=function(a){if(Bj(a.currentTarget,"hover"))return!1;P(a.currentTarget,"hover");J.V.Ba(J.C.I.Ge,this)};e.Ox=function(a){a.relatedTarget&&jd(a.currentTarget,a.relatedTarget)||(Q(a.currentTarget,"hover"),J.V.Ba(J.C.I.De,this))};e.ve=function(a){Ok(this,a.B.id)};
e.Ha=function(a){Lk.i.Ha.call(this,a);switch(a.Ga||a.mode){case V:case vg:this.t();break;default:this.n()}};e.N=function(a){Lk.i.N.call(this,a);Pf(this.domElement);R(this.domElement,"top",J.ka.height-115+"px");Mk(this,this.Bk);Nk(this,this.fb)};J.ea.Xy={};
function Pk(a){N.call(this);this.domElement=a;this.Ne=I("close-button",this.domElement);this._y=this._x=0;this.ua=Pf(this.domElement);this.Kb=new kf;this.Rq=Qk;this.vj=["arrow-left","arrow-right","arrow-top","arrow-bottom"];this.re=this.La=this.yg=!1}t(Pk,N);e=Pk.prototype;e.S=function(){Pk.i.S.call(this);this.n();this.Ne=null};
e.t=function(){K(this.Ne,"click",this.ti,!1,this);K(window,"resize",this.N,!1,this);je(J.V,J.C.I.Ge,this.Lg,this);je(J.V,J.C.I.De,this.Gg,this);this.yg=0<J.V.qk.length;this.ua=Pf(this.domElement)};e.n=function(){$d(this.Ne,"click",this.ti,!1,this);$d(window,"resize",this.N,!1,this)};e.show=function(a){this.La||(this.La=!0,X(this.domElement,"shown",!0),a&&(this.qi(a),Rk(this)),this.La&&this.N(),J.V.Ba(J.C.I.Ge,this))};
e.J=function(){this.La&&(this.La=!1,X(this.domElement,"shown",!1),J.V.Ba(J.C.I.De,this))};e.ti=function(){this.re=!0;this.n();this.J();this.dispatchEvent(J.d.e.Gb)};function Rk(a){R(a.domElement,"transform","translate("+a._x+"px, "+a._y+"px)")}
function Sk(a,b){var c=a.ua,d=J.ka,g=!1;d.width-b.right>c.width?(a._x=b.right,Cj(a.domElement,a.vj),P(a.domElement,"arrow-left"),g=!0):b.left>c.width&&(a._x=b.left-c.width,Cj(a.domElement,a.vj),P(a.domElement,"arrow-right"),g=!0);a._y=b.top-(c.height-(b.bottom-b.top))/2;if(25>a._y||a._y+c.height>d.height-150)g=!1;return g}
function Tk(a,b){var c=a.ua,d=J.ka,g=!1;b.top>c.height?(a._y=b.top-c.height,Cj(a.domElement,a.vj),P(a.domElement,"arrow-bottom"),g=!0):d.height-b.bottom>c.height&&(a._y=b.bottom,Cj(a.domElement,a.vj),P(a.domElement,"arrow-top"),g=!0);a._x=b.left-(c.width-(b.right-b.left))/2;if(150>a._x||a._x+c.width>d.width-150)g=!1;return g}
e.qi=function(a){var b=this.ua,c=J.ka;switch(this.Rq){case Qk:Sk(this,a)||Tk(this,a);break;case Uk:Tk(this,a)||Sk(this,a)}this._x=Math.max(150,Math.min(c.width-150-b.width,this._x));this._y=Math.max(25,Math.min(c.height-150-b.height,this._y));this.Kb=a};e.Lg=function(a){a!==this&&(this.yg=!0,this.J())};e.Gg=function(a){a!==this&&(this.yg=!1)};e.N=function(){this.ua=Pf(this.domElement);this.Kb&&(this.qi(this.Kb),Rk(this))};var Qk="horizontal",Uk="vertical";
function Vk(a){Pk.call(this,a);this.Rq=Uk;this.Lc=this.W=this.gn=null;this.Qt=new THREE.Box3}t(Vk,Pk);e=Vk.prototype;e.S=function(){Vk.i.S.call(this);this.Lc=this.W=this.gn=null};e.t=function(){Vk.i.t.call(this);je(J.V,J.C.I.im,this.Es,this);je(J.V,J.C.I.rj,this.Hs,this);je(J.V,J.C.I.Yl,this.ms,this)};e.n=function(){Vk.i.n.call(this);og(J.C.I.im,this.Es,this);og(J.C.I.rj,this.Hs,this);og(J.C.I.Yl,this.ms,this);ff(this)};e.Es=function(a,b,c){this.yg||(this.gn=a,this.W=b,this.Lc=c,this.show(),ef(this))};
e.Hs=function(){this.J();ff(this)};e.ms=function(){this.ti()};e.Db=function(){var a=this.Qt.setFromObject(this.gn).center(),a=J.v.K.eo(a,this.W,this.Lc);this.Kb.top=a.y-50;this.Kb.right=a.x+50;this.Kb.bottom=a.y+50;this.Kb.left=a.x-50;this.qi(this.Kb);Rk(this)};function Zk(a){Pk.call(this,a);this.rh=null}t(Zk,Pk);e=Zk.prototype;e.S=function(){Zk.i.S.call(this);this.rh=null};e.t=function(){Zk.i.t.call(this);je(J.V,J.C.I.oj,this.Ds,this);je(J.V,J.C.I.qj,this.Gs,this);je(J.V,J.C.I.Xl,this.ls,this)};
e.n=function(){Zk.i.n.call(this);og(J.C.I.oj,this.Ds,this);og(J.C.I.qj,this.Gs,this);og(J.C.I.Xl,this.ls,this)};function $k(a){if(a.rh){var b=Nf(a.rh),c=Pf(a.rh);a.Kb.top=b.y;a.Kb.right=b.x+c.width;a.Kb.bottom=b.y+c.height;a.Kb.left=b.x}}e.Ds=function(a){this.yg||(this.rh=a.domElement,$k(this),this.show(this.Kb))};e.Gs=function(){this.J()};e.ls=function(){this.ti()};e.N=function(a){$k(this);Zk.i.N.call(this,a)};
function al(a){Pk.call(this,a);this.Hq=I("mousewheel",this.domElement);this.Jp=I("click",this.domElement);this.gq=this.hq=!1;this.vh=new dg(this.show,1E3,this);this.Cm=new dg(this.ti,5E3,this)}t(al,Pk);e=al.prototype;e.S=function(){al.i.S.call(this);this.Cm.dispose()};e.show=function(){al.i.show.call(this);this.vh.dispose();this.qi();Rk(this)};e.J=function(){al.i.J.call(this);this.vh.stop();this.Cm.stop()};
e.qi=function(){var a=Pf(this.domElement),b=J.ka;this._x=(b.width-a.width)/2;this._y=(b.height-a.height)/2};e.t=function(){al.i.t.call(this);je(J.V,J.C.I.pj,this.Fs,this)};e.n=function(){al.i.n.call(this);og(J.C.I.pj,this.Fs,this)};e.Fs=function(a){this.gq&&this.hq||this.yg||("mousewheel"===a?(O(this.Hq,!1),O(this.Jp,!0),this.gq=!0):"click"===a&&(O(this.Hq,!0),O(this.Jp,!1),this.hq=!0),this.vh.isActive()||this.vh.Bc||this.vh.start(),this.Cm.start())};
function bl(){N.call(this);this.domElement=od(J.u.common.wt);var a=I("compass",this.domElement);this.Qe=new Zk(a);this.Qe.Sa=this;a=I("selector",this.domElement);this.Ye=new Vk(a);this.Ye.Sa=this;a=I("walk",this.domElement);this.cf=new al(a);this.cf.Sa=this;this.Iq=0;this.ev=3;this.sc=!1}t(bl,N);m(bl);e=bl.prototype;
e.S=function(){bl.i.S.call(this);this.n();this.Qe.dispose();this.Ye.dispose();this.cf.dispose();this.cf=this.Ye=this.Qe=null;this.domElement.parentNode&&hd(this.domElement);this.domElement=null};e.t=function(){this.Bc||this.sc||(this.sc=!0,K(this,J.d.e.Gb,this.os,!1,this),this.Qe.re||this.Qe.t(),this.Ye.re||this.Ye.t(),this.cf.re||this.cf.t())};e.n=function(){!this.Bc&&this.sc&&(this.sc=!1,$d(this,J.d.e.Gb,this.os,!1,this),this.Qe.n(),this.Ye.n(),this.cf.n())};
e.show=function(a){a="boolean"==typeof a?a:!0;X(this.domElement,"hidden",!a);a||(this.Qe.J(),this.Ye.J(),this.cf.J())};e.os=function(){this.Iq++;this.Iq===this.ev&&this.dispose()};
J.P.ah=function(a,b,c,d,g,h){this.domElement=a;this.image=b;this.Jj=c;this.bq=d;this.tu=g;this.lg=!0===h&&1<window.devicePixelRatio?2:1;a=this.image.width/this.Jj/this.lg;b=this.image.height/this.bq/this.lg;this.size=new Sc(a,b);this.$p=0;this.Fm=new H(0,0);R(this.domElement,{"background-image":"url("+this.image.src+")","background-size":this.image.width/this.lg+"px "+this.image.height/this.lg+"px","background-repeat":"no-repeat",width:a+"px",height:b+"px"});cl(this,0)};
J.P.ah.prototype.Yc=function(a){a=Math.round((this.tu-1)*a);cl(this,a)};function cl(a,b){a.$p=b;var c;c=a.$p;a.Fm.x=c%a.Jj/a.Jj*a.image.width/a.lg;a.Fm.y=Math.floor(c/a.Jj)/a.bq*a.image.height/a.lg;c=a.Fm;R(a.domElement,"background-position",-c.x+"px "+(-c.y+"px"))}
function Qh(a){$.call(this,a);this.$j=Yc("main");var b=I("browse",this.domElement);a=U(T.F(),"global.cube-browse");this.Rt=new J.P.ah(b,a,12,9,100);b=I("design",this.domElement);a=U(T.F(),"global.cube-design");this.Ut=new J.P.ah(b,a,12,9,100);this.Rj=this.Sj=!1;this.Dn=this.Mb=0;this.sq=this.Uj=!1}t(Qh,$);e=Qh.prototype;
e.t=function(){Qh.i.t.call(this)&&(this.k.j(this.domElement,"mouseover",this.Pi,!1,this),this.k.j(this.domElement,"mousemove",this.Jg,!1,this),this.k.j(this.domElement,"mouseout",this.ue,!1,this),this.k.j(this.domElement,"click",this.Y,!1,this),this.f&&this.f.Q.j(J.d.e.Fc,this.Ko,!1,this))};e.n=function(){Qh.i.n.call(this)&&J.V.Ba(J.C.I.qj)};e.bb=function(a){Qh.i.bb.call(this,a);this.f&&this.f.Q.Ia(J.d.e.Fc,this.Ko,!1,this);this.f.Q.j(J.d.e.Fc,this.Ko,!1,this)};e.Yc=function(a){this.Rt.Yc(a);this.Ut.Yc(a)};
e.hb=function(a){this.Mb=bc(a,2*Math.PI);this.Yc(this.Mb/(2*Math.PI));return this.Mb};e.Pi=function(a){if(a.relatedTarget&&jd(this.domElement,a.relatedTarget))return!1;J.V.Ba(J.C.I.oj,this)};e.Jg=function(a){40<a.offsetY?(Y(this.domElement,"hover-design","hover-browse"),this.Sj=!1,this.Rj=!0):(Y(this.domElement,"hover-browse","hover-design"),this.Sj=!0,this.Rj=!1)};
e.ue=function(a){if(a.relatedTarget&&jd(a.currentTarget,a.relatedTarget))return!1;Q(this.domElement,"hover-browse");Q(this.domElement,"hover-design");this.Rj=this.Sj=!1;this.sq&&J.V.Ba(J.C.I.qj)};e.Y=function(){if(this.Sj){if(this.Uj)return!1;this.dispatchEvent({type:J.d.e.jj,mode:"design"});J.V.Ba(J.C.I.oj,this)}else if(this.Rj){if(!this.Uj)return!1;this.dispatchEvent({type:J.d.e.jj,mode:"browse"});J.V.Ba(J.C.I.Xl,this)}};e.N=function(){Jf(this.domElement,J.ka.width-100-30,30)};e.Ko=function(a){this.hb(a.Yi)};
e.Ha=function(a){Qh.i.Ha.call(this,a);this.sq=a.mode===V?!0:!1;a.mode===ug?(Y(this.domElement,"browse","design"),this.Uj=!0):(Y(this.domElement,"design","browse"),this.Uj=!1);switch(a.mode){case rg:this.n();break;default:this.t()}};function dl(a,b,c,d,g){this.mg=J.u.Xa.mt;this.ng={B:a.B,position:"right"};Ck.call(this,a,b,c,d,g);this.We=null;this.Oa=J.v.Utils.je(M(".item-button",this.domElement),"data-picture");this.rc=J.v.Utils.je(M(".info li",this.domElement),"data-picture")}t(dl,Ck);
dl.prototype.show=function(){dl.i.show.call(this);z(this.Oa,function(a){this.k.j(a,"click",this.yf,!1,this)},this)};dl.prototype.J=function(){dl.i.J.call(this);this.fa.Ca()};
dl.prototype.yf=function(a){this.We&&(X(this.Oa[this.We],"active",!1),X(this.rc[this.We],"active",!1));this.We=a.currentTarget.getAttribute("data-picture");X(this.Oa[this.We],"active",!0);X(this.rc[this.We],"active",!0);this.Xc.resize();a=this.fa;var b=this.We,c=a.Rh[b];a.Id.material.map=c;a.Id.material.needsUpdate=!0;a.Id.userData.id=b;var d,g,h;g=c.image.width/c.image.height;a.Id.geometry.computeBoundingBox();b=a.Id.geometry.boundingBox;d=b.max.x-b.min.x;h=b.max.z-b.min.z;h=d>h?d:h;var k=b.max.y-
b.min.y;d=h/k;g>d?(b=1/(g/d),d=1,g*=k,g=(g-h)/2/g,h=0):(b=1,d=g/d*1,h/=g,g=0,h=(h-k)/2/h);c.repeat.set(b,d);c.offset.set(g,h);a.Vq[a.Id.name]=!0;sb(a.Vq)===a.ig.length&&a.Fa();a=this.fa;c=Gb(a.ig,a.Id)+1;c=Math.min(c,a.ig.length-1);dh(a,a.ig[c]);J.T.Ta("click")};
function el(a){$.call(this,a);this.$q=[];this.Re=a;this.Ij=I("fill",this.Re);a=U(T.F(),"global.circular-fill");this.$t=new J.P.ah(this.Ij,a,16,2,31);this.Gj=this.zn=null;this.bi=0;this.Pd=500;this.oh={};this.Bm=new dg(this.ly,200,this);this.pu=new Kk(this.Av,250,this);this.ak={x:0,y:0};this.cg=null;this.Pm=[];this.show(!1)}t(el,$);e=el.prototype;e.setPosition=function(a,b){Jf(this.domElement,a,b)};function Fh(a,b){a.$q=b;a.Pm=E(a.$q,function(a){return Bg(a)},a)}
e.t=function(a){el.i.t.call(this)&&(this.oh={onProgress:a.onProgress||ca,onStart:a.onStart||ca,onCancel:a.onCancel||ca,onComplete:a.onComplete||ca},this.k.j(this.Yh,"mousedown",this.Af,!1,this),this.k.j(this.Yh,"mousemove",this.Jg,!1,this))};e.n=function(){el.i.n.call(this)&&(this.Bm.stop(),ff(this),J.V.Ba(J.C.I.rj))};
e.H=function(){TweenMax.fromTo(this.domElement,0.25,{scale:0,opacity:0},{scale:1,opacity:1,ease:Expo.easeOut});TweenMax.fromTo(this.Ij,0.4,{scale:0},{delay:0.1,scale:1,ease:Back.easeOut});J.v.Utils.Ws("initial",this.Yh)};e.D=function(){TweenMax.to(this.domElement,0.25,{scale:0.5,opacity:0,ease:Expo.easeOut,onComplete:this.J,onCompleteScope:this});J.v.Utils.Ws(null,this.Yh)};e.ly=function(){this.show();this.H();this.bi=pa();ef(this);this.oh.onStart(this.Gj)};
e.Av=function(){if(1<this.f.ob.m.children.length)return!1;var a=yg(this.ak.x,this.ak.y,this.Pm,this.Ja.cc,this.Lc);0<a.length?(a=a[0].object,this.cg!==a&&(this.cg=a,this.f.P.Sg.H(this.cg.kc))):(this.cg=null,this.f.P.Sg.D())};
e.Af=function(a){if(1<this.f.ob.m.children.length)return!1;this.zn=null;var b=yg(a.clientX,a.clientY,this.Pm,this.Ja.cc,this.Lc);if(0===b.length)return!1;this.Gj=b[0].object.kc;this.setPosition(a.clientX,a.clientY);this.k.j(document,"mousemove",this.Ig,!1,this);this.k.j(document,"mouseup",this.Ig,!1,this);this.Bm.start()};e.Ig=function(){this.Bm.stop();this.k.Ia(document,"mousemove",this.Ig,!1,this);this.k.Ia(document,"mouseup",this.Ig,!1,this);ff(this);this.D();this.oh.onCancel()};
e.Jg=function(a){this.ak.x=a.clientX;this.ak.y=a.clientY;this.pu.kf();this.cg?J.V.Ba(J.C.I.im,this.cg,this.Ja.cc,this.Lc):J.V.Ba(J.C.I.rj)};e.Db=function(a){a=Math.min(1,(a-this.bi)/this.Pd);this.$t.Yc(a);1===a&&(this.k.Ia(document,"mousemove",this.Ig,!1,this),this.k.Ia(document,"mouseup",this.Ig,!1,this),ff(this),this.zn=this.Gj,this.D(),this.oh.onComplete(this.zn),J.V.Ba(J.C.I.Yl));this.oh.onProgress(this.Gj,a)};
function fl(a,b,c,d,g){this.mg=J.u.Xa.lt;console.log(a.B);this.ng={B:a.B,position:"right"};Ck.call(this,a,b,c,d,g);this.Ue=null;this.Oa=J.v.Utils.je(M(".item-button",this.domElement),"data-object");this.rc=J.v.Utils.je(M(".info li",this.domElement),"data-object")}t(fl,Ck);e=fl.prototype;
e.show=function(){fl.i.show.call(this);z(this.Oa,function(a){X(a,"loading",!1);this.k.j(a,"click",this.yf,!1,this)},this);this.k.j(this.fa,J.d.e.dm,this.onLoadStart,!1,this);this.k.j(this.fa,J.d.e.Tf,this.onLoadComplete,!1,this)};e.J=function(){fl.i.J.call(this);this.fa.Ca()};
e.yf=function(a){this.Ue&&(X(this.Oa[this.Ue],"active",!1),X(this.rc[this.Ue],"active",!1));this.Ue=a.currentTarget.getAttribute("data-object");X(this.Oa[this.Ue],"active",!0);X(this.rc[this.Ue],"active",!0);this.Xc.resize();a=this.fa;var b=this.Ue;a.objects[b]?gh(a,a.objects[b]):(a.Tj=b,a.Ka.removeAll(),a.Ka.removeAllEventListeners(),a.Ka.addEventListener("complete",a.Fu),a.Ka.addEventListener("error",a.Gu),a.Ka.loadManifest([{src:J.ra.assetsPath+"json/replaceable/"+b+".json",id:"data"},{src:J.ra.assetsPath+
"images/texture/replaceable/"+b+".jpg",id:"texture"}]),a.dispatchEvent({type:J.d.e.dm,id:a.Tj}));J.T.Ta("click")};e.onLoadStart=function(a){X(this.Oa[a.id],"loading",!0)};e.onLoadComplete=function(a){X(this.Oa[a.id],"loading",!1)};function gl(a){$.call(this,a);this.ik=!1;this.mb=I("home-button-prompt",this.domElement.parentNode);I("yes",this.mb);this.ru=I("no",this.mb)}t(gl,$);
gl.prototype.t=function(){gl.i.t.call(this)&&(this.k.j(document.body,"mousedown",this.Af,!1,this),this.k.j(this.ru,"click",this.al,!1,this))};gl.prototype.n=function(){gl.i.n.call(this)&&this.al()};gl.prototype.al=function(){this.ik=!1;Q(this.domElement,"pending");Q(this.mb,"shown");J.V.Ba(J.C.I.De,this)};
gl.prototype.Af=function(a){var b=jd(this.domElement,a.target);a=jd(this.mb,a.target);if(!b&&!a&&this.ik)return this.al(),!1;b&&(this.ik?this.al():(this.ik=!0,P(this.domElement,"pending"),P(this.mb,"shown"),J.V.Ba(J.C.I.Ge,this)))};function hl(a){yk.call(this,a,!0);a=I("popup",this.domElement);this.lb=new wj(a);this.xu=I("ok",a);this.ed="";this.fb=this.md=null;this.ae={};this.yb=this.xb=null;this.Oq=s(this.is,this);this.pn=T.F()}t(hl,yk);m(hl);e=hl.prototype;
e.t=function(){hl.i.t.call(this);this.k.Ra(this.xu,"click",this.is,!1,this);this.k.Ra(this.lb,J.d.e.Da,this.D,!1,this);this.xb=J.M.bind(this.Oq,J.M.key.lj,!0);this.yb=J.M.bind(this.Oq,J.M.key.Ce,!0)};e.n=function(){hl.i.n.call(this);Yg(J.M,this.xb);Yg(J.M,this.yb)};function il(a,b,c){return a.ae[b]?!0!==a.ae[b][c]?!0:!1:!0}
e.Zg=function(a,b){this.md=a;this.fb=b;var c=U(this.pn,"global.fengshui-data").dialog.opening[a][b],d=c.character,g=c.title,c=c.paragraph,h=M("h1",this.domElement)[0],k=M("p",this.domElement)[0],l=I("character",this.domElement);h.innerHTML=g;k.innerHTML=c;0<this.ed.length&&Q(l,this.ed);this.ed=d;P(l,this.ed)};
e.H=function(){if(!il(this,this.md,this.fb))return!1;hl.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut});this.lb.H(800);this.ae[this.md]=this.ae[this.md]||{};this.ae[this.md][this.fb]=!0};e.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{delay:0.25,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteParams:[!0],onCompleteScope:this})};e.is=function(){this.lb.D()};
e.N=function(a){hl.i.N.call(this,a);Of(this.domElement,J.ka);J.v.Utils.Un(this.lb.domElement)};function jl(a){yk.call(this,a,!0);a=I("popup",this.domElement);this.lb=new wj(a);this.Zu=I("stay",a);this.Oh=I("next",a);this.md=null;this.ae={};this.ed="";this.yb=this.xb=null;this.yu=s(this.hs,this);this.zu=s(this.ks,this);this.pn=T.F()}t(jl,yk);m(jl);e=jl.prototype;
e.t=function(){jl.i.t.call(this);this.k.Ra(this.Zu,"click",this.ks,!1,this);this.k.Ra(this.Oh,"click",this.hs,!1,this);this.k.Ra(this.lb,J.d.e.Da,this.D,!1,this);this.xb=J.M.bind(this.yu,J.M.key.lj,!0);this.yb=J.M.bind(this.zu,J.M.key.Ce,!0)};e.n=function(){jl.i.n.call(this);Yg(J.M,this.xb);Yg(J.M,this.yb)};
e.Zg=function(a){this.md=a;var b=U(this.pn,"global.fengshui-data").dialog.ending[a];a=b.character;var c=b.title,b=b.paragraph,d=M("h1",this.domElement)[0],g=M("p",this.domElement)[0],h=I("character",this.domElement);d.innerHTML=c;g.innerHTML=b;0<this.ed.length&&Q(h,this.ed);this.ed=a;P(h,this.ed)};e.H=function(){if(this.ae[this.md])return!1;this.ae[this.md]=!0;jl.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut});this.lb.H()};
e.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{delay:0.25,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteParams:[!0],onCompleteScope:this})};e.ks=function(){this.lb.D()};e.hs=function(){this.lb.D()};e.N=function(a){jl.i.N.call(this,a);Of(this.domElement,J.ka);J.v.Utils.Un(this.lb.domElement)};function kl(a){$.call(this,a);this.Nh=null;Y(this.domElement,"fadeIn","fadeOut");X(this.domElement,"hidden",!0)}t(kl,$);e=kl.prototype;
e.t=function(a){kl.i.t.call(this)&&(this.Nh=a,X(this.domElement,"hidden",!1),this.xg(),this.k.j(this.domElement,"click",this.Y,!1,this),TweenMax.ticker.addEventListener("tick",this.update,this))};e.n=function(){kl.i.n.call(this)&&(this.Nh=null,X(this.domElement,"hidden",!0),TweenMax.ticker.removeEventListener("tick",this.update,this))};e.xg=function(){Y(this.domElement,"fadeOut","fadeIn")};e.wi=function(){Y(this.domElement,"fadeIn","fadeOut")};
e.Y=function(){if(Bj(this.domElement,"fadeOut"))return!1;this.wi();J.T.Ta("confirm");this.f.Q.tc[V].dispatchEvent({type:J.d.e.G,mode:wg,Ga:rg,object:this.Nh.Hr()})};e.update=function(){var a=this.Ja.cc,b=this.Lc,c;c=this.Nh;c=c.le.localToWorld(c.data.position.clone());var a=J.v.K.eo(c,a,b),d=this.f.Q.control,g=d.getPosition(),b=g.distanceTo(c);c=c.sub(g).normalize();d=ph(d);c=c.dot(d);b=b<=this.Nh.Ad&&0<c;R(this.domElement,"transform","translateX("+a.x+"px) translateY("+a.y+"px)");b?this.xg():this.wi()};
function ll(a){$.call(this,a);a=I("icon",this.domElement);var b=U(T.F(),"global.book");this.Ot=new J.P.ah(a,b,10,3,30);var c={progress:0};this.Dp=TweenMax.fromTo(c,0.25,{progress:0},{progress:1,paused:!0,ease:Linear.easeNone,onUpdate:function(){this.Ot.Yc(c.progress)},onUpdateScope:this})}t(ll,$);e=ll.prototype;e.t=function(){ll.i.t.call(this)&&(this.k.j(this.domElement,"mouseover",this.Pi,!1,this),this.k.j(this.domElement,"mouseout",this.ue,!1,this))};e.Pi=function(){this.Dp.play()};e.ue=function(){this.Dp.reverse()};
e.N=function(){Jf(this.domElement,J.ka.width-100-30,150)};e.Ha=function(a){ll.i.Ha.call(this,a);switch(a.mode){case rg:this.sc&&this.n();break;default:this.sc||this.t()}};function ml(a){$.call(this,a);this.Vt=new Kk(this.wv,400,this);this.$d=new THREE.Raycaster;this.Su=new THREE.Vector3;this.Sp=[];this.Ze={};this.Yf={};this.ji=[]}t(ml,$);
function nl(a,b){var c=b.$,d=b.id;z(b.Ae,function(a){var b=a.id;this.Ze[b]||(b=Re.$l.replace("{sectionId}",c).replace("{viewId}",d).replace("{objectId}",b),b=od(J.u.controls.Ht,{object:a,Nv:b}),this.domElement.appendChild(b),this.Ze[a.id]=b)},a);z($i(b),function(a){if(!this.Ze[a.id]&&!a.Yg){var b=od(J.u.controls.vt,{Qc:a});this.domElement.appendChild(b);this.Ze[a.id]=b}},a)}e=ml.prototype;
e.bb=function(a){ml.i.bb.call(this,a);nl(this,a);var b=tb(a.Ae);a=D($i(a),function(a){return!a.Yg});this.ji=[].concat(b,a);this.Yf={};C(this.ji,function(a){a=a.id;this.Yf[a]=this.Ze[a]},this);C(b,function(a){var b=a.B;X(this.Ze[a.id],"locked",!(b.pa&&b.rf));!b.pa&&b.rf&&Zd(b,J.d.e.Hb,this.ve,!1,this)},this);C(a,function(a){Zd(this.Ze[a.id],"click",this.Aw,!1,this)},this);ol(this)};
e.t=function(){ml.i.t.call(this)&&(z(this.Yf,function(a){Y(a,"fadeOut","fadeIn")}),ol(this),TweenMax.ticker.addEventListener("tick",this.update,this))};e.n=function(){ml.i.n.call(this)&&(z(this.Yf,function(a){Y(a,"fadeIn","fadeOut")}),TweenMax.ticker.removeEventListener("tick",this.update,this))};e.Ha=function(a){ml.i.Ha.call(this,a);switch(a.mode){case rg:this.n();break;default:this.t()}};function ol(a){a.f&&(a.Sp=E(Eh(a.f),function(a){return a.m}))}
e.wv=function(){if(1<this.f.ob.m.children.length)return!1;var a=this.f.Q.control,b=a.getPosition(),a=ph(a,!0),c=Math.cos(THREE.Math.degToRad(45)),d,g=this.ji.length;for(d=0;d<g;d++){var h=this.ji[d],k=this.Yf[h.id],l=h.qb(),n=this.Su.subVectors(l,b).normalize();this.$d.set(b,n);l.sub(b).normalize().dot(a)>=c?(X(k,"hidden",!1),h=J.v.K.Tv(this.Sp,h.m,Bg(h),this.$d),X(k,"hidden",!h)):X(k,"hidden",!0)}};e.ve=function(a){a=M(".tooltip[data-tip-id="+a.B.id+"]",this.domElement);C(a,function(a){Q(a,"locked")})};
e.Aw=function(a){a.preventDefault();a=a.currentTarget.getAttribute("data-id");this.dispatchEvent({type:J.d.e.Wl,Qc:this.f.ma[a]})};e.Ha=function(a){ml.i.Ha.call(this,a);X(this.domElement,"design",a.mode===ug);switch(a.mode){case sg:this.n();this.$d.far=200;break;case V:this.t();this.$d.far=200;break;case ug:this.t();this.$d.far=Infinity;break;default:this.n()}};
e.update=function(){var a=this.Ja.cc,b=this.Lc;C(this.ji,function(c){var d=c.qb(),d=J.v.K.eo(d,a,b);c=this.Yf[c.id];140<d.x&&d.x<b.width-140&&140<d.y&&d.y<b.height-140?Y(c,"fadeOut","fadeIn"):Y(c,"fadeIn","fadeOut");R(c,"transform","translateX("+d.x+"px) translateY("+d.y+"px)")},this);this.Vt.kf()};function pl(a){yk.call(this,a,!0)}t(pl,yk);m(pl);pl.prototype.show=function(a){pl.i.show.call(this,a);this.domElement.appendChild(J.si.domElement)};
pl.prototype.H=function(){pl.i.H.call(this);TweenMax.fromTo(this.domElement,0.8,{opacity:0},{opacity:1,ease:Strong.easeInOut})};pl.prototype.D=function(){this.dispatchEvent(J.d.e.Da);TweenMax.to(this.domElement,0.8,{delay:0.25,opacity:0,ease:Strong.easeInOut,onComplete:this.J,onCompleteParams:[!0],onCompleteScope:this})};pl.prototype.N=function(a){pl.i.N.call(this,a);Of(this.domElement,J.ka)};
function ql(a,b){$.call(this,a);this.Va=b;this.Gc=[];this.Gh=!1;this.en=this.Xd=0;this.Ch=new oe(3E4);this.$f=M(".dialogue.hint",this.domElement)[0];this.hk=M(".prev",this.domElement)[0];this.bk=M(".next",this.domElement)[0];this.Ip=I("character",this.domElement);this.nc=M("canvas",this.Ip)[0];this.qh=this.nc.getContext("2d");this.Yb=this.xm=this.Wd=this.Om=null;this.Pj=!1;this.Nm=new dg(this.mo,6E3,this)}t(ql,$);e=ql.prototype;
e.init=function(){ql.i.init.call(this);C(this.Va,function(a){a.Ra(J.d.e.Hb,this.ve,!1,this)},this);this.xm=rl(this)};function sl(a){a.Gc=Xe(Ve.F(),a.f.id,a.f.$);a.Gc=D(a.Gc,function(a){var c=Te(a),c=c?c.pa:!0;return!a.pa&&c});a.en=a.Gc.length;return a.Gc}
e.bb=function(a){ql.i.bb.call(this,a);this.Gc=sl(this);this.Om=M(".hints li",this.$f);this.Yb&&(this.Yb.loop.pause(),this.Yb.Po.pause());this.Yb=(this.Yb=yb(this.xm,function(b){return b.Vb===a.id}))||tb(this.xm)[0];this.nc.width=this.Yb.size.width;this.nc.height=this.Yb.size.height;this.Yb.loop.restart()};
e.t=function(){ql.i.t.call(this)&&(this.k.j(this.hk,"click",this.Y,!1,this),this.k.j(this.bk,"click",this.Y,!1,this),this.k.j(this.Ip,"mousedown",this.Af,!1,this),this.k.j(this.$f,"mouseover",this.Pi,!1,this),this.k.j(this.$f,"mouseout",this.ue,!1,this),this.k.j(this.Ch,"tick",this.Yw,!1,this),je(J.V,J.C.I.Ge,this.Lg,this),je(J.V,J.C.I.De,this.Gg,this),this.Pj=0<J.V.qk.length,this.Ch.start())};e.n=function(){ql.i.n.call(this)&&(og(J.C.I.Ge,this.Lg,this),og(J.C.I.De,this.Gg,this),this.Ch.stop())};
function rl(a){var b={},c=T.F();C(a.Va,function(a){var g=a.pv;if(!b[g]){var h=a.$,k=U(c,h+".global.character."+g),h=U(c,h+".global.character."+g+"-data"),l=h.frames,h=h.size,n=ub(l),p=D(n,function(a){return qa(a,"loop-")}),n=D(n,function(a){return qa(a,"raise-")}),v={frame:0},p=p.length,x=TweenMax.to(v,p/30,{frame:p-1,ease:Linear.easeNone,paused:!0,yoyo:!0,repeat:-1,repeatDelay:2,onUpdate:function(){var a=Math.round(v.frame);tl(this,k,l["loop-"+a])},onUpdateScope:this}),A={frame:0},p=n.length,p=TweenMax.to(A,
p/30,{frame:p-1,ease:Linear.easeNone,paused:!0,onUpdate:function(){var a=Math.round(A.frame);tl(this,k,l["raise-"+a])},onUpdateScope:this,onComplete:this.zw,onCompleteScope:this,onReverseComplete:function(){x.restart()}});b[g]={Vb:a.Vb,size:h,loop:x,Po:p}}},a);return b}function ul(a){return F(a.Gc,function(a){return!a.pa})}function tl(a,b,c){var d=c.x;c=c.y;var g=a.nc.width,h=a.nc.height;a.qh.clearRect(0,0,g,h);a.qh.drawImage(b,d,c,g,h,0,0,g,h)}
function vl(a){a.Wd&&Q(a.Wd,"shown");a.Wd=F(a.Om,function(a){return a.getAttribute("data-view-id")===this.f.id},a);P(a.Wd,"shown");a.hk.disabled=a.bk.disabled=!0}function wl(a,b){a.Wd&&Q(a.Wd,"shown");a.Wd=F(a.Om,function(a){return a.getAttribute("data-tip-id")===b});P(a.Wd,"shown");a.hk.disabled=a.bk.disabled=!1}function xl(a,b){a.Gh||(a.Gh=!0,b?wl(a,b):vl(a),a.Nm.start(),a.Ch.stop(),a.Yb.loop.pause(),a.Yb.Po.restart())}
e.mo=function(){this.Gh&&(this.Gh=!1,Y(this.domElement,"active","inactive"),this.Ch.start(),this.Yb.Po.reverse())};e.Y=function(a){switch(a.currentTarget){case this.hk:this.Xd--;0>this.Xd&&(this.Xd=this.en-1);wl(this,this.Gc[this.Xd].id);break;case this.bk:this.Xd++,this.Xd>this.en-1&&(this.Xd=0),wl(this,this.Gc[this.Xd].id)}};e.Af=function(a){if(!Qd(a)||w&&Na&&a.ctrlKey)return!1;this.Gh?this.mo():(a=ul(this),xl(this,a?a.id:null))};e.Pi=function(a){a.currentTarget===this.$f&&this.Nm.stop()};
e.ue=function(a){a.currentTarget===this.$f&&(a.relatedTarget&&jd(a.currentTarget,a.relatedTarget)||this.Nm.start())};e.Yw=function(){if(!this.Pj){var a=ul(this);xl(this,a?a.id:null)}};e.ve=function(a){a=M('.hints li[data-tip-id="'+a.B.id+'"]',this.$f)[0];hd(a);this.Gc=sl(this)};e.zw=function(){Y(this.domElement,"inactive","active")};e.Ha=function(a){ql.i.Ha.call(this,a);switch(a.Ga||a.mode){case V:case vg:this.t();break;default:this.n()}};e.Lg=function(a){a!==this&&(this.Pj=!0,this.mo())};
e.Gg=function(a){a!==this&&(this.Pj=!1)};e.N=function(){Jf(this.domElement,J.ka.width-100-30,J.ka.height-100-30)};function yl(a,b,c,d,g){this.mg=J.u.Xa.qt;this.ng={B:a.B,position:"right"};Ck.call(this,a,b,c,d,g);this.Td=null;this.Oa=J.v.Utils.je(M(".item-button",this.domElement),"data-fruit");this.rc=J.v.Utils.je(M(".info li",this.domElement),"data-fruit")}t(yl,Ck);yl.prototype.show=function(){yl.i.show.call(this);z(this.Oa,function(a){this.k.j(a,"click",this.yf,!1,this)},this)};
yl.prototype.yf=function(a){this.Td&&(X(this.Oa[this.Td],"active",!1),X(this.rc[this.Td],"active",!1));this.Td=a.currentTarget.getAttribute("data-fruit");X(this.Oa[this.Td],"active",!0);X(this.Oa[this.Td],"show-fruit",!0);X(this.rc[this.Td],"active",!0);this.Xc.resize();Ci(this.fa,this.Td);J.T.Ta("click")};
function zl(a,b,c,d){N.call(this);this.domElement=a;this.f=null;this.bc=b;this.pc=d;this.Va=c;this.Sm=!1;this.fd=bl.F();this.wm={};this.hg=I("overlays",this.domElement);a=I("tutorial-overlay",this.hg);this.Pf=new Ak(a);a=I("credits-overlay",this.hg);this.hf=new pl(a);a=I("opening-overlay",this.hg);this.yd=new hl(a);a=I("ending-overlay",this.hg);this.jf=new jl(a);a=I("finale-overlay",this.hg);this.Cr=new Bk(a);a=I("loader-overlay",this.hg);this.Dg=new zk(a);this.wb=I("controls",this.domElement);a=
I("home-button",this.wb);this.no=new gl(a);this.no.Sa=this;a=I("compass",this.wb);this.tg=new Qh(a);this.tg.Sa=this;a=I("book",this.wb);this.na=new ll(a);this.na.Sa=this;a=I("reminder",this.wb);this.Gf=new ql(a,c);this.Gf.Sa=this;a=I("progressBar",this.wb);this.Ti=new Lk(a,c);this.Ti.Sa=this;c=I("objectSelector",this.wb);this.cs=new el(c);c=I("dropButton",this.wb);this.Vk=new kl(c);this.Hp=I("captions",this.domElement);this.sr=I("tooltips",this.domElement);this.Be=new ml(this.sr)}t(zl,N);e=zl.prototype;
e.init=function(){this.Gf.init()};e.bb=function(a){this.f&&this.f.Q.Ia(J.d.e.G,this.Ha,!1,this);this.f=a;this.f.Q.j(J.d.e.G,this.Ha,!1,this);this.tg.bb(a);this.na.bb(a);this.Gf.bb(a);this.Ti.bb(a);this.cs.bb(a);this.Vk.bb(a);this.Be.bb(a)};e.pause=function(a){X(this.Hp,"paused",a);X(this.sr,"paused",a);X(this.wb,"paused",a);X(this.wb,"hidden",a);this.fd.Bc||this.fd.show(!a);O(J.ol.Eh,!a)};
e.t=function(){this.bc.j(J.d.e.Fe,this.Kg,!1,this);this.bc.j(J.d.e.Sf,this.Bo,!1,this);J.ub.j(J.d.e.cb,this.Pf.H,!1,this.Pf);J.ub.j(J.d.e.Da,this.Pf.D,!1,this.Pf);J.si.j(J.d.e.cb,this.hf.H,!1,this.hf);J.si.j(J.d.e.Da,this.hf.D,!1,this.hf);this.pc.j(J.d.e.He,this.Dg.onLoadStart,!1,this.Dg);this.pc.j(J.d.e.Ee,this.Dg.onLoadProgress,!1,this.Dg);this.pc.j(J.d.e.Gb,this.Dg.onLoadComplete,!1,this.Dg);this.yd.j(J.d.e.cb,this.Df,!1,this);this.yd.j(J.d.e.Da,this.wl,!1,this);this.jf.j(J.d.e.cb,this.Df,!1,this);
this.jf.j(J.d.e.Da,this.wl,!1,this);this.Pf.t();this.hf.t();Al(this)};e.n=function(){he(this.f.Q);he(this.bc);he(J.ub);he(J.si);he(this.pc);he(this.yd);this.Vk.n();this.Be.n();this.Pf.n();this.hf.n();Bl(this)};function Al(a){a.no.t();a.tg.t();a.na.t();a.Gf.t();a.Ti.t();a.f&&!a.Sm&&a.Be.t();a.fd.Bc||(a.fd.t(),a.domElement.appendChild(a.fd.domElement));O(J.ol.Eh,!0)}function Bl(a){a.no.n();a.tg.n();a.na.n();a.Gf.n();a.Ti.n();a.Be.n();a.fd.Bc||a.fd.n();O(J.ol.Eh,!1)}
function Ch(a,b,c){var d=ja(b);if(a.wm[d])return a.wm[d];var g=Ck;switch(b.ie){case "changecolor":g=Jk;break;case "changepicture":g=dl;break;case "changeobject":g=fl;break;case "dropfruits":g=yl}b=new g(b,a.f.Hf,a.f.Fb,c,a);a.wm[d]=b;a.Hp.appendChild(b.domElement);return b}function Cl(a,b){X(a.wb,"hidden",!b);a.Be.show(b);a.fd.Bc||a.fd.show(b);O(J.ol.Eh,b)}
e.Ha=function(a){var b=a.Ga||a.mode,c=!0;this.Sm=a.mode===sg;switch(b){case tg:case rg:case null:c=!1}switch(a.mode){case V:Lb(this.Va,function(a){return a.pa})===this.Va.length&&(this.jf.Zg(this.f.$),this.jf.H())}X(this.f.Ar,"bg-white",a.mode===rg);a.Qc&&(c=!1);il(this.yd,this.f.$,this.f.id)&&(c=!1);Cl(this,c)};e.Kg=function(a){this.bb(a.target)};e.Bo=function(a){this.f.Q.dg===V&&(a=a.target,this.yd.Zg(a.$,a.id),this.yd.H())};e.Df=function(){Bl(this);Cl(this,!1)};
e.wl=function(a){var b;a.currentTarget===this.jf&&(b=$e());b?this.Cr.H():(Al(this),this.Sm||Cl(this,!0))};function Dl(){N.call(this);this.$g=null;this.af={};this.$e=null;this.k=new L(this)}t(Dl,N);e=Dl.prototype;e.t=function(){this.k.j(this,J.d.e.Fe,this.Kg,!1,this);this.k.j(this,J.d.e.fh,this.Xw,!1,this);this.k.j(this,J.d.e.G,this.yw,!1,this);this.k.j(this,J.d.e.cb,this.ew,!1,this);this.k.j(this,J.d.e.Da,this.fw,!1,this);this.k.j(this,J.d.e.Sf,this.Bo,!1,this);this.k.j(this,J.d.e.ij,this.gw,!1,this)};
e.n=function(){this.k.removeAll()};e.Xw=function(a){console.log("Hide View3D: ",a.target.id);J.V.Ba(J.C.I.am,a.target)};e.Kg=function(a){this.$g=a.target;console.log("Show View3D: ",this.$g.id);Yi(this.$g);this.$g.t();J.V.Ba(J.C.I.sp,this.$g)};e.yw=function(a){a.target.wi();this.$e=this.af[a.$+"."+a.Vb];this.$e.Xo=this.$e.ma[a.xi];console.log("Change View3D from: "+a.target.id+" to "+this.$e.id+" start gateway: "+this.$e.Xo.xi)};e.ew=function(){};e.fw=function(a){a=a.target;a.n();Zi(a)};e.Bo=function(){};
e.gw=function(){this.$e&&this.$e.xg(this.Qy)};function El(a,b){var c=od(a,b);Yc("main").appendChild(c);sk.call(this,Yc(b.id));this.bc=new Dl;this.iv=I("scene-container",this.domElement);c=I("hud",this.domElement);this.Dh=new zl(c,this.bc,b.Dd,this);this.bf=[];this.fb=null;this.af=[];this.f=null;this.dq=!1}t(El,sk);e=El.prototype;e.init=function(){El.i.init.call(this)};e.t=function(){El.i.t.call(this);this.bc.t();this.Dh.t();this.bc.j(J.d.e.Fe,this.Kg,!1,this);Fl(this)};
function Fl(a){a.f&&(Yi(a.f),a.f.t())}e.n=function(){El.i.n.call(this);this.bc.n();this.Dh.n();this.bc.Ia(J.d.e.Fe,this.Kg,!1,this);this.f&&(this.f.n(),Zi(this.f))};e.load=function(a){this.fb=a||this.fb||this.bf[0];this.Je=[this.id+".global",this.id+"."+this.fb];El.i.load.call(this)};e.H=function(){if(!El.i.H.call(this))return!1;this.f.xg();ai(this.id)};e.D=function(){if(!El.i.D.call(this))return!1;$h(this.id)};
e.onLoadComplete=function(a){El.i.onLoadComplete.call(this,a);0===this.af.length&&this.Dh.init();a=this.id;var b=this.fb;if(null==this.bc.af[a+"."+this.fb]){var c=new Vi(a,b,this.iv,this.Dh,this),d=this.bc;d.af[c.$+"."+c.id]=c;c.Sa=d;c.init();this.af.push(c)}this.f=this.bc.af[a+"."+b];Fl(this)};e.Kg=function(a){a=a.target;if(this.dq){var b=a.Xo||vh(a);di(a.Q,{mode:V,Pc:b.origin.position,mf:b.origin.rotation,lf:40})}else di(a.Q,{mode:sg}),this.dq=!0};
function Gl(){var a=["livingroom","corridor","homeoffice","boysroom"],b=Ve.F(),c=Ye(b,"house"),d={};z(a,function(a){var c=Xe(b,a,"house",!1,!0);d[a]=c});var g=J.u.ud.jp,c={id:"house",Dd:c,Zo:d,Ed:Re,copy:U(T.F(),"global.fengshui-data")};El.call(this,g,c);this.bf=a;this.fb=this.bf[0]}t(Gl,El);
function Hl(){var a=["livingroom","bathroom"],b=Ve.F(),c=Ye(b,"studio"),d={};z(a,function(a){var c=Xe(b,a,"studio",!1,!0);d[a]=c});var g=J.u.ud.jp,c={id:"studio",Dd:c,Zo:d,Ed:Re,copy:U(T.F(),"global.fengshui-data")};El.call(this,g,c);this.bf=a;this.fb=this.bf[0]}t(Hl,El);function xk(){N.call(this);this.Nb={};this.nb=null;Il(this,"home");this.k=new L(this)}t(xk,N);m(xk);
xk.prototype.init=function(){Il(this,"studio");Il(this,"house");this.k.j(this,J.d.e.cb,this.Ex,!1,this);this.k.j(this,J.d.e.ij,this.Fx,!1,this)};function Il(a,b){var c;switch(b){case "home":c=new wk;break;case "studio":c=new Hl;break;case "house":c=new Gl}c.Sa=a;c.init()}xk.prototype.Ex=function(a){this.nb&&this.nb.D();this.nb=a.target};xk.prototype.Fx=function(a){this.nb===a.target&&(this.nb=null)};
J.Wa.Gd=function(){N.call(this);if(J.v.Utils.ny){lg();J.debug="true"===J.v.Utils.Zk("debug")||J.ra.debug;J.cw="true"===J.v.Utils.Zk("office")||J.ra.office;J.Os=J.v.Utils.Zk("quality")||J.ra.quality;!0===J.ra.escapeConsole&&J.v.Utils.Ev();J.ka=J.Wa.Gd.jo();K(window,"resize",function(){J.ka=J.Wa.Gd.jo()});J.Wi={Ll:"high"===J.Os?1920<screen.width?2048:1024:1024,shadowMapSize:"high"===J.Os?1024:512};var a=od(J.u.ud.Gd,{debug:J.debug});document.body.appendChild(a);J.V=J.C.F();J.debug&&uf.F();J.cw&&Rf();
J.aj=uj.F();J.T=Gj.F();J.ol=new Dj;J.Dv=nk.F();J.ub=xj.F();J.si=pk.F();Me="hash";J.hc=Le.F();J.El=lf.F();J.iy=J.P.hm.F();J.Rg=xk.F();J.M=kk.F();J.Yy=Pe(J.hc);J.hc.init();J.hc.Pg(Re.mj)}else window.location.href="/unsupported.html"};t(J.Wa.Gd,N);m(J.Wa.Gd);J.Wa.Gd.jo=function(){return Pf(document.body)};
function Jl(a,b,c){N.call(this);b=b||30;c=c||10;var d=[];a=a.split("<br>");for(var g=0;g<a.length;g++)for(var h=a[g],k=0,l=Math.floor(h.length/b),n,p=-1,k=0;k<l;k++){n=p+1;p=n+b;if(" "===h.charAt(p+1))p+=1;else for(;" "!==h.charAt(p);)p--;d.push(h.substring(n,p))}a=d.length>c;d=d.slice(0,c);a&&(d[d.length-1]=Ea(d[d.length-1],b/2));this.domElement=od(J.u.Xa.ut,{Yv:d});this.Ih=id(this.domElement);this.Ph=this.Ih.length;this.Rp=Yb(this.Ph);this.zp=Yb(this.Ph);this.Jh=E(this.Ih,function(a){return{me:a,
x:0,z:0,opacity:0,zl:0}});this.Ib=new TimelineMax({paused:!0});b=E(this.Ih,function(a,b){var c=this.Jh[b];this.vl(c);return TweenMax.fromTo(c,2,{x:-20,zl:0},{x:0,zl:1,ease:Quad.easeOut,onUpdate:this.vl,onUpdateParams:[c],onUpdateScope:this})},this);this.Ib.add(b,"+=0","start",0.025);this.Jb=new TimelineMax({paused:!0,onComplete:this.dw,onCompleteScope:this});b=E(this.Ih,function(a,b){var c=this.Jh[b];return TweenMax.to(c,1,{zl:0,ease:Quad.easeInOut,onUpdate:this.vl,onUpdateParams:[c],onUpdateScope:this})},
this);this.Jb.add(b,"+=0","start",0.05);document.body.appendChild(this.domElement)}t(Jl,N);e=Jl.prototype;e.t=function(){ef(this)};e.n=function(){ff(this)};e.H=function(){this.Ib.isActive()||(O(this.domElement,!0),this.Jb.pause(),this.Ib.restart(),this.t())};e.D=function(){this.Jb.isActive()||(this.Ib.pause(),this.Jb.restart())};e.dw=function(){this.n();O(this.domElement,!1)};e.vl=function(a){R(a.me,{transform:"translateX("+a.x+"px) translateZ("+a.z+"px)",opacity:a.opacity*a.zl})};
e.Db=function(a){for(var b=0,c=1/this.Ph,d=Math.PI/this.Ph,g=0;1>g;g+=c){var h=Math.round(g*this.Ph);this.Rp[h]=(50*Math.sin(b+a/1E3)).toFixed(2);this.zp[h]=cc(0.5,1,0.5*(Math.sin(b+a/1E3)+1));b+=d}C(this.Ih,function(a,b){this.Jh[b].z=this.Rp[b];this.Jh[b].opacity=this.zp[b];this.vl(this.Jh[b])},this)};
function Kl(){Ll(this,this.Ts);var a=this.Ts,b=D(Ml(a),Nl),b=E(E(b,Ol),Pl);this.fy=ec.apply(null,b);this.gy=gc.apply(null,b);a=D(a.split("\n"),Nl);a=E(E(a,Ml),Pl);this.Xx=ec.apply(null,a);this.Yx=gc.apply(null,a);Ql(this,this.yv)}var Rl=[".","?","!"],Sl=/[\.\?\!]/,Tl=[",",".","?","!"],Ul=/\s/;
function Ll(a,b){var c=Ol(b),c=E(c,Vl),d=[0,0],g=d.join("-"),h=new mc,k=[g],l={};C(c,function(a){var b=h.get(g);b?b.push(a):(b=[a],h.set(g,b));Nb(Rl,a[1])&&k.push(g);l[g]=d;d=[d[1],a[0]];g=d.join("-")});if(0<h.rb())a.Vn=h,a.bt=k,a.ov=l;else throw Error("Could not generate chains from sample text.");}function Ql(a,b){var c=Ol(b),d=new mc;C(c,function(a){var b=d.get(a.length);b||(b=new Qj,d.set(a.length,b));b.add(a)});a.fp=d}
function Wl(){for(var a=new Kl,b=Xl(a.Xx,a.Yx),b=Math.max(Math.floor(b),1),c=[],d=void 0;c.length<b;){var g=a,h=d;if(0==g.Vn.rb()||0==g.bt.length)throw Error("No chains created");if(0==g.fp.rb())throw Error("No dictionary");var d=Xl(g.fy,g.gy),d=Math.max(Math.floor(d),1),k="",l=void 0;h?(l=Ol("lorem ipsum dolor sit amet, consecteteur adipiscing elit"),l.length>d&&(l.length=d),h=l[l.length-1],h=h.substring(h.length-1),Nb(Tl,h)&&(k=h)):l=[];for(var h=[],n="";l.length<d;){g.Vn.gf(n)||(k=g,h=Yl(k.bt),
h=k.ov[h],n=h.join("-"));var k=Yl(g.Vn.get(n)),n=k[0],k=Nb(Rl,k[1])?"":k[1],p=Zl(g.fp.qe(),n),p=Yl(g.fp.get(p).Rb());l.push(p+k);h=[h[1],n];n=h.join("-")}l=l.join(" ");l=l.slice(0,1).toUpperCase()+l.slice(1);l.substring(l.length-1)==k&&(l=l.slice(0,l.length-1));c.push(l+".");d=!1}return c=c.join(" ")}function Ml(a){return D(a.split(Sl),Nl)}function Ol(a){return D(a.split(Ul),Nl)}function Nl(a){return 0<ta(a).length}function Pl(a){return a.length}
function Zl(a,b){var c=a[0];C(a,function(a){Math.abs(b-a)<Math.abs(b-c)&&(c=a)});return c}function Vl(a){var b;Jb(Tl,function(c){return ra(a,c)?(b=[a.length-c.length,c],!0):!1});return b||[a.length,""]}var $l=4*Math.exp(-0.5)/Math.sqrt(2);function Xl(a,b){for(;;){var c=Math.random(),d=1-Math.random(),c=$l*(c-0.5)/d;if(c*c/4<=-Math.log(d))break}return a+c*b}function Yl(a){return a[Zb(a.length)]}Kl.prototype.Ts="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui.\n\nEtiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc, quis gravida magna mi a libero. Fusce vulputate eleifend sapien. Vestibulum purus quam, scelerisque ut, mollis sed, nonummy id, metus. Nullam accumsan lorem in dui. Cras ultricies mi eu turpis hendrerit fringilla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In ac dui quis mi consectetuer lacinia.\n\nNam pretium turpis et arcu. Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum. Sed aliquam ultrices mauris. Integer ante arcu, accumsan a, consectetuer eget, posuere ut, mauris. Praesent adipiscing. Phasellus ullamcorper ipsum rutrum nunc. Nunc nonummy metus. Vestibulum volutpat pretium libero. Cras id dui. Aenean ut eros et nisl sagittis vestibulum. Nullam nulla eros, ultricies sit amet, nonummy id, imperdiet feugiat, pede. Sed lectus. Donec mollis hendrerit risus. Phasellus nec sem in justo pellentesque facilisis. Etiam imperdiet imperdiet orci. Nunc nec neque. Phasellus leo dolor, tempus non, auctor et, hendrerit quis, nisi.\n\nCurabitur ligula sapien, tincidunt non, euismod vitae, posuere imperdiet, leo. Maecenas malesuada. Praesent congue erat at massa. Sed cursus turpis vitae tortor. Donec posuere vulputate arcu. Phasellus accumsan cursus velit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed aliquam, nisi quis porttitor congue, elit erat euismod orci, ac placerat dolor lectus quis orci. Phasellus consectetuer vestibulum elit. Aenean tellus metus, bibendum sed, posuere ac, mattis non, nunc. Vestibulum fringilla pede sit amet augue. In turpis. Pellentesque posuere. Praesent turpis.\n\nAenean posuere, tortor sed cursus feugiat, nunc augue blandit nunc, eu sollicitudin urna dolor sagittis lacus. Donec elit libero, sodales nec, volutpat a, suscipit non, turpis. Nullam sagittis. Suspendisse pulvinar, augue ac venenatis condimentum, sem libero volutpat nibh, nec pellentesque velit pede quis nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Fusce id purus. Ut varius tincidunt libero. Phasellus dolor. Maecenas vestibulum mollis diam. Pellentesque ut neque. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.\n\nIn dui magna, posuere eget, vestibulum et, tempor auctor, justo. In ac felis quis tortor malesuada pretium. Pellentesque auctor neque nec urna. Proin sapien ipsum, porta a, auctor quis, euismod ut, mi. Aenean viverra rhoncus pede. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut non enim eleifend felis pretium feugiat. Vivamus quis mi. Phasellus a est. Phasellus magna.\n\nIn hac habitasse platea dictumst. Curabitur at lacus ac velit ornare lobortis. Curabitur a felis in nunc fringilla tristique. Morbi mattis ullamcorper velit. Phasellus gravida semper nisi. Nullam vel sem. Pellentesque libero tortor, tincidunt et, tincidunt eget, semper nec, quam. Sed hendrerit. Morbi ac felis. Nunc egestas, augue at pellentesque laoreet, felis eros vehicula leo, at malesuada velit leo quis pede. Donec interdum, metus et hendrerit aliquet, dolor diam sagittis ligula, eget egestas libero turpis vel mi. Nunc nulla. Fusce risus nisl, viverra et, tempor et, pretium in, sapien. Donec venenatis vulputate lorem.\n\nMorbi nec metus. Phasellus blandit leo ut odio. Maecenas ullamcorper, dui et placerat feugiat, eros pede varius nisi, condimentum viverra felis nunc et lorem. Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. In auctor lobortis lacus. Quisque libero metus, condimentum nec, tempor a, commodo mollis, magna. Vestibulum ullamcorper mauris at ligula. Fusce fermentum. Nullam cursus lacinia erat. Praesent blandit laoreet nibh.\n\nFusce convallis metus id felis luctus adipiscing. Pellentesque egestas, neque sit amet convallis pulvinar, justo nulla eleifend augue, ac auctor orci leo non est. Quisque id mi. Ut tincidunt tincidunt erat. Etiam feugiat lorem non metus. Vestibulum dapibus nunc ac augue. Curabitur vestibulum aliquam leo. Praesent egestas neque eu enim. In hac habitasse platea dictumst. Fusce a quam. Etiam ut purus mattis mauris sodales aliquam. Curabitur nisi. Quisque malesuada placerat nisl. Nam ipsum risus, rutrum vitae, vestibulum eu, molestie vel, lacus.\n\nSed augue ipsum, egestas nec, vestibulum et, malesuada adipiscing, dui. Vestibulum facilisis, purus nec pulvinar iaculis, ligula mi congue nunc, vitae euismod ligula urna in dolor. Mauris sollicitudin fermentum libero. Praesent nonummy mi in odio. Nunc interdum lacus sit amet orci. Vestibulum rutrum, mi nec elementum vehicula, eros quam gravida nisl, id fringilla neque ante vel mi. Morbi mollis tellus ac sapien. Phasellus volutpat, metus eget egestas mollis, lacus lacus blandit dui, id egestas quam mauris ut lacus. Fusce vel dui. Sed in libero ut nibh placerat accumsan. Proin faucibus arcu quis ante. In consectetuer turpis ut velit. Nulla sit amet est. Praesent metus tellus, elementum eu, semper a, adipiscing nec, purus. Cras risus ipsum, faucibus ut, ullamcorper id, varius ac, leo. Suspendisse feugiat. Suspendisse enim turpis, dictum sed, iaculis a, condimentum nec, nisi. Praesent nec nisl a purus blandit viverra. Praesent ac massa at ligula laoreet iaculis. Nulla neque dolor, sagittis eget, iaculis quis, molestie non, velit.\n\nMauris turpis nunc, blandit et, volutpat molestie, porta ut, ligula. Fusce pharetra convallis urna. Quisque ut nisi. Donec mi odio, faucibus at, scelerisque quis, convallis in, nisi. Suspendisse non nisl sit amet velit hendrerit rutrum. Ut leo. Ut a nisl id ante tempus hendrerit. Proin pretium, leo ac pellentesque mollis, felis nunc ultrices eros, sed gravida augue augue mollis justo. Suspendisse eu ligula. Nulla facilisi. Donec id justo. Praesent porttitor, nulla vitae posuere iaculis, arcu nisl dignissim dolor, a pretium mi sem ut ipsum. Curabitur suscipit suscipit tellus.\n\nPraesent vestibulum dapibus nibh. Etiam iaculis nunc ac metus. Ut id nisl quis enim dignissim sagittis. Etiam sollicitudin, ipsum eu pulvinar rutrum, tellus ipsum laoreet sapien, quis venenatis ante odio sit amet eros. Proin magna. Duis vel nibh at velit scelerisque suscipit. Curabitur turpis. Vestibulum suscipit nulla quis orci. Fusce ac felis sit amet ligula pharetra condimentum. Maecenas egestas arcu quis ligula mattis placerat. Duis lobortis massa imperdiet quam. Suspendisse potenti.\n\nPellentesque commodo eros a enim. Vestibulum turpis sem, aliquet eget, lobortis pellentesque, rutrum eu, nisl. Sed libero. Aliquam erat volutpat. Etiam vitae tortor. Morbi vestibulum volutpat enim. Aliquam eu nunc. Nunc sed turpis. Sed mollis, eros et ultrices tempus, mauris ipsum aliquam libero, non adipiscing dolor urna a orci. Nulla porta dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos.\n\nPellentesque dapibus hendrerit tortor. Praesent egestas tristique nibh. Sed a libero. Cras varius. Donec vitae orci sed dolor rutrum auctor. Fusce egestas elit eget lorem. Suspendisse nisl elit, rhoncus eget, elementum ac, condimentum eget, diam. Nam at tortor in tellus interdum sagittis. Aliquam lobortis. Donec orci lectus, aliquam ut, faucibus non, euismod id, nulla. Curabitur blandit mollis lacus. Nam adipiscing. Vestibulum eu odio.\n\nVivamus laoreet. Nullam tincidunt adipiscing enim. Phasellus tempus. Proin viverra, ligula sit amet ultrices semper, ligula arcu tristique sapien, a accumsan nisi mauris ac eros. Fusce neque. Suspendisse faucibus, nunc et pellentesque egestas, lacus ante convallis tellus, vitae iaculis lacus elit id tortor. Vivamus aliquet elit ac nisl. Fusce fermentum odio nec arcu. Vivamus euismod mauris. In ut quam vitae odio lacinia tincidunt. Praesent ut ligula non mi varius sagittis. Cras sagittis. Praesent ac sem eget est egestas volutpat. Vivamus consectetuer hendrerit lacus. Cras non dolor. Vivamus in erat ut urna cursus vestibulum. Fusce commodo aliquam arcu. Nam commodo suscipit quam. Quisque id odio. Praesent venenatis metus at tortor pulvinar varius.\n\n";
Kl.prototype.yv="a ac accumsan ad adipiscing aenean aliquam aliquet amet ante aptent arcu at auctor augue bibendum blandit class commodo condimentum congue consectetuer consequat conubia convallis cras cubilia cum curabitur curae cursus dapibus diam dictum dictumst dignissim dis dolor donec dui duis egestas eget eleifend elementum elit eni enim erat eros est et etiam eu euismod facilisi facilisis fames faucibus felis fermentum feugiat fringilla fusce gravida habitant habitasse hac hendrerit hymenaeos iaculis id imperdiet in inceptos integer interdum ipsum justo lacinia lacus laoreet lectus leo libero ligula litora lobortis lorem luctus maecenas magna magnis malesuada massa mattis mauris metus mi molestie mollis montes morbi mus nam nascetur natoque nec neque netus nibh nisi nisl non nonummy nostra nulla nullam nunc odio orci ornare parturient pede pellentesque penatibus per pharetra phasellus placerat platea porta porttitor posuere potenti praesent pretium primis proin pulvinar purus quam quis quisque rhoncus ridiculus risus rutrum sagittis sapien scelerisque sed sem semper senectus sit sociis sociosqu sodales sollicitudin suscipit suspendisse taciti tellus tempor tempus tincidunt torquent tortor tristique turpis ullamcorper ultrices ultricies urna ut varius ve vehicula vel velit venenatis vestibulum vitae vivamus viverra volutpat vulputate";
J.Wa.jm=function(){N.call(this);lg();var a=Wl(),b=new Jl(a,40,10);b.H();Zd(document.body,"click",function(){b.D()})};t(J.Wa.jm,N);m(J.Wa.jm);J.version="1.18.15";J.ra={};J.init=function(a){J.ra=a;a=Hc();"true"===a.get("debug")&&(J.ra.debug=!0);"true"===a.get("office")&&(J.ra.office=!0);a.get("console")?J.ra.escapeConsole="false"===a.get("console"):J.ra.escapeConsole="true"===J.ra.escapeConsole;switch(a.get("app")||J.ra.app){case "main":J.Wa.Gd.F();break;case "pathedit":J.Wa.gh.F();break;case "test":J.Wa.jm.F()}};
window.feng=J;J.init=J.init;
